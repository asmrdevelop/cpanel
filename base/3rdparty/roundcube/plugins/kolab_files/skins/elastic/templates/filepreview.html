<roundcube:include file="includes/layout.html" />

<h1 class="voice"><roundcube:var name="env:filename" /></h1>

<div id="layout-sidebar" class="listbox">
	<div class="header">
		<a class="button icon back-content-button" href="#content" data-hidden="big"><span class="inner"><roundcube:label name="back" /></span></a>
		<span class="header-title" id="aria-label-contentinfo"><roundcube:label name="properties" /></span>
	</div>
	<div class="scroller">
		<roundcube:object name="fileinfobox" id="fileinfo" class="listing props-table" />
	</div>
</div>

<div id="layout-content" class="selected">
	<h2 id="aria-label-toolbar" class="voice"><roundcube:label name="arialabeltoolbar" /></h2>
	<div class="header" role="toolbar" aria-labelledby="aria-label-toolbar">
		<a class="button icon properties" id="properties-button" href="#properties" onclick="UI.show_sidebar()" data-hidden="big">
			<span class="inner"><roundcube:label name="properties"></span>
		</a>
		<span class="header-title constant"><roundcube:var name="env:filename" /></span>
		<div id="filetoolbar" class="toolbar menu">
			<roundcube:button command="files-get" type="link" class="download disabled" classAct="download"
				label="kolab_files.get" title="kolab_files.getfile" innerClass="inner" />
			<roundcube:button command="files-edit" type="link" class="edit disabled" classAct="edit"
				label="kolab_files.edit" title="kolab_files.editfile" innerClass="inner" data-hidden="small" />
			<roundcube:button command="files-save" type="link" class="save disabled" classAct="save"
				label="kolab_files.save" title="kolab_files.savefile" innerClass="inner" style="display:none" data-hidden="small" />
			<roundcube:button command="files-delete" type="link" class="delete disabled" classAct="delete"
				label="delete" title="kolab_files.deletefile" innerClass="inner" />
			<roundcube:button command="files-print" type="link" class="print disabled" classAct="print"
				label="print" title="kolab_files.printfile" innerClass="inner" data-hidden="small" />
			<roundcube:if condition="stripos(env:mimetype, 'image/') === 0" />
				<roundcube:button command="image-scale" type="link" prop="+" data-hidden="small"
					class="zoomin disabled" classAct="zoomin"
					label="zoomin" title="increaseimage" innerclass="inner" />
				<roundcube:button command="image-scale" type="link" prop="-" data-hidden="small"
					class="zoomout disabled" classAct="zoomout"
					label="zoomout" title="decreaseimage" innerclass="inner" />
				<roundcube:button command="image-rotate" type="link"
					class="rotate disabled" classAct="rotate" data-hidden="small"
					label="rotate" title="rotateimage" innerclass="inner" />
			<roundcube:endif />
		</div>
	</div>
	<h2 id="aria-label-filecontent" class="voice"><roundcube:label name="kolab_files.arialabelfilecontent" /></h2>
	<div class="iframe-wrapper file-type-<roundcube:exp expression="strtolower(preg_replace('|/.*$|', '', env:mimetype))" />">
		<roundcube:object name="filepreviewframe" id="fileframe" role="main" aria-labelledby="aria-label-filecontent" />
	</div>
<roundcube:if condition="stripos(env:mimetype, 'image/') === 0" />
	<div id="image-tools" class="image-tools" data-hidden="big">
		<h3 id="aria-label-imagetools" class="voice"><roundcube:label name="arialabelimagetools" /></h3>
		<div class="toolbar menu" role="menu" aria-labelledby="aria-label-imagetools">
			<roundcube:button command="image-scale" type="link" prop="+"
				class="zoomin disabled" classAct="zoomin"
				label="zoomin" title="increaseimage" innerclass="inner" />
			<roundcube:button command="image-scale" type="link" prop="-"
				class="zoomout disabled" classAct="zoomout"
				label="zoomout" title="decreaseimage" innerclass="inner" />
			<roundcube:button command="image-rotate" type="link"
				class="rotate disabled" classAct="rotate"
				label="rotate" title="rotateimage" innerclass="inner" />
		</div>
		<a href="#" class="button icon tools" onclick="$(this).attr('title', $(this).data('label-' + ($('#image-tools').toggleClass('open').is('.open') ? 'hide' : 'show')))"
			data-label-show="<roundcube:label name="showtools" />" data-label-hide="<roundcube:label name="hidetools" />" title="<roundcube:label name="showtools" />">
			<span class="inner"><roundcube:label name="showtools" /></span>
		</a>
	</div>
<roundcube:endif />
</div>

<div id="files-file-create-dialog" class="popupmenu" role="dialog" aria-labelledby="aria-label-filecreateform" aria-hidden="true">
	<h3 id="aria-label-filecreateform" class="voice"><roundcube:label name="kolab_files.arialabelfilecreateform" /></h3>
	<roundcube:object name="file-create-form" />
</div>

<div id="files-file-edit-dialog" class="popupmenu" role="dialog" aria-labelledby="aria-label-fileeditdialog" aria-hidden="true">
	<h3 id="aria-label-fileeditdialog" class="voice"><roundcube:label name="kolab_files.arialabelfileeditdialog" /></h3>
	<roundcube:object name="file-edit-dialog">
</div>

<script src="plugins/kolab_files/skins/elastic/ui.js" type="text/javascript"></script>

<roundcube:include file="includes/footer.html" />
