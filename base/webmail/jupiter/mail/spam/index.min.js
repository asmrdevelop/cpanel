define(["angular","lodash","cjt/util/locale","cjt/util/parse","cjt/io/uapi-request","cjt/io/uapi","cjt/modules","cjt/directives/formWaiting","cjt/decorators/alertAPIReporter","uiBootstrap","cjt/services/APICatcher","cjt/directives/alertList"],(function(e,t,a,s,o){"use strict";var r=t.assign({},CPANEL.PAGE.spam_settings),c=CPANEL.PAGE.authuser,i=["spam_auto_delete","cpuser_spam_auto_delete"],n=["spam_auto_delete_score","cpuser_spam_auto_delete_score"];return function(){require(["cjt/bootstrap"],(function(u){e.module("App",["cjt2.webmail","cjt2.decorators.alertAPIReporter","ui.bootstrap"]).controller("BaseController",["$scope","$timeout","APICatcher","alertService",function(e,u,_,l){n.forEach((function(t){e[t]=parseInt(r[t],10)})),i.forEach((function(t){e[t]=s.parsePerlBoolean(r[t])})),e.spam_auto_delete_score||(e.cpuser_spam_auto_delete?e.spam_auto_delete_score=e.cpuser_spam_auto_delete_score-1:e.spam_auto_delete_score=5),t.assign(e,{deferred_focus:function(e){u((function(){document.getElementById(e).focus()}))},save:function(){var e;return e=this.spam_auto_delete?(new o.Class).initialize("Email","add_spam_filter",{required_score:this.spam_auto_delete_score,account:c}):(new o.Class).initialize("Email","disable_spam_autodelete",{account:c}),_.promise(e).then((function(e){e.warnings?function(e){e.warnings.forEach((function(e){l.add({type:"warning",message:e})}))}(e):l.add({type:"success",message:a.maketext("Success!")})}))}})}]),u("#ng_content","App")}))}}));