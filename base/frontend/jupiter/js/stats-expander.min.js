var build_progress_bar=function(e){var t=YAHOO.util.Dom.getElementsByClassName("cpanel_widget_progress_bar_percent","div",e);for(var s in t)if(t.hasOwnProperty(s)){var n=t[s];if("innerHTML"in n){var a=YAHOO.lang.trim(n.innerHTML);CPANEL.validate.positive_integer(a)&&CPANEL.widgets.progress_bar(e,a,"",'{"inverse_colors":"true"}')}}},build_progress_bars=function(e){YAHOO.util.Dom.getElementsByClassName("stats_progress_bar","div",e,build_progress_bar)},destroy_progress_bars=function(e){YAHOO.util.Dom.getElementsByClassName("cpanel_widget_progress_bar","div",e,(function(e){YAHOO.util.Dom.get(e).innerHTML=""}))},fetch_extended_stats=function(){YAHOO.util.Dom.setStyle("toggle_extended_stats","display","none"),YAHOO.util.Dom.setStyle("extended_stats_loading_icon","display","block"),YAHOO.util.Dom.get("extended_stats_loading_icon").innerHTML=CPANEL.icons.ajax+" loading...";var e={success:function(e){YAHOO.util.Dom.get("extended_stats").innerHTML=e.responseText,build_progress_bars("stats_extended"),expand_extended_stats()},failure:function(e){YAHOO.util.Dom.get("extended_stats_loading_icon").innerHTML="",YAHOO.util.Dom.setStyle("toggle_extended_stats","display","block"),YAHOO.util.Dom.get("toggle_extended_stats").innerHTML="AJAX Failure: click to try again"},timeout:3e3};YAHOO.util.Connect.asyncRequest("GET","home/retro/extended_statsbar.html?secpolicy_ui=no",e,null)},finish_expand_extended_stats=function(){YAHOO.env.ua.ie>5&&YAHOO.env.ua.ie<8&&build_progress_bars("stats_extended"),YAHOO.util.Dom.get("toggle_extended_stats").innerHTML="Collapse Stats",YAHOO.util.Dom.setStyle("toggle_extended_stats","display",""),YAHOO.util.Dom.setStyle("extended_stats_loading_icon","display","none"),YAHOO.util.Dom.replaceClass("toggle_extended_stats_img","box-expand-control","box-collapse-control"),YAHOO.util.Dom.setStyle("extended_stats","height","100%"),YAHOO.util.Dom.get("extended_stats_state").innerHTML="shown"},expand_extended_stats=function(){YAHOO.util.Dom.get("extended_stats_state").innerHTML="animating",YAHOO.util.Dom.get("toggle_extended_stats").innerHTML="";var e=CPANEL.animate.getAutoHeight("extended_stats");YAHOO.util.Dom.setStyle("extended_stats","height","0px"),YAHOO.util.Dom.setStyle("extended_stats","display","block");var t={height:{to:e,units:"px"}},s=new YAHOO.util.Anim("extended_stats",t,"0.5",YAHOO.util.Easing.easeOutStrong);s.onComplete.subscribe(finish_expand_extended_stats),s.animate()},finish_hide_extended_stats=function(){YAHOO.util.Dom.get("toggle_extended_stats").innerHTML="Expand Stats",YAHOO.util.Dom.replaceClass("toggle_extended_stats_img","box-collapse-control","box-expand-control"),YAHOO.util.Dom.get("extended_stats_state").innerHTML="hidden"},hide_extended_stats=function(){YAHOO.env.ua.ie>5&&YAHOO.env.ua.ie<8&&destroy_progress_bars("extended_stats"),YAHOO.util.Dom.get("extended_stats_state").innerHTML="animating",YAHOO.util.Dom.get("toggle_extended_stats").innerHTML="";var e=new YAHOO.util.Anim("extended_stats",{height:{to:"0",units:"px"}},"0.5",YAHOO.util.Easing.easeOutStrong);e.onComplete.subscribe(finish_hide_extended_stats),e.animate()},toggle_extended_stats=function(){YAHOO.util.Dom.get("toggle_extended_stats").blur();var e=YAHOO.util.Dom.get("extended_stats_state").innerHTML;"hidden"==(e=YAHOO.lang.trim(e))?(""==YAHOO.lang.trim(YAHOO.util.Dom.get("extended_stats").innerHTML)?fetch_extended_stats():expand_extended_stats(),SetNvData("xstatscollapsed","expanded")):"shown"==e&&(hide_extended_stats(),SetNvData("xstatscollapsed","collapsed"))},init_extended_stats=function(){YAHOO.util.Event.on("toggle_extended_stats","click",(function(e){YAHOO.util.Event.preventDefault(e)})),YAHOO.util.Event.on(["toggle_extended_stats","stats-header"],"click",toggle_extended_stats),build_progress_bars("content-stats"),register_interfacecfg_nvdata("xstatscollapsed"),"expanded"==NVData.xstatscollapsed&&""==YAHOO.lang.trim(YAHOO.util.Dom.get("extended_stats").innerHTML)&&fetch_extended_stats()};