define(["angular","cjt/util/locale","cjt/validator/validator-utils","cjt/io/api2-request","cjt/io/api2","cjt/modules","cjt/services/APIService","cjt/validator/validateDirectiveFactory","app/services/domains"],(function(e,i,a,t){"use strict";var n=null,r=null;function o(e){console.error(e)}var s={_pattern:function(){return n},_reservedSubdomains:function(){return r},_processReservedSubdomains:function(e){r=null,e&&e.data&&(r=[],r=e.data.map((function(e){return e})))},_processSubdomainRegex:function(e){if(n=null,e&&e.data){var i=e.data.pop();n=new RegExp(i)}}},d={validSubdomain:function(e){var t=a.initializeValidationResult(),n=s._pattern();return!e||n&&n.test(e)||(t.isValid=!1,t.add("validSubdomain",i.maketext("You must enter a valid subdomain."))),t},notReservedSubdomain:function(e){var t=a.initializeValidationResult(),n=s._reservedSubdomains();return!e||n&&-1===n.indexOf(e)||(t.isValid=!1,t.add("notReservedSubdomain",i.maketext("The server reserves this subdomain for system use only. Enter a different subdomain."))),t}};return e.module("cjt2.validate").run(["validatorFactory","APIService",function(e,i){var a=new t.Class;a.initialize("SubDomain","validregex"),i.promise(a).then(s._processSubdomainRegex,o);var n=new t.Class;n.initialize("SubDomain","getreservedsubdomains"),i.promise(n).then(s._processReservedSubdomains,o),e.generate(d)}]),{methods:d,factoryMethods:s,name:"valid-subdomain",description:"Validation to subdomain is not reserved and matches the proper format.",version:1}}));