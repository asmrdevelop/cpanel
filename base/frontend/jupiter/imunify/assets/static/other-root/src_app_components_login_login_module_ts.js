"use strict";(self["webpackJsonpother-root"]=self["webpackJsonpother-root"]||[]).push([["src_app_components_login_login_module_ts"],{35441:(n,t,e)=>{e.r(t),e.d(t,{LoginModule:()=>K});var o=e(71670),r=e(34929),i=e(52191),a=e(92013),c=e(34322),l=e(91792),p=e(15815),g=e(39749),s=e(53850),m=e(49818),u=e(11807),d=e(72986),f=e(72063),M=e(31076),C=e(64650);let h=(()=>{class n{constructor(n){this.xhr=n,this.login=this.xhr.rx(M.u.login)}}return n.\u0275fac=function(t){return new(t||n)(s["\u0275\u0275inject"](C.K))},n.\u0275prov=s["\u0275\u0275defineInjectable"]({token:n,factory:n.\u0275fac}),n})();var P=e(8264),_=e(17602),O=e(94564),v=e(33530),x=e(45271),y=e(14633),S=e(67765),w=e(50872),I=e(53530),b=e(60136),E=e(45837),F=e(38699);function N(n,t){1&n&&(s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275text"](1),s["\u0275\u0275pipe"](2,"translate"),s["\u0275\u0275elementContainerEnd"]()),2&n&&(s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](2,1,"login.error.credentials")," "))}function j(n,t){1&n&&(s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275text"](1),s["\u0275\u0275pipe"](2,"translate"),s["\u0275\u0275elementContainerEnd"]()),2&n&&(s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](2,1,"login.error.service")," "))}function k(n,t){if(1&n&&(s["\u0275\u0275elementStart"](0,"div",11),s["\u0275\u0275template"](1,N,3,3,"ng-container",12),s["\u0275\u0275template"](2,j,3,3,"ng-container",12),s["\u0275\u0275elementEnd"]()),2&n){const n=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("ngSwitch",n.error),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngSwitchCase",n.LoginError.credentials),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngSwitchCase",n.LoginError.service)}}function A(n,t){if(1&n&&(s["\u0275\u0275elementStart"](0,"mat-option",13),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&n){const n=t.$implicit;s["\u0275\u0275property"]("value",n.code),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",n.name," ")}}var B=(()=>(function(n){n[n.credentials=1]="credentials",n[n.service=2]="service"}(B||(B={})),B))();class G{constructor(n,t,e,o,r,i,a,l){this.formBuilder=n,this.router=t,this.route=e,this.appState=o,this.authState=r,this.authService=i,this.loginService=a,this.translate=l,this.is360Package=IMUNIFY_PACKAGE===g.GL.imunify360,this.LoginError=B,this.form=this.formBuilder.group({username:this.formBuilder.control("",[c.M.required("username")]),password:this.formBuilder.control("",[c.M.required("password")])})}login(){var n=this;return(0,o.Z)((function*(){yield(0,l.lastValueFrom)(n.loginService.login(n.form.value).pipe((0,l.catchError)(((t,e)=>(t&&Array.isArray(t.messages)?n.error=B.credentials:n.error=B.service,n.form.valueChanges.pipe((0,l.take)(1)).subscribe((()=>{n.error=null})),l.EMPTY))),(0,l.take)(1),(0,l.switchMap)((t=>(n.authService.setToken(t.data.items),n.route.queryParams.pipe((0,l.take)(1))))),(0,l.switchMap)((({targetUrl:t})=>(new RegExp(`^/${IMUNIFY_PACKAGE}/${IMUNIFY_PACKAGE===g.GL.imunify360?n.authState.role.value:""}.*`).test(t)||(t="/"),n.router.navigateByUrl(t,{replaceUrl:!0}),n.router.events.pipe((0,l.first)((n=>n instanceof i.RouteConfigLoadEnd))))))),{defaultValue:void 0})}))()}}G.\u0275fac=function(n){return new(n||G)(s["\u0275\u0275directiveInject"](m.I),s["\u0275\u0275directiveInject"](i.Router),s["\u0275\u0275directiveInject"](i.ActivatedRoute),s["\u0275\u0275directiveInject"](u.a),s["\u0275\u0275directiveInject"](d.j),s["\u0275\u0275directiveInject"](f.e8),s["\u0275\u0275directiveInject"](h),s["\u0275\u0275directiveInject"](P.sK))},G.\u0275cmp=s["\u0275\u0275defineComponent"]({type:G,selectors:[["i360-login"]],viewQuery:function(n,t){if(1&n&&s["\u0275\u0275viewQuery"](p.e,7),2&n){let n;s["\u0275\u0275queryRefresh"](n=s["\u0275\u0275loadQuery"]())&&(t.loader=n.first)}},decls:26,vars:18,consts:[[3,"formGroup","i360Submit"],["i360Loader","",1,"i360-logo",3,"svgIcon"],[1,"i360-input"],[1,"input-icon"],[1,"material-icons"],["type","text","name","i360-login","formControlName","username",1,"input","wide",3,"placeholder"],["type","password","name","i360-password","formControlName","password",1,"input","wide",3,"placeholder"],["class","i360-error",3,"ngSwitch",4,"ngIf"],["color","primary","type","submit","mat-raised-button","",1,"i360-submit"],[3,"value","valueChange"],[3,"value",4,"ngFor","ngForOf"],[1,"i360-error",3,"ngSwitch"],[4,"ngSwitchCase"],[3,"value"]],template:function(n,t){1&n&&(s["\u0275\u0275elementStart"](0,"form",0),s["\u0275\u0275listener"]("i360Submit",(function(){return t.login()})),s["\u0275\u0275element"](1,"mat-icon",1),s["\u0275\u0275elementStart"](2,"div",2)(3,"span",3)(4,"i",4),s["\u0275\u0275text"](5,"person"),s["\u0275\u0275elementEnd"]()(),s["\u0275\u0275element"](6,"input",5),s["\u0275\u0275pipe"](7,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](8,"div",2)(9,"span",3)(10,"i",4),s["\u0275\u0275text"](11,"lock"),s["\u0275\u0275elementEnd"]()(),s["\u0275\u0275element"](12,"input",6),s["\u0275\u0275pipe"](13,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](14,k,3,3,"div",7),s["\u0275\u0275elementStart"](15,"button",8),s["\u0275\u0275text"](16),s["\u0275\u0275pipe"](17,"translate"),s["\u0275\u0275elementEnd"]()(),s["\u0275\u0275elementStart"](18,"mat-form-field")(19,"mat-select",9),s["\u0275\u0275listener"]("valueChange",(function(n){return t.translate.use(n)})),s["\u0275\u0275pipe"](20,"async"),s["\u0275\u0275elementStart"](21,"mat-select-trigger")(22,"mat-icon"),s["\u0275\u0275text"](23,"language"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](24," Change language "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](25,A,2,2,"mat-option",10),s["\u0275\u0275elementEnd"]()()),2&n&&(s["\u0275\u0275property"]("formGroup",t.form),s["\u0275\u0275advance"](1),s["\u0275\u0275classProp"]("imunifyav-logo",!t.is360Package),s["\u0275\u0275propertyInterpolate"]("svgIcon",t.is360Package?"logo-imunify":"logo-imunifyAV"),s["\u0275\u0275advance"](5),s["\u0275\u0275propertyInterpolate"]("placeholder",s["\u0275\u0275pipeBind1"](7,10,"login.usernamePlaceholder")),s["\u0275\u0275advance"](6),s["\u0275\u0275propertyInterpolate"]("placeholder",s["\u0275\u0275pipeBind1"](13,12,"login.passwordPlaceholder")),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",t.error),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](17,14,"login.submit")," "),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("value",s["\u0275\u0275pipeBind1"](20,16,t.appState.lang)),s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("ngForOf",t.translate.langs))},dependencies:[_.MatButton,O.MatFormField,v.MatSelect,v.MatSelectTrigger,x.MatOption,y.MatIcon,S["\u0275NgNoValidate"],S.DefaultValueAccessor,S.NgControlStatus,S.NgControlStatusGroup,S.FormGroupDirective,S.FormControlName,w.O,I.J,p.e,b.NgForOf,b.NgIf,b.NgSwitch,b.NgSwitchCase,E.F,b.AsyncPipe,F.X$],styles:["[_nghost-%COMP%] {\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n  align-items: center;\n  width: 100%;\n  height: calc(100vh - 50px);\n  min-height: 500px;\n}\n\nform[_ngcontent-%COMP%] {\n  border-radius: 6px;\n  background-color: #f4f5f7;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\nform[_ngcontent-%COMP%]    > *[_ngcontent-%COMP%] {\n  margin-left: 34px;\n  margin-right: 34px;\n}\n\nform[_ngcontent-%COMP%]   .i360-logo[_ngcontent-%COMP%] {\n  width: 182px;\n  height: 47px;\n  position: relative;\n  display: block;\n  margin: 76px 14px 64px;\n}\n\nform[_ngcontent-%COMP%]   .i360-input[_ngcontent-%COMP%] {\n  width: 300px;\n  margin-bottom: 12px;\n}\n\nform[_ngcontent-%COMP%]   .i360-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\n  width: 100%;\n  height: 48px;\n  background-color: #ffffff;\n  border: solid 2px #e4e7ec;\n  outline: none;\n  border-radius: 4px;\n}\n\n.ltr[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .i360-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .ltr   [_nghost-%COMP%]   form[_ngcontent-%COMP%]   .i360-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\n  padding-left: 54px;\n}\n\n.rtl[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .i360-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .rtl   [_nghost-%COMP%]   form[_ngcontent-%COMP%]   .i360-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\n  padding-right: 54px;\n}\n\nform[_ngcontent-%COMP%]   .i360-input[_ngcontent-%COMP%]   .input-icon[_ngcontent-%COMP%] {\n  position: absolute;\n  margin-top: 11px;\n}\n\n.ltr[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .i360-input[_ngcontent-%COMP%]   .input-icon[_ngcontent-%COMP%], .ltr   [_nghost-%COMP%]   form[_ngcontent-%COMP%]   .i360-input[_ngcontent-%COMP%]   .input-icon[_ngcontent-%COMP%] {\n  margin-left: 17px;\n}\n\n.rtl[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .i360-input[_ngcontent-%COMP%]   .input-icon[_ngcontent-%COMP%], .rtl   [_nghost-%COMP%]   form[_ngcontent-%COMP%]   .i360-input[_ngcontent-%COMP%]   .input-icon[_ngcontent-%COMP%] {\n  margin-right: 17px;\n}\n\nform[_ngcontent-%COMP%]   .i360-input[_ngcontent-%COMP%]   .input-icon[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%] {\n  font-size: 26px;\n  color: #c5c7cb;\n}\n\nform[_ngcontent-%COMP%]   .i360-submit[_ngcontent-%COMP%] {\n  margin-top: 30px;\n  margin-bottom: 38px;\n  width: 300px;\n  height: 48px;\n}\n\nform[_ngcontent-%COMP%]   .i360-error[_ngcontent-%COMP%] {\n  color: #ea7474;\n  margin-top: 10px;\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n}\n\n  .mat-form-field-underline {\n  display: none;\n}\n\nmat-form-field[_ngcontent-%COMP%] {\n  margin-top: 12px;\n}\n\nmat-select-trigger[_ngcontent-%COMP%] {\n  display: flex;\n  color: #788896;\n  align-items: center;\n}\n\n.ltr[_nghost-%COMP%]   mat-select-trigger[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .ltr   [_nghost-%COMP%]   mat-select-trigger[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%] {\n  margin-left: 6px;\n}\n\n.rtl[_nghost-%COMP%]   mat-select-trigger[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .rtl   [_nghost-%COMP%]   mat-select-trigger[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%] {\n  margin-right: 6px;\n}"]}),(0,r.gn)([a.U],G.prototype,"login",null);var L=e(69679),R=e(62143),U=e(48810),V=e(38684);let K=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s["\u0275\u0275defineNgModule"]({type:n}),n.\u0275inj=s["\u0275\u0275defineInjector"]({providers:[h],imports:[i.RouterModule.forChild([{path:"",component:G,canActivate:[f.e8]}]),_.MatButtonModule,v.MatSelectModule,O.MatFormFieldModule,y.MatIconModule,L.Q,R.V,b.CommonModule,U.l,F.aw,V.m,i.RouterModule]}),n})()}}]);
//# sourceMappingURL=src_app_components_login_login_module_ts.js.map