define(["lodash","angular","cjt/io/uapi-request","cjt/services/APICatcher"],(function(e,t,a){"use strict";t.module("App").factory("statisticsService",["APICatcher",function(t){var i=["disk_usage","cachedmysqldiskusage","bandwidth"];return{fetchExtendedStats:function(){var n=(new a.Class).initialize("ResourceUsage","get_usages");return t.promise(n).then((function(t){return function(t){for(var a=0;a<t.length;a++){var n=t[a];n.maximum=n.maximum&&parseInt(n.maximum,10);var s=null!==n.maximum,r=s?parseFloat((100*n.usage/n.maximum).toFixed(2)):0,u=!1,c=!1;r>=80&&(c=!0,i.includes(n.id)&&(u=!0)),e.assign(n,{isLimited:s,percent:r,needFix:r>=60,showWarning:u,showActionButton:c})}}(t.data),t.data}))}}}])}));