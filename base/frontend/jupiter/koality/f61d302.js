(window.webpackJsonp=window.webpackJsonp||[]).push([[81],{1020:function(e,t,n){"use strict";n(961)},1021:function(e,t,n){"use strict";n(962)},1029:function(e,t,n){"use strict";n.r(t);var r=n(723),o=n(285),c=n(1),l=(n(27),n(19),n(28),n(11)),d=(n(40),n(39),n(30),n(16),n(53),n(17),n(15),n(36)),m=n(7),v=n(9),f=(n(25),n(68),n(18)),h=(n(35),n(43),n(22),n(150),n(41),n(151),n(152),n(153),n(154),n(155),n(156),n(157),n(158),n(159),n(160),n(161),n(162),n(163),n(164),n(165),n(166),n(31),n(170),n(89),n(99),n(38),n(291),n(32),n(69),n(731)),y=n(292),_=n(90),C=Object(c.b)({name:"UrlInputSuggest",components:{IconChevron:_.a,FormLabel:y.a},directives:{onClickaway:h.directive},props:{value:{type:String,default:""},options:{type:Array,default:function(){return[]}},error:{type:String,default:""},inputBaseClasses:{type:String,default:"border p-2 rounded bg-gray-100 focus:bg-white focus:outline-none transition-all duration-300"},inputErrorClasses:{type:String,default:"border-red-300"}},setup:function(e,t){var n=t.emit,r=Object(c.i)(!1),o=function(){return r.value=!1};return{showList:r,closeList:o,toggleList:function(){return r.value=!r.value},selectEntry:function(e){o(),n("input",e)}}}}),O=n(4),j=Object(O.a)(C,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:e.closeList,expression:"closeList"}]},[n("FormLabel",[e._t("default")],2),e._v(" "),n("div",{staticClass:"relative"},[n("div",{staticClass:"relative flex justify-center rounded border-gray-300 p-2 border border-solid",class:[{"rounded-b-none":e.showList}]},[n("input",{staticClass:"w-full outline-none border-0 bg-white",attrs:{type:"text"},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)}}}),e._v(" "),e.options&&e.options.length?n("div",{staticClass:"ml-1 cursor-pointer px-1 text-gray-500",attrs:{"show-list":e.showList},on:{click:e.toggleList}},[n("IconChevron",{staticClass:"w-2 h-2",attrs:{degree:e.showList?270:90,color:"currentColor"}})],1):e._e()]),e._v(" "),n("div",{staticClass:"overflow-hidden overflow-y-auto scrolling-auto no-scrollbar absolute w-full z-10",class:[e.showList?"shadow-lg":""]},[n("div",{staticClass:"rounded rounded-t-none border border-t-0 border-solid transition-default bg-white",class:[e.showList?"border-gray-300 shadow":"border-transparent"],style:[e.showList?{maxHeight:"300px"}:{maxHeight:"0"}]},e._l(e.options,(function(t,r){return n("div",{key:r,staticClass:"cursor-pointer hover:bg-gray-200 px-2 py-1",on:{click:function(n){return e.selectEntry(t)}}},[e._v("\n          "+e._s(t)+"\n        ")])})),0)])]),e._v(" "),e.error.length?n("div",{staticClass:"text-red-500 text-sm p-1"},[e._v("\n    "+e._s(e.error)+"\n  ")]):e._e()],1)}),[],!1,null,null,null).exports,x=Object(c.b)({name:"ComponentFinderEntry",components:{UrlInputSuggest:j},props:{urls:{type:Object,default:function(){}},entry:{type:Object,default:function(){}},failedDomains:{type:Array,default:function(){return[]}}},setup:function(e,t){var n=t.emit,r=Object(c.r)(),o=Object(c.a)((function(){return r.getters["projects/getActualSystemDomain"]})),l=Object(c.a)((function(){var t;return!(null===(t=e.urls[e.entry.type])||void 0===t?void 0:t.length)||e.urls[e.entry.type].startsWith(o.value)})),datalist=Object(c.a)((function(){return e.entry.paths.length?Object(f.a)(new Set([].concat(Object(f.a)(e.entry.paths),[o.value]))):[o.value]}));return Object(c.s)(l,(function(){n("failedUrlCheck",{type:e.entry.type,state:l.value})})),{datalist:datalist}}}),S=(n(1020),Object(O.a)(x,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("UrlInputSuggest",{attrs:{error:e.failedDomains.includes(e.entry.type)?e.$t("componentFinder.formError"):"",options:e.datalist},model:{value:e.urls[e.entry.type],callback:function(t){e.$set(e.urls,e.entry.type,t)},expression:"urls[entry.type]"}},[e._v("\n  "+e._s(e.entry.name)+"\n")])}),[],!1,null,null,null).exports),w=n(288),F=n(287),k=n(880),$=m.default.extend({name:"IconFinder",props:{color:{type:String,default:"currentColor"},icon:{type:String,default:""}}}),I=Object(O.a)($,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 640"}},[n("g",{attrs:{stroke:"none","stroke-width":"1",fill:e.color,"fill-rule":"nonzero"}},["chrome"===e.icon?n("path",{attrs:{d:"M131.5 217.5L55.1 100.1c47.6-59.2 119-91.8 192-92.1 42.3-.3 85.5 10.5 124.8 33.2 43.4 25.2 76.4 61.4 97.4 103L264 133.4c-58.1-3.4-113.4 29.3-132.5 84.1zm32.9 38.5c0 46.2 37.4 83.6 83.6 83.6s83.6-37.4 83.6-83.6-37.4-83.6-83.6-83.6-83.6 37.3-83.6 83.6zm314.9-89.2L339.6 174c37.9 44.3 38.5 108.2 6.6 157.2L234.1 503.6c46.5 2.5 94.4-7.7 137.8-32.9 107.4-62 150.9-192 107.4-303.9zM133.7 303.6L40.4 120.1C14.9 159.1 0 205.9 0 256c0 124 90.8 226.7 209.5 244.9l63.7-124.8c-57.6 10.8-113.2-20.8-139.5-72.5z"}}):e._e(),e._v(" "),"browser"===e.icon?n("path",{attrs:{d:"M464 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM32 80c0-8.8 7.2-16 16-16h48v64H32V80zm448 352c0 8.8-7.2 16-16 16H48c-8.8 0-16-7.2-16-16V160h448v272zm0-304H128V64h336c8.8 0 16 7.2 16 16v48z"}}):e._e(),e._v(" "),"cart"===e.icon?n("path",{attrs:{d:"M553.74 149.88H179.47l-7.38-39.48A21.27 21.27 0 00151.21 93H75.62A10.65 10.65 0 0065 103.66v7.11c0 5.9 4.76 10.67 10.62 10.67h69.7l61.92 331.42a56.78 56.78 0 00-14.74 38.26c0 31.42 25.37 56.88 56.67 56.88s56.66-25.46 56.66-56.88a56.75 56.75 0 00-7.6-28.43h128.54a56.75 56.75 0 00-7.6 28.44c0 31.4 25.37 56.87 56.66 56.87 31.3 0 56.67-25.46 56.67-56.88a56.8 56.8 0 00-17.17-40.76 21.28 21.28 0 00-20.61-16.11H232.59l-10.62-56.88h293.4a21.27 21.27 0 0020.81-16.97l38.37-184.85a21.3 21.3 0 00-20.8-25.68zM277.5 491.13a28.42 28.42 0 01-28.33 28.43 28.42 28.42 0 01-28.34-28.43 28.42 28.42 0 0128.34-28.44 28.42 28.42 0 0128.33 28.44zm198.33 28.43a28.42 28.42 0 01-28.33-28.43 28.42 28.42 0 0128.33-28.44 28.42 28.42 0 0128.34 28.44 28.42 28.42 0 01-28.34 28.43zm33.79-170.62H216.65L184.78 178.3h360.25l-35.41 170.63z"}}):e._e(),e._v(" "),"sitemap"===e.icon?n("path",{attrs:{id:"sitemap",d:"M575.6 405.81h-28.4V319.1a27.02 27.02 0 00-26.99-27.03H334.2V235.2h42.6a28.42 28.42 0 0028.4-28.44v-85.31A28.42 28.42 0 00376.8 93H263.2a28.42 28.42 0 00-28.4 28.44v85.31a28.42 28.42 0 0028.4 28.44h42.6v56.87H119.79A27.02 27.02 0 0092.8 319.1v86.72H64.4A28.42 28.42 0 0036 434.25v85.31A28.42 28.42 0 0064.4 548h85.2a28.42 28.42 0 0028.4-28.44v-85.31a28.42 28.42 0 00-28.4-28.44h-28.4V320.5h184.6v85.31h-28.4a28.42 28.42 0 00-28.4 28.44v85.31A28.42 28.42 0 00277.4 548h85.2a28.42 28.42 0 0028.4-28.44v-85.31a28.42 28.42 0 00-28.4-28.44h-28.4V320.5h184.6v85.31h-28.4a28.42 28.42 0 00-28.4 28.44v85.31A28.42 28.42 0 00490.4 548h85.2a28.42 28.42 0 0028.4-28.44v-85.31a28.42 28.42 0 00-28.4-28.44zm-426 28.44v85.31H64.4v-85.31h85.2zm213 0v85.31h-85.2v-85.31h85.2zm-99.4-227.5v-85.31h113.6v85.31H263.2zm312.4 312.81h-85.2v-85.31h85.2v85.31z"}}):e._e(),e._v(" "),"searchengin"===e.icon?n("path",{attrs:{d:"M220.6 130.3l-67.2 28.2V43.2L98.7 233.5l54.7-24.2v130.3l67.2-209.3zm-83.2-96.7l-1.3 4.7-15.2 52.9C80.6 106.7 52 145.8 52 191.5c0 52.3 34.3 95.9 83.4 105.5v53.6C57.5 340.1 0 272.4 0 191.6c0-80.5 59.8-147.2 137.4-158zm311.4 447.2c-11.2 11.2-23.1 12.3-28.6 10.5-5.4-1.8-27.1-19.9-60.4-44.4-33.3-24.6-33.6-35.7-43-56.7-9.4-20.9-30.4-42.6-57.5-52.4l-9.7-14.7c-24.7 16.9-53 26.9-81.3 28.7l2.1-6.6 15.9-49.5c46.5-11.9 80.9-54 80.9-104.2 0-54.5-38.4-102.1-96-107.1V32.3C254.4 37.4 320 106.8 320 191.6c0 33.6-11.2 64.7-29 90.4l14.6 9.6c9.8 27.1 31.5 48 52.4 57.4s32.2 9.7 56.8 43c24.6 33.2 42.7 54.9 44.5 60.3s.7 17.3-10.5 28.5zm-9.9-17.9c0-4.4-3.6-8-8-8s-8 3.6-8 8 3.6 8 8 8 8-3.6 8-8z"}}):e._e(),e._v(" "),"search"===e.icon?n("path",{attrs:{d:"M508.5 481.6l-129-129c-2.3-2.3-5.3-3.5-8.5-3.5h-10.3C395 312 416 262.5 416 208 416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c54.5 0 104-21 141.1-55.2V371c0 3.2 1.3 6.2 3.5 8.5l129 129c4.7 4.7 12.3 4.7 17 0l9.9-9.9c4.7-4.7 4.7-12.3 0-17zM208 384c-97.3 0-176-78.7-176-176S110.7 32 208 32s176 78.7 176 176-78.7 176-176 176z"}}):e._e(),e._v(" "),"link"===e.icon?n("path",{attrs:{d:"M301.148 394.702l-79.2 79.19c-50.778 50.799-133.037 50.824-183.84 0-50.799-50.778-50.824-133.037 0-183.84l79.19-79.2a132.833 132.833 0 0 1 3.532-3.403c7.55-7.005 19.795-2.004 20.208 8.286.193 4.807.598 9.607 1.216 14.384.481 3.717-.746 7.447-3.397 10.096-16.48 16.469-75.142 75.128-75.3 75.286-36.738 36.759-36.731 96.188 0 132.94 36.759 36.738 96.188 36.731 132.94 0l79.2-79.2.36-.36c36.301-36.672 36.14-96.07-.37-132.58-8.214-8.214-17.577-14.58-27.585-19.109-4.566-2.066-7.426-6.667-7.134-11.67a62.197 62.197 0 0 1 2.826-15.259c2.103-6.601 9.531-9.961 15.919-7.28 15.073 6.324 29.187 15.62 41.435 27.868 50.688 50.689 50.679 133.17 0 183.851zm-90.296-93.554c12.248 12.248 26.362 21.544 41.435 27.868 6.388 2.68 13.816-.68 15.919-7.28a62.197 62.197 0 0 0 2.826-15.259c.292-5.003-2.569-9.604-7.134-11.67-10.008-4.528-19.371-10.894-27.585-19.109-36.51-36.51-36.671-95.908-.37-132.58l.36-.36 79.2-79.2c36.752-36.731 96.181-36.738 132.94 0 36.731 36.752 36.738 96.181 0 132.94-.157.157-58.819 58.817-75.3 75.286-2.651 2.65-3.878 6.379-3.397 10.096a163.156 163.156 0 0 1 1.216 14.384c.413 10.291 12.659 15.291 20.208 8.286a131.324 131.324 0 0 0 3.532-3.403l79.19-79.2c50.824-50.803 50.799-133.062 0-183.84-50.802-50.824-133.062-50.799-183.84 0l-79.2 79.19c-50.679 50.682-50.688 133.163 0 183.851z"}}):e._e()])])}),[],!1,null,null,null).exports,L=Object(c.b)({name:"ComponentFinderProgress",components:{IconFinder:I,IconCheckmark:k.a,LoadingSpinner:o.a},setup:function(){var e=Object(c.l)().i18n,t=Object(c.r)();return{steps:[{id:0,icon:"browser",title:e.t("componentFinder.steps.step1Title"),subline:e.t("componentFinder.steps.step1Subline")},{id:1,icon:"link",title:e.t("componentFinder.steps.step2Title"),subline:e.t("componentFinder.steps.step2Subline")},{id:2,icon:"sitemap",title:e.t("componentFinder.steps.step3Title"),subline:e.t("componentFinder.steps.step3Subline")},{id:3,icon:"cart",title:e.t("componentFinder.steps.step4Title"),subline:e.t("componentFinder.steps.step4Subline")},{id:4,icon:"search",title:e.t("componentFinder.steps.step5Title"),subline:e.t("componentFinder.steps.step5Subline")},{id:5,icon:"search",title:e.t("componentFinder.steps.step6Title"),subline:e.t("componentFinder.steps.step6Subline")}],finderStep:Object(c.a)((function(){return t.getters["componentFinder/getComponentFinderStep"]}))}}}),A=Object(O.a)(L,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex flex-col space-y-4"},e._l(e.steps,(function(t,i){return n("div",{key:t.id,staticClass:"rounded-lg px-4 py-2 flex space-x-4 bg-gray-200 items-center justify-between",class:[e.finderStep>=i?"opacity-100":"opacity-25"]},[n("div",{staticClass:"w-8"},[n("IconFinder",{attrs:{icon:t.icon}})],1),e._v(" "),n("div",{staticClass:"flex-auto"},[n("h3",{staticClass:"font-medium"},[e._v("\n        "+e._s(t.title)+"\n      ")]),e._v(" "),n("p",{staticClass:"font-light text-sm"},[e._v("\n        "+e._s(t.subline)+"\n      ")])]),e._v(" "),n("div",{staticClass:"w-6 flex-center"},[n("div",{staticClass:"w-6 h-6 flex-center rounded-full",class:[{"bg-error-low":e.finderStep>i}]},[e.finderStep===i?n("LoadingSpinner",{attrs:{size:20,"border-size":2}}):e._e(),e._v(" "),e.finderStep>i?n("IconCheckmark",{staticClass:"w-4 text-white"}):e._e()],1)])])})),0)}),[],!1,null,null,null).exports,V=Object(c.b)({name:"ComponentFinderForm",components:{ComponentFinderProgress:A,FormFooter:F.a,SideScreen:w.a,ComponentFinderEntry:S,LoadingSpinner:o.a},props:{countSuggestions:{type:Number,default:0},runId:{type:String,default:null},openScreen:{type:Boolean,default:!1}},setup:function(e,t){var n=t.emit,r=Object(c.l)(),o=r.$apiClient,l=r.i18n,d=Object(c.o)(),m=Object(c.p)(),h=Object(c.r)(),y=Object(c.i)(null),_=Object(c.i)(null),C=Object(c.i)([]),O=Object(c.i)(null),j=Object(c.a)((function(){return h.getters["componentFinder/getComponentFinder"]})),x=Object(c.a)((function(){return h.getters["componentFinder/getFinishedFinder"]})),S=Object(c.a)((function(){return h.getters["pageComponents/getSuggestions"]})),w=Object(c.a)((function(){return h.getters["pageComponents/getSuggestionTypes"]})),F=Object(c.a)((function(){return h.getters["pageComponents/getComponents"]})),k=Object(c.a)((function(){return h.getters["projects/getActualSystemDomain"]})),$=Object(c.a)((function(){return h.getters["componentFinder/getPoll"]})),I=Object(c.a)((function(){return x.value.includes(e.runId)})),L=Object(c.a)((function(){$.value;return j.value(e.runId)?j.value(e.runId).filter((function(e){return w.value.includes(e.componentIdentifier)})).length:0})),A=function(){if(x.value&&j.value(e.runId)){var t=j.value(e.runId),n=Object(f.a)(new Set(Object.entries(S.value).map((function(e){return e[1].map((function(e){var t;return{id:e.id,sid:e.system_type.id,type:e.identifier,name:e.name,path:(null===(t=F.value.find((function(t){return t.suggestion.identifier===e.identifier})))||void 0===t?void 0:t.url)||""}}))})).flat())),r=t.reduce((function(e,a){return e[a.componentIdentifier]=e[a.componentIdentifier]||[],e[a.componentIdentifier].push(a),e}),{}),o=n.map((function(e){var t,o,c,d=n.find((function(t){return t.type===e.type}))||"";return{type:e.type,id:null==d?void 0:d.id,sid:null==d?void 0:d.sid,name:(o=null==d?void 0:d.type,c="admin.components.names.".concat(o),l.te(c)?l.t(c):o),paths:(null===(t=r[e.type])||void 0===t?void 0:t.length)?[(null==d?void 0:d.path.length)?null==d?void 0:d.path:null].concat(Object(f.a)(r[e.type].map((function(e){return(path=e.path).startsWith("http")?path:"".concat(k.value).concat(path);var path})))).filter((function(e){return e})):[(null==d?void 0:d.path.length)?null==d?void 0:d.path:null].filter((function(e){return e}))}}));y.value=o.reduce((function(e,a){var t;return e[a.type]=(null===(t=a.paths)||void 0===t?void 0:t[0])||"",e}),{}),_.value=Object(f.a)(o).sort((function(a,b){return a.paths.length>b.paths.length?-1:1}))}},V=function(){var e=d.value.query;h.dispatch("componentFinder/resetComponentFinderStep"),n("cancel"),e.openWizard&&m.replace({query:void 0})},z=function(){var e=Object(v.a)(regeneratorRuntime.mark((function e(){var t,r,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.value.params.sid,e.prev=1,e.next=4,o.getRepository("component");case 4:return c=e.sent,l=null===(t=_.value)||void 0===t?void 0:t.map((function(e){var t;return{url:(null===(t=y.value)||void 0===t?void 0:t[e.type])||"",name:e.name,device_id:1,system_type_id:e.sid,suggestion_id:e.id}})).filter((function(e){return e.url.length})),e.next=8,c.createComponents({system:r,updateIfComponentSuggestionExists:!0,components:l});case 8:V(),n("updateComponents"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}();return Object(c.s)(I,(function(){x.value&&j.value(e.runId)&&A()}),{immediate:!0}),{urls:y,componentData:_,failedDomains:C,error:O,finderIsFinished:I,currentFinderCount:L,failedUrlCheck:function(e){C.value=e.state?C.value.filter((function(t){return t!==e.type})):Object(f.a)(new Set([].concat(Object(f.a)(C.value),[e.type])))},save:z,cancel:V}}}),z=V,E=Object(O.a)(z,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("SideScreen",{attrs:{"is-open":e.openScreen},scopedSlots:e._u([{key:"headline",fn:function(){return[e._v("\n    "+e._s(e.$t("componentFinder.headline"))+"\n  ")]},proxy:!0},{key:"subline",fn:function(){return[n("p",{staticClass:"font-light"},[e._v("\n      "+e._s(e.$t("componentFinder.bodyText"))+"\n    ")]),e._v(" "),n("p",{staticClass:"font-light"},[e._v("\n      "+e._s(e.$t("componentFinder.subText"))+"\n    ")])]},proxy:!0},{key:"body",fn:function(){return[e.runId?n("div",[e.finderIsFinished?e._l(e.componentData,(function(t,r){return n("ComponentFinderEntry",{key:"cf-"+r,staticClass:"mb-4",attrs:{entry:t,urls:e.urls,"failed-domains":e.failedDomains},on:{failedUrlCheck:e.failedUrlCheck}})})):n("div",{staticClass:"mt-2"},[n("div",{staticClass:"flex items-center text-xs font-light mb-4"},[n("LoadingSpinner",{staticClass:"mr-2",attrs:{size:14,"border-size":1}}),e._v("\n          "+e._s(e.$tc("componentFinder.pagesFound",0,{n:e.currentFinderCount}))+"\n        ")],1),e._v(" "),n("ComponentFinderProgress")],1)],2):e._e()]},proxy:!0},{key:"footer",fn:function(){return[n("FormFooter",{attrs:{config:"store","store-button-label":"store","is-store-able":e.finderIsFinished},on:{cancel:e.cancel,store:e.save}})]},proxy:!0}])})}),[],!1,null,null,null).exports,R=n(80),T=Object(c.b)({name:"ComponentFinder",components:{GeneralButton:R.a,LoadingSpinner:o.a,ComponentFinderForm:E},props:{countSuggestions:{type:Number,default:0}},setup:function(){var e=Object(c.l)().$apiClient,t=Object(c.o)(),n=Object(c.r)(),r=Object(c.i)(null),o=Object(c.i)(!1),l=Object(c.a)((function(){return n.getters["access/getUserId"]})),d=Object(c.a)((function(){return n.getters["componentFinder/getRunningFinder"]})),m=Object(c.a)((function(){return!!d.value.find((function(e){return e===r.value}))})),f=function(){var n=Object(v.a)(regeneratorRuntime.mark((function n(){var c,d,m,v,f,h;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c=t.value.params,d=c.pid,m=c.sid,n.next=4,e.getRepository("system");case 4:return v=n.sent,n.next=7,v.triggerComponentFinder(d,m,l.value);case 7:f=n.sent,h=f.runId,r.value=h,o.value=!0,n.next=16;break;case 13:n.prev=13,n.t0=n.catch(0),console.error(n.t0);case 16:case"end":return n.stop()}}),n,null,[[0,13]])})));return function(){return n.apply(this,arguments)}}();return Object(c.s)(t,(function(){t.value.query.openWizard&&f()}),{immediate:!0}),{activateComponentFinder:f,runningFinder:m,openScreen:o,runId:r}}}),N=T,P=Object(O.a)(N,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("GeneralButton",{attrs:{"is-disabled":e.runningFinder},nativeOn:{click:function(t){return e.activateComponentFinder.apply(null,arguments)}}},[e._v("\n    "+e._s(e.$t("component-finder.button"))+"\n    "),e.runningFinder?n("LoadingSpinner",{staticClass:"ml-2",attrs:{size:16,"border-size":1}}):e._e()],1),e._v(" "),n("ComponentFinderForm",{attrs:{"open-screen":e.openScreen,"run-id":e.runId,"count-suggestions":e.countSuggestions},on:{updateComponents:function(t){return e.$emit("updateComponents")},cancel:function(t){e.openScreen=!1}}})],1)}),[],!1,null,null,null),D=P.exports,H=n(914),M=n.n(H),U=n(930),B=n(197),W=n(124),G=n(112),J=n(289),K=Object(c.b)({name:"UrlManagementBox",components:{InputField:J.a,Richtext:G.a,FormLabel:y.a,SideScreen:w.a,FormFooter:F.a,Skeleton:B.a,IconPencil:U.a,Multiselect:M.a},props:{entry:{type:Object,default:function(){}},withOutSuggestions:{type:Boolean,default:!1},outerOptions:{type:Array,default:function(){return[]}}},setup:function(e,t){var n=t.emit,r=Object(c.l)(),o=r.$apiClient,l=r.i18n,d=Object(c.o)(),m=Object(c.r)(),f=Object(c.i)(!1),h=Object(c.i)(""),y=Object(c.i)(!1),_=Object(c.i)([]),C=Object(c.i)(null),O=Object(c.i)(null),j=Object(c.i)(""),x=d.value.params,S=x.pid,w=x.sid,F=Object(c.a)((function(){return m.getters["screenshots/getScreenshots"]})),k=Object(c.a)((function(){return m.getters["onboarding/onboardingStatus"]})),$=Object(c.a)((function(){return m.getters["projects/getActualSystemDomain"]})),I=Object(c.m)(Object(v.a)(regeneratorRuntime.mark((function t(){var n,r,c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.withOutSuggestions){t.next=5;break}return _.value=e.outerOptions,j.value=null===(n=e.outerOptions)||void 0===n?void 0:n.find((function(t){return t.id===e.entry.suggestion_id})).name,t.abrupt("return");case 5:return t.next=7,o.getRepository("component");case 7:return r=t.sent,t.next=10,r.showComponentTypes(S);case 10:c=t.sent,l=c.system_types,_.value=l,t.next=19;break;case 15:t.prev=15,t.t0=t.catch(0),console.error(t.t0),y.value=t.t0;case 19:case"end":return t.stop()}}),t,null,[[0,15]])})))),L=I.fetch,A=I.fetchState,V=Object(c.a)((function(){var e;return(null===(e=O.value)||void 0===e?void 0:e.length)<3})),z=function(e,t){return l.te(e)?l.t(e):t},E=Object(c.a)((function(){var t="admin.components.names.".concat(e.entry.suggestion_identifier);return z(t,e.entry.name)})),R=Object(c.a)((function(){var t="admin.components.hints.".concat(e.entry.suggestion_identifier);return z(t,e.entry.description)})),T=Object(c.a)((function(){return e.entry.apiValue.length?e.entry.apiValue:l.t("admin.management.sentenceNotSet")})),N=Object(c.a)((function(){return Object(W.a)(h.value)})),P=Object(c.a)((function(){return e.entry.apiValue?e.entry.apiValue!==h.value&&N.value:h.value.length&&N.value})),D=Object(c.a)((function(){var t=F.value[e.entry.id];return t?{screenShot:t.thumb||"",rawImage:t.raw||"",pending:t.pending||!1}:{pending:!1}})),H=function(){h.value=e.entry.apiValue||$.value},M=function(){f.value=!1,h.value=$.value,y.value=!1},U=function(){var body={id:e.entry.id,url:h.value,suggestion_id:e.withOutSuggestions?null:e.entry.suggestion_id,apiUrl:e.entry.apiValue,name:e.withOutSuggestions?O.value:e.entry.name,device_id:1,system_type_id:e.withOutSuggestions?C.value.id:e.entry.system_type_id,system:w};return Object(W.i)(body)},B=function(){var t=Object(v.a)(regeneratorRuntime.mark((function t(r){var c,l,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,y.value=!1,t.next=4,o.getRepository("component");case 4:c=t.sent,t.t0=r,t.next="update"===t.t0?8:"create"===t.t0?14:"delete"===t.t0?20:25;break;case 8:return t.next=10,c.updateComponent(e.entry.id,U());case 10:return l=t.sent,m.dispatch("pageComponents/updateComponent",{id:e.entry.id,data:l.component}),m.dispatch("screenshots/activateScreenshotPending",e.entry.id),t.abrupt("break",25);case 14:return t.next=16,c.createComponent(U());case 16:return d=t.sent,m.dispatch("pageComponents/createComponent",d.component),m.dispatch("screenshots/activateScreenshotPending",d.component.id),t.abrupt("break",25);case 20:return t.next=22,c.deleteComponent(e.entry.id);case 22:return m.dispatch("pageComponents/deleteComponent",e.entry.id),m.dispatch("screenshots/deleteScreenshot",e.entry.id),t.abrupt("break",25);case 25:f.value=!1,n("updateComponents"),M(),H(),t.next=34;break;case 31:t.prev=31,t.t1=t.catch(0),y.value=t.t1;case 34:case"end":return t.stop()}}),t,null,[[0,31]])})));return function(e){return t.apply(this,arguments)}}();return Object(c.s)((function(){return f.value}),(function(){f.value&&H()}),{immediate:!0}),Object(c.s)((function(){return N.value}),(function(){y.value=N.value?"":l.t("urlIsNotValid")})),{editMode:f,url:h,error:y,options:_,componentType:C,name:O,optionTypeName:j,fetchState:A,fetch:L,nameIsNotValid:V,componentName:E,componentHint:R,componentUrl:T,enableSave:P,screenShot:D,cancelSidescreen:M,editEntry:function(){f.value=!0,e.withOutSuggestions&&(C.value=_.value.find((function(t){return t.id===e.entry.suggestion_id})),O.value=e.entry.name)},saveEntry:function(){e.withOutSuggestions||e.entry.apiValue.length&&e.entry.apiValue!==h.value&&N.value?B("update"):h.value.length>0&&(B("create"),k.value||m.dispatch("ui/setInformationCards",{cards:["first","addComponents","lookAround"]}),m.dispatch("onboarding/activateComponent"))},deleteEntry:function(){H(),B("delete")}}}}),Q=K,X=Object(O.a)(Q,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"p-3 mb-2 border border-solid cursor-pointer ",class:[e.entry.apiValue.length?"border-gray-200":"border-third-regular bg-third-400"],on:{click:e.editEntry}},[n("div",{staticClass:"relative h-0 overflow-hidden aspect-ratio-4/3"},[n("div",{staticClass:"absolute left-0 top-0 right-0 bottom-0 flex-center"},[e.entry.apiValue.length&&!e.screenShot.screenShot||e.entry.apiValue.length&&e.screenShot.pending?n("Skeleton",{attrs:{"full-size":!0,round:!1}}):e._e(),e._v(" "),e.screenShot.screenShot?n("figure",{staticClass:"h-full"},[n("img",{staticClass:"object-cover object-top w-full h-full",attrs:{src:e.screenShot.screenShot,alt:"screenshot"}})]):n("svg",{staticClass:"w-1/5 text-gray-400 pointer-events-none",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"}},[n("path",{attrs:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",fill:"currentColor"}})])],1)])]),e._v(" "),n("div",{staticClass:"pl-3 pr-2"},[n("div",{staticClass:"text-xl truncate"},[e._v("\n      "+e._s(e.componentName)+"\n    ")]),e._v(" "),e.withOutSuggestions?n("div",{staticClass:"text-sm text-gray-700"},[e._v("\n      ("+e._s(e.optionTypeName)+")\n    ")]):e._e(),e._v(" "),n("div",{staticClass:"flex justify-between items-center"},[n("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.componentUrl,trigger:e.entry.apiValue.length>0?"hover":"manual",classes:"breakAll",popperOptions:{modifiers:{computeStyle:{gpuAcceleration:!1}}}},expression:"{\n          content: componentUrl,\n          trigger: entry.apiValue.length> 0 ? 'hover' : 'manual',\n          classes: 'breakAll',\n          popperOptions: { modifiers: { computeStyle: {gpuAcceleration: false}}}\n        }"}],staticClass:"truncate text-sm flex-auto"},[e.entry.apiValue.length?e._e():n("span",{staticClass:"inline-block px-1 text-xs bg-third-regular mr-1 rounded text-black"},[e._v("info")]),e._v("\n        "+e._s(e.componentUrl)+"\n      ")]),e._v(" "),n("div",{staticClass:"text-gray-500 hover:text-primary-regular cursor-pointer transition duration-300 ease-in flex-center h-5 w-5 ml-1",on:{click:e.editEntry}},[n("IconPencil",{staticClass:"w-3 h-4"})],1)])]),e._v(" "),n("SideScreen",{attrs:{"is-open":e.editMode,"is-mounted":e.editMode},scopedSlots:e._u([{key:"headline",fn:function(){return[e._v("\n      "+e._s(e.url?e.$t("admin.management.modalHeaderEdit"):e.$t("admin.management.modalHeaderNew"))+"\n    ")]},proxy:!0},{key:"subline",fn:function(){return[e._v("\n      "+e._s(e.componentHint)+"\n    ")]},proxy:!0},{key:"body",fn:function(){return[e.screenShot&&e.screenShot.rawImage?n("div",{staticClass:"aspect-ratio-4/3 h-0 overflow-hidden relative mb-4"},[n("div",{staticClass:"absolute left-0 top-0 right-0 bottom-0 flex-center"},[n("figure",{staticClass:"h-full"},[n("img",{staticClass:"object-cover object-top w-full h-full",attrs:{src:e.screenShot.rawImage,alt:"screenshot"}})])])]):e._e(),e._v(" "),e.withOutSuggestions?[n("InputField",{staticClass:"mb-6",attrs:{type:"text",name:"name",error:e.nameIsNotValid?e.$t("componentNameTooShort"):"",required:!0,placeholder:e.$t("componentAddForm.nameOfTheComponent"),debouncer:!0},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}},[e._v("\n          Name\n        ")]),e._v(" "),n("FormLabel",{attrs:{required:!0}},[e._v("\n          "+e._s(e.$t("componentType"))+"\n        ")]),e._v(" "),n("multiselect",{staticClass:"mb-6",attrs:{options:e.options,"select-label":"","allow-empty":!1,label:"name","deselect-label":"",placeholder:"","internal-search":!1,searchable:!0,"max-height":140},scopedSlots:e._u([{key:"option",fn:function(t){return[n("div",{staticClass:"option__desc"},[n("div",{staticClass:"option__title"},[e._v("\n                "+e._s(t.option.name)+"\n                "),n("div",{staticClass:"text-sm mt-2"},[n("Richtext",{staticClass:"leading-relaxed break-words whitespace-normal",attrs:{content:t.option.description}})],1)])])]}}],null,!1,4062393079),model:{value:e.componentType,callback:function(t){e.componentType=t},expression:"componentType"}})]:e._e(),e._v(" "),n("InputField",{attrs:{name:"url",type:"url",placeholder:e.$t("admin.management.sentenceNewUrl")},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.saveEntry.apply(null,arguments)}},model:{value:e.url,callback:function(t){e.url=t},expression:"url"}},[e._v("\n        URL\n      ")]),e._v(" "),e.error?n("div",{staticClass:"text-red-500 px-2 text-sm mt-5"},[e._v("\n        "+e._s(e.error)+"\n      ")]):e._e()]},proxy:!0},{key:"footer",fn:function(){return[n("FormFooter",{attrs:{config:e.entry.apiValue?"update":"store","is-store-able":!!e.withOutSuggestions||e.enableSave,"confirm-message":"admin.management.sentenceDeleteEntry",error:e.error},on:{cancel:e.cancelSidescreen,store:e.saveEntry,disable:e.deleteEntry}})]},proxy:!0}])})],1)}),[],!1,null,null,null),Y=X.exports,Z=n(720),ee=Object(c.b)({name:"ComponentList",components:{Dimensions:Z.a,UrlManagementBox:Y},props:{componentsData:{type:Array,default:function(){return[]}},header:{type:String,default:""}},setup:function(e){var t=Object(c.l)().i18n,n=Object(c.i)(!0),r=function(e,n){return t.te(e)?t.t(e):n};return{showBoxes:n,headline:Object(c.a)((function(){var t="admin.components.categories.".concat(e.header);return r(t,e.header)})),subline:Object(c.a)((function(){var head=e.header.replace(" ",""),t="settingsListSubline.".concat(head);return r(t,"")}))}}}),te=(n(1021),Object(O.a)(ee,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Dimensions",{scopedSlots:e._u([{key:"default",fn:function(t){var r=t.width;return n("div",{class:[{small:r<500},{medium:r>=500&&r<900},{big:r>=900}]},[n("div",{staticClass:"mb-8"},[n("header",{staticClass:"mb-8"},[n("h2",{staticClass:"text-2xl font-bold"},[e._v("\n          "+e._s(e.headline)+"\n        ")]),e._v(" "),n("p",[e._v(e._s(e.subline))])]),e._v(" "),n("div",{staticClass:"grid-urlList"},e._l(e.componentsData,(function(e){return n("UrlManagementBox",{key:e.suggestion_id,attrs:{entry:e}})})),1)])])}}])})}),[],!1,null,null,null).exports);function ne(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function re(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ne(Object(source),!0).forEach((function(t){Object(l.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):ne(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var oe=m.default.extend({name:"ComponentListWithSuggestions",components:{ComponentList:te,ComponentFinder:D},computed:re(re({},Object(d.c)({polling:"pageComponents/getPolling",componentsRaw:"pageComponents/getComponents",suggestionsRaw:"pageComponents/getSuggestions",onboardingStatus:"onboarding/onboardingStatus",projectDetails:"projects/getActualProjectDetails"})),{},{fieldsHeader:function(){return this.polling?[]:Object.keys(this.suggestionsRaw)},presetFields:function(){var e=this;return this.polling?[]:this.fieldsHeader.map((function(t){var n,r,o,c;return r=null===(n=e.suggestionsRaw)||void 0===n?void 0:n[t],o=e.componentsRaw,c=function(data,e){return data&&Object.prototype.hasOwnProperty.call(data,e)?data[e]:""},r.map((function(e){var data,t,n=(data=o,t=e.id,data.find((function(element){var e;return(null===(e=element.suggestion)||void 0===e?void 0:e.id)===t})));return{id:c(n,"id"),suggestion_id:e.id,suggestion_identifier:e.identifier,system_type_id:e.system_type.id,name:e.name,value:c(n,"url"),apiValue:c(n,"url"),complete:!1,description:e.description}}))}))},suggestions:function(){return this.polling?0:this.presetFields.reduce((function(a,b){return a+b.length}),0)},filledSuggestions:function(){return this.polling?0:this.presetFields.reduce((function(a,b){return b.filter((function(e){return e.apiValue.length>0})).length+a}),0)}}),watch:{filledSuggestions:{handler:function(e,t){0===e&&(t<1||void 0===t)&&this.$store.dispatch("ui/setInformationCards",{cards:["componentFinder"]})},immediate:!0}},methods:{updateComponents:function(){var e=this.$route.params,t=e.sid,n=e.pid;this.onboardingStatus||(this.$store.dispatch("onboarding/updateOnboarding",n),this.$store.dispatch("ui/setInformationCards",{cards:["first","addComponents","lookAround"]})),this.$store.dispatch("projects/setOnboardingCompleted",n),this.$store.dispatch("pageComponents/collect",t)}}}),ie=Object(O.a)(oe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.suggestions?n("ComponentFinder",{staticClass:"mb-8",attrs:{"count-suggestions":e.suggestions},on:{updateComponents:e.updateComponents}}):e._e(),e._v(" "),e._l(e.presetFields,(function(t,r){return n("ComponentList",{key:r,staticClass:"cmt-16",attrs:{"components-data":t,header:e.fieldsHeader[r]}})}))],2)}),[],!1,null,null,null).exports,ae=n(14),se={name:"ComponentAddForm"};se.props={openScreen:{type:Boolean,default:!1},options:{type:Array,default:function(){return[]}},remainingComponents:{type:Number,default:0}},se.setup=function(e,t){var n=e,r=Object(c.l)(),o=r.$apiClient,l=r.route,d=Object(c.r)(),m=t.emit,f=Object(c.i)(null),h=Object(c.i)(null),y=Object(c.i)(null),_=Object(c.i)(null),C=Object(c.a)((function(){return d.getters["projects/getActualSystemDomain"]})),O=Object(c.a)((function(){return!(!f.value||0===f.value.length)&&!Object(W.a)(f.value)})),j=Object(c.a)((function(){var e;return(null===(e=y.value)||void 0===e?void 0:e.length)<3})),x=Object(c.a)((function(){var e;return!!(f.value&&(null===(e=y.value)||void 0===e?void 0:e.length)>2&&h.value&&n.remainingComponents>0)})),S=function(){f.value=null,h.value=null,y.value=null,_.value=null,m("cancel")},w=function(){var e=Object(v.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,_.value=null,e.next=4,o.getRepository("component");case 4:return t=e.sent,e.next=7,t.createComponent({system:l.value.params.sid,system_type_id:Number(h.value.id),name:y.value,url:f.value,device_id:1});case 7:m("updateComponents"),S(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),_.value=e.t0.message,console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return Object(c.s)((function(){return n.openScreen}),(function(){h.value=n.options[0],f.value=C.value}),{immediate:!0}),{props:n,url:f,componentType:h,name:y,error:_,urlIsNotValid:O,nameIsNotValid:j,isStoreAble:x,cancel:S,save:w}},se.components=Object.assign({SideScreen:w.a,InputField:J.a,FormLabel:y.a,Multiselect:M.a,Richtext:G.a,FormFooter:F.a},se.components);var ce=se,le=Object(O.a)(ce,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("SideScreen",{attrs:{"is-open":e.openScreen,"is-mounted":e.openScreen,error:e.error},scopedSlots:e._u([{key:"headline",fn:function(){return[e._v("\n    "+e._s(e.$t("componentAddForm.headline"))+"\n  ")]},proxy:!0},{key:"subline",fn:function(){return[n("p",{staticClass:"font-light"},[e._v("\n      "+e._s(e.$t("componentAddForm.body"))+"\n    ")])]},proxy:!0},{key:"body",fn:function(){return[n("div",[n("InputField",{staticClass:"mb-6",attrs:{type:"text",name:"name",error:e.nameIsNotValid?e.$t("componentNameTooShort"):"",required:!0,placeholder:e.$t("componentAddForm.nameOfTheComponent"),debouncer:!0},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}},[e._v("\n        Name\n      ")]),e._v(" "),n("InputField",{staticClass:"mb-6",attrs:{type:"url",name:"url",required:!0,error:e.urlIsNotValid?e.$t("projectCheckUrlError"):"",placeholder:e.$t("componentAddForm.sentenceNewUrl"),debouncer:!0},model:{value:e.url,callback:function(t){e.url=t},expression:"url"}},[e._v("\n        Url\n      ")]),e._v(" "),n("FormLabel",{attrs:{required:!0}},[e._v("\n        "+e._s(e.$t("componentType"))+"\n      ")]),e._v(" "),n("multiselect",{attrs:{options:e.options,"select-label":"","allow-empty":!1,label:"name","deselect-label":"",placeholder:"","internal-search":!1,searchable:!0,"max-height":140},scopedSlots:e._u([{key:"option",fn:function(t){return[n("div",{staticClass:"option__desc"},[n("div",{staticClass:"option__title"},[e._v("\n              "+e._s(t.option.name)+"\n              "),n("div",{staticClass:"text-sm mt-2"},[n("Richtext",{staticClass:"leading-relaxed break-words whitespace-normal",attrs:{content:t.option.description}})],1)])])]}}]),model:{value:e.componentType,callback:function(t){e.componentType=t},expression:"componentType"}})],1)]},proxy:!0},{key:"footer",fn:function(){return[n("FormFooter",{attrs:{config:"store","store-button-label":"store","is-store-able":e.isStoreAble},on:{cancel:e.cancel,store:e.save}})]},proxy:!0}])})}),[],!1,null,null,null).exports,ue=n(878),pe=n(21),de={name:"AddNewComponent"};de.props={options:{type:Array,default:function(){return[]}},count:{type:Object,default:function(){return{current:0,limit:0}}}},de.setup=function(e,t){var n=e,r=Object(c.l)().i18n,o=Object(c.i)(!1),l=Object(c.a)((function(){return n.count.limit-n.count.current})),d=Object(c.a)((function(){return l.value>=0?"(".concat(r.tc("RemainingComponents",0,{count:l.value}),")"):""}));return{disabledFeature:pe.b,openScreen:o,remainingComponents:l,remainingText:d}},de.components=Object.assign({GeneralButton:R.a,InfoBox:ue.a,ComponentAddForm:le},de.components);var me=de,ve=Object(O.a)(me,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("GeneralButton",{attrs:{"is-disabled":0===e.remainingComponents,"data-cy":"button"},nativeOn:{click:function(t){e.remainingComponents>0&&(e.openScreen=!0)}}},[e._v("\n    "+e._s(e.$t("addNewComponent"))+" "+e._s(e.remainingText)+"\n  ")]),e._v(" "),0===e.remainingComponents?n("InfoBox",{staticClass:"mt-2 text-sm"},[e.disabledFeature("settings:manageProjectPages:marketPlaceInfo")?[e._v("\n      "+e._s(e.$t("NoRemainingComponentsShort"))+"\n    ")]:[e._v("\n      "+e._s(e.$t("NoRemainingComponents"))+"\n      "),n("nuxt-link",{staticClass:"underline hover:no-underline",attrs:{to:"../extras",exact:""}},[e._v("\n        MarketPlace\n      ")])]],2):e._e(),e._v(" "),n("ComponentAddForm",{attrs:{"open-screen":e.openScreen,"remaining-components":e.remainingComponents,options:e.options},on:{updateComponents:function(t){return e.$emit("updateComponents")},cancel:function(t){e.openScreen=!1}}})],1)}),[],!1,null,null,null).exports,fe=Object(c.b)({name:"ComponentListWithOutSuggestions",components:{UrlManagementBox:Y,Dimensions:Z.a,AddNewComponent:ve},setup:function(){var e=Object(c.l)(),t=e.$apiClient,n=e.i18n,r=Object(c.o)(),o=Object(c.r)(),l=Object(c.i)([]),d=Object(c.i)(0),m=Object(c.a)((function(){return o.getters["pageComponents/getPolling"]})),f=Object(c.a)((function(){return o.getters["pageComponents/getComponents"]})),h=Object(c.a)((function(){return o.getters["onboarding/onboardingStatus"]})),y=r.value.params,_=y.pid,C=y.sid,O=Object(c.m)(Object(v.a)(regeneratorRuntime.mark((function e(){var r,o,c,m,v,f,h,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([t.getRepository("component"),t.getRepository("system")]);case 3:return r=e.sent,o=Object(ae.a)(r,2),c=o[0],m=o[1],e.next=9,c.showComponentTypes(_);case 9:return v=e.sent,f=v.system_types,e.next=13,m.getComponentLimit(C);case 13:h=e.sent,y=h.limit,Object(W.j)(f,"id",1),l.value=f.map((function(e){var t=e.id,r=e.identifier,o=e.description,c="componentTypes.".concat(r,".title"),l="componentTypes.".concat(r,".description");return{id:t,identifier:r,description:n.te(l)?n.t(l):o,name:n.te(c)?n.t(c):r}})),d.value=y,e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.error(e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})))),j=O.fetch,x=O.fetchState,S=Object(c.a)((function(){return m.value?[]:f.value.map((function(e){return{id:e.id,name:e.name,value:e.url,apiValue:e.url,suggestion_id:e.type.id,suggestion_identifier:e.type.name}}))}));return{options:l,limit:d,fetch:j,fetchState:x,componentsData:S,updateComponents:function(){h.value||o.dispatch("onboarding/updateOnboarding",_),o.dispatch("projects/setOnboardingCompleted",_),o.dispatch("pageComponents/collect",C)},onboardingStatus:h}}}),ge=Object(O.a)(fe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.$fetch.pending?e._e():n("div",[n("AddNewComponent",{staticClass:"mb-6",attrs:{options:e.options,count:{current:e.componentsData.length,limit:e.limit}},on:{updateComponents:e.updateComponents}}),e._v(" "),n("Dimensions",{scopedSlots:e._u([{key:"default",fn:function(t){var r=t.width;return n("div",{class:[{small:r<500},{medium:r>=500&&r<900},{big:r>=900}]},[e.componentsData.length&&e.options.length?n("div",{staticClass:"mb-8"},[n("header",{staticClass:"mb-8"},[n("h2",{staticClass:"text-2xl font-bold"},[e._v("\n            "+e._s(e.$t("componentAddForm.list.headline"))+"\n          ")]),e._v(" "),n("p",[e._v(e._s(e.$t("componentAddForm.list.subline")))])]),e._v(" "),n("div",{staticClass:"grid-urlList"},e._l(e.componentsData,(function(t){return n("UrlManagementBox",{key:t.id,attrs:{entry:t,"with-out-suggestions":!0,"outer-options":e.options},on:{updateComponents:e.updateComponents}})})),1)]):e._e()])}}],null,!1,1027088234)})],1)}),[],!1,null,null,null).exports,he=Object(c.b)({name:"PageUrlList",components:{ComponentListWithOutSuggestions:ge,ComponentListWithSuggestions:ie,LoadingSpinner:o.a,SegmentHeader:r.a},setup:function(){var e=Object(c.r)(),t=Object(c.i)(!1),n=Object(c.a)((function(){return e.getters["pageComponents/getPolling"]})),r=Object(c.a)((function(){return e.getters["pageComponents/getSuggestions"]})),o=Object(c.a)((function(){return n.value?null:!Array.isArray(r.value)}));return{triggerUpdate:t,polling:n,hasSuggestions:o}}}),be=Object(O.a)(he,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("SegmentHeader",{attrs:{"with-onboarding":!0}}),e._v(" "),e.polling?n("LoadingSpinner"):[e.hasSuggestions?n("ComponentListWithSuggestions"):n("ComponentListWithOutSuggestions")]],2)}),[],!1,null,null,null);t.default=be.exports},720:function(e,t,n){"use strict";var r=n(724),o=n(1),c=Object(o.b)({name:"Dimensions",data:function(){return{width:null,height:null}},computed:{dimensionObserver:function(){var e=this;return new r.a((function(t){window.requestAnimationFrame((function(){e.width=t[0].contentRect.width,e.height=t[0].contentRect.height}))}))}},mounted:function(){this.dimensionObserver.observe(this.$el)},destroyed:function(){this.dimensionObserver.disconnect()},render:function(){return this.$scopedSlots.default({width:this.width,height:this.height})}}),l=n(4),component=Object(l.a)(c,undefined,undefined,!1,null,null,null);t.a=component.exports},731:function(e,t,n){"use strict";var r=n(7);r="default"in r?r.default:r;var o="2.2.2";/^2\./.test(r.version)||r.util.warn("VueClickaway 2.2.2 only supports Vue 2.x, and does not support Vue "+r.version);var c="_vue_clickaway_handler";function l(e,t,n){d(e);var r=n.context,o=t.value;if("function"==typeof o){var l=!1;setTimeout((function(){l=!0}),0),e[c]=function(t){var path=t.path||(t.composedPath?t.composedPath():void 0);if(l&&(path?path.indexOf(e)<0:!e.contains(t.target)))return o.call(r,t)},document.documentElement.addEventListener("click",e[c],!1)}}function d(e){document.documentElement.removeEventListener("click",e[c],!1),delete e[c]}var m={bind:l,update:function(e,t){t.value!==t.oldValue&&l(e,t)},unbind:d},v={directives:{onClickaway:m}};t.version=o,t.directive=m,t.mixin=v},880:function(e,t,n){"use strict";var r={name:"IconCheckmark",props:{color:{type:String,default:"currentColor"}}},o=n(4),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"}},[n("path",{attrs:{d:"M435.848 83.466L172.804 346.51l-96.652-96.652c-4.686-4.686-12.284-4.686-16.971 0l-28.284 28.284c-4.686 4.686-4.686 12.284 0 16.971l133.421 133.421c4.686 4.686 12.284 4.686 16.971 0l299.813-299.813c4.686-4.686 4.686-12.284 0-16.971l-28.284-28.284c-4.686-4.686-12.284-4.686-16.97 0z",fill:e.color}})])}),[],!1,null,null,null);t.a=component.exports},930:function(e,t,n){"use strict";var r={name:"IconPencil",props:{color:{type:String,default:"currentColor"}}},o=n(4),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"}},[n("path",{attrs:{d:"M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z",fill:e.color}})])}),[],!1,null,null,null);t.a=component.exports},961:function(e,t,n){e.exports={}},962:function(e,t,n){e.exports={}}}]);