(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{1022:function(t,e,n){"use strict";n(963)},1035:function(t,e,n){"use strict";n.r(e);var r=n(723),c=n(18),o=(n(68),n(39),n(15),n(35),n(43),n(38),n(1)),d=n(213),l=(n(22),n(150),n(41),n(151),n(152),n(153),n(154),n(155),n(156),n(157),n(158),n(159),n(160),n(161),n(162),n(163),n(164),n(165),n(166),n(31),n(30),n(291),n(926)),m=n(112),f=n(290),v=n(721),h=n(169),_={name:"OpenIncidentsTableRow"};_.props={header:{type:Array,default:function(){return[]}},incident:{type:Object,default:function(){}},width:{type:Number,default:0},breakpoint:{type:Number,default:0}},_.setup=function(t,e){var n=t,r=Object(o.i)(),c=Object(o.i)(!1),d=Object(o.i)(!0),m=Object(l.a)(n.incident),section=m.section,f=m.errorType,v=m.errorColor,h=m.duration,_=m.date;return Object(o.f)((function(){Object(o.d)((function(){setTimeout((function(){r.value&&(d.value=r.value.scrollHeight>42)}),200)}))})),{messageRef:r,moreInfo:c,messageExpandable:d,section:section,errorType:f,errorColor:v,duration:h,date:_}},_.components=Object.assign({IconExternal:v.a,IconArrow:f.a,Richtext:m.a,IconCaret:h.a},_.components);var O=_,y=(n(1022),n(4)),j=Object(y.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"incidentTable__grid text-sm",attrs:{"data-cy":"entry"}},[n("div",{staticClass:"incidentTable__grid__page"},[n("div",{staticClass:"incidentTable__listHeader uppercase text-xs font-medium mb-1",attrs:{"data-cy":"mobile-header"}},[t._v("\n      "+t._s(t.$t(t.header[0]))+":\n    ")]),t._v(" "),n("div",{staticClass:"flex h-full"},[n("div",{staticClass:"h-full w-2 rounded-full mr-3 flex-grow-0 flex-shrink-0",class:[t.errorColor],staticStyle:{height:"42px"},attrs:{"data-cy":"indicator"}}),t._v(" "),n("div",[n("a",{staticClass:"font-medium mb-1 flex items-center",attrs:{href:t.incident.component.url,target:"_blank"}},[n("div",[t._v(t._s(t.incident.component.name))]),t._v(" "),n("IconExternal",{staticClass:"ml-2 w-2 h-2"})],1),t._v(" "),n("div",{staticClass:"text-xs"},[t._v("\n          "+t._s(t.$t(t.errorType))+"\n        ")])])])]),t._v(" "),n("div",{staticClass:"incidentTable__grid__section"},[n("div",{staticClass:"incidentTable__listHeader uppercase text-xs font-medium mb-1"},[t._v("\n      "+t._s(t.$t(t.header[1]))+":\n    ")]),t._v(" "),t.section.link?[n("nuxt-link",{attrs:{to:t.section.link}},[t._v("\n        "+t._s(t.section.name)+"\n        "),n("IconArrow",{staticClass:"w-2 h-2"})],1)]:[t._v("\n      "+t._s(t.section.name)+"\n    ")]],2),t._v(" "),n("div",{staticClass:"incidentTable__grid__duration"},[n("div",{staticClass:"incidentTable__listHeader uppercase text-xs font-medium mb-1"},[t._v("\n      "+t._s(t.$t(t.header[2]))+":\n    ")]),t._v(" "),n("div",[n("div",{staticClass:"mb-1"},[t._v("\n        "+t._s(t.duration)+"\n      ")]),t._v(" "),n("div",{staticClass:"text-xs"},[t._v("\n        "+t._s(t.date)+"\n      ")])])]),t._v(" "),n("div",{staticClass:"incidentTable__grid__description text-sm"},[n("div",{staticClass:"incidentTable__listHeader uppercase text-xs font-medium mb-1"},[t._v("\n      "+t._s(t.$t(t.header[3]))+":\n    ")]),t._v(" "),n("div",{staticClass:"flex",class:[{"cursor-pointer":t.messageExpandable}],attrs:{"data-cy":"message"},on:{click:function(e){t.moreInfo=!t.moreInfo}}},[n("div",{staticClass:"flex-auto",class:[t.moreInfo?"":"incidentTable__columns--lessInfo"]},[n("div",{ref:"messageRef"},[n("Richtext",{staticClass:"incidentMessage",attrs:{content:t.incident.message}})],1)]),t._v(" "),t.width>=t.breakpoint?n("div",{staticClass:"h-full ml-2 flex-shrink-0 w-3",staticStyle:{height:"42px"},attrs:{"data-cy":"message-indicator"}},[t.messageExpandable?n("div",{staticClass:"flex-center h-full text-gray-500"},[n("IconCaret",{staticClass:"w-3 h-3",attrs:{degree:t.moreInfo?0:-90}})],1):t._e()]):t._e()])])])}),[],!1,null,null,null).exports,w=n(927),I=Object(o.b)({name:"OpenIncidentsTableHeader",mixins:[w.a],props:{incidents:{type:Object,default:function(){}},pageSortable:{type:Boolean,default:!0}},data:function(){return{sortDate:"unsort"}},methods:{clearSortIncidents:function(){this.sortIncidents="unsort",this.$emit("sortIncidentsColumn","unsort")},clearSortDate:function(){this.sortDate="unsort",this.$emit("sortDateColumn","unsort")},changeIncidentsSort:function(){1!==this.incidents.items.length&&this.pageSortable&&("asc"===this.sortIncidents?(this.sortIncidents="desc",this.clearSortDate()):"desc"===this.sortIncidents?this.sortIncidents="unsort":"unsort"===this.sortIncidents&&(this.sortIncidents="asc",this.clearSortDate()),this.$emit("sortIncidentsColumn",this.sortIncidents))},changeDateSort:function(){if(1===this.incidents.items.length)return!1;"asc"===this.sortDate?(this.sortDate="desc",this.clearSortIncidents()):"desc"===this.sortDate?this.sortDate="unsort":"unsort"===this.sortDate&&(this.sortDate="asc",this.clearSortIncidents()),this.$emit("sortDateColumn",this.sortDate)}}}),C=Object(y.a)(I,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sticky top-0 z-10",attrs:{"data-cy":"header"}},[0===t.incidents.items.length?n("div",{staticClass:"bg-gray-200 py-3 px-4 text-sm"},[t._v("\n    "+t._s(t.$tc("noIncidentsSentence","",{n:t.$t("monitoring."+t.incidents.category)}))+"\n  ")]):t._e(),t._v(" "),t.incidents.items.length&&t.width>=t.breakpoint?n("div",{staticClass:"bg-gray-200 py-3 text-sm uppercase incidentTable__grid px-4"},[n("div",{staticClass:"flex items-center",class:["incidentTable__grid__"+t.header[0],{"cursor-pointer":t.pageSortable}],on:{click:t.changeIncidentsSort}},[t._v("\n      "+t._s(t.$t(t.header[0]))+"\n      "),t.incidents.items.length>1&&"unsort"!==t.sortIncidents&&t.pageSortable?n("IconCaret",{staticClass:"w-2 h-2 ml-2 text-gray-600",attrs:{degree:"asc"===t.sortIncidents?180:0}}):t._e()],1),t._v(" "),n("div",{class:["incidentTable__grid__"+t.header[1]]},[t._v("\n      "+t._s(t.$t(t.header[1]))+"\n    ")]),t._v(" "),n("div",{staticClass:"flex items-center cursor-pointer",class:["incidentTable__grid__"+t.header[2]],attrs:{"data-cy":"sort"},on:{click:t.changeDateSort}},[t._v("\n      "+t._s(t.$t(t.header[2]))+"\n      "),t.incidents.items.length>1&&"unsort"!==t.sortDate?n("IconCaret",{staticClass:"w-2 h-2 ml-2 text-gray-600",attrs:{degree:"asc"===t.sortDate?180:0}}):t._e()],1),t._v(" "),n("div",{class:["incidentTable__grid__"+t.header[3]]},[t._v("\n      "+t._s(t.$t(t.header[3]))+"\n    ")])]):t._e()])}),[],!1,null,null,null).exports,x=Object(o.b)({name:"OpenIncidentsTable",components:{OpenIncidentsTableHeader:C,OpenIncidentsTableRow:j},props:{incidents:{type:Object,default:function(){}},width:{type:Number,default:0},target:{type:Number,default:null}},data:function(){return{breakpoint:780,header:["page","section","foundBefore","description"],sort:{incidents:"asc",date:"asc"}}},computed:{pageSortable:function(){return new Set(this.incidents.items.map((function(t){return t.severity.name}))).size>1},sortIncidents:function(){var t=this,e={asc:["high","medium","low"],desc:["low","medium","high"]};return Object(c.a)(this.incidents.items).sort((function(a,b){if("unsort"!==t.sort.incidents&&t.pageSortable)return e[t.sort.incidents].indexOf(a.severity.name)-e[t.sort.incidents].indexOf(b.severity.name);var n=new Date(a.start_date).valueOf(),r=new Date(b.start_date).valueOf();return"asc"===t.sort.date?n-r:r-n}))}},methods:{sortIncidentsColumn:function(t){this.sort.incidents=t},sortDateColumn:function(t){this.sort.date=t}}}),T=Object(y.a)(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.incidents.items.length?n("div",{class:[{"incidentTable--isSmallList":t.width<600},{"incidentTable--isBigList":t.width>=600&&t.width<=t.breakpoint},{"incidentTable--isTable":t.width>t.breakpoint}]},[n("h3",{staticClass:"cHeadline mb-4"},[t._v("\n    "+t._s(t.$t("monitoring."+t.incidents.category))+"\n  ")]),t._v(" "),n("OpenIncidentsTableHeader",{attrs:{width:t.width,breakpoint:t.breakpoint,incidents:t.incidents,header:t.header,"page-sortable":t.pageSortable},on:{sortIncidentsColumn:t.sortIncidentsColumn,sortDateColumn:t.sortDateColumn}}),t._v(" "),n("div",{staticClass:"incidentTable__tableWrapper"},t._l(t.sortIncidents,(function(e){return n("OpenIncidentsTableRow",{key:e.id,staticClass:"incidentTable__row",class:[t.target===e.id?"bg-gray-200":"bg-white"],attrs:{id:e.id,incident:e,width:t.width,breakpoint:t.breakpoint,header:t.header}})})),1)],1):t._e()}),[],!1,null,null,null).exports,S=n(720),D={name:"OpenIncidents"};D.props={incidents:{type:Array,default:function(){return[]}},target:{type:Number,default:null}},D.setup=function(t,e){var n=t,r=Object(o.a)((function(){return d.a.map((function(t){return{category:t,items:n.incidents.filter((function(e){return d.c[t].includes(e.tool.identifier)}))}}))})),l=Object(o.a)((function(){return r.value.reduce((function(t,e){return e.items.length&&(t=[].concat(Object(c.a)(t),[e.category])),t}),[])}));return{groupIncidents:r,groups:l}},D.components=Object.assign({Dimensions:S.a,OpenIncidentsTable:T},D.components);var k=D,$=Object(y.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Dimensions",{scopedSlots:t._u([{key:"default",fn:function(e){var r=e.width;return n("div",{staticClass:"incidents"},t._l(t.groups,(function(e){return n("OpenIncidentsTable",{key:e,staticClass:"mb-10",attrs:{"data-cy":"incident-groups",incidents:t.groupIncidents.find((function(t){return t.category===e})),width:r,target:t.target}})})),1)}}])})}),[],!1,null,null,null).exports,H=n(928),A={name:"PageOverviewIncidents",setup:function(t,e){var n=Object(H.a)("open");return{incidents:n.incidents,initialized:n.initialized,target:n.target}}};A.components=Object.assign({SegmentHeader:r.a,OpenIncidents:$},A.components);var E=A,z=Object(y.a)(E,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.initialized?n("SegmentHeader"):t._e(),t._v(" "),t.initialized&&!t.incidents.length?n("p",[t._v("\n    "+t._s(t.$t("noIncidentsOnProject"))+"\n  ")]):t._e(),t._v(" "),t.initialized&&t.incidents.length?n("OpenIncidents",{attrs:{incidents:t.incidents,target:t.target}}):t._e()],1)}),[],!1,null,null,null);e.default=z.exports},720:function(t,e,n){"use strict";var r=n(724),c=n(1),o=Object(c.b)({name:"Dimensions",data:function(){return{width:null,height:null}},computed:{dimensionObserver:function(){var t=this;return new r.a((function(e){window.requestAnimationFrame((function(){t.width=e[0].contentRect.width,t.height=e[0].contentRect.height}))}))}},mounted:function(){this.dimensionObserver.observe(this.$el)},destroyed:function(){this.dimensionObserver.disconnect()},render:function(){return this.$scopedSlots.default({width:this.width,height:this.height})}}),d=n(4),component=Object(d.a)(o,undefined,undefined,!1,null,null,null);e.a=component.exports},721:function(t,e,n){"use strict";var r={name:"IconExternal",props:{color:{type:String,default:"currentColor"}}},c=n(4),component=Object(c.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"}},[n("path",{attrs:{d:"M440,256H424a8,8,0,0,0-8,8V464a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V112A16,16,0,0,1,48,96H248a8,8,0,0,0,8-8V72a8,8,0,0,0-8-8H48A48,48,0,0,0,0,112V464a48,48,0,0,0,48,48H400a48,48,0,0,0,48-48V264A8,8,0,0,0,440,256ZM500,0,364,.34a12,12,0,0,0-12,12v10a12,12,0,0,0,12,12L454,34l.7.71L131.51,357.86a12,12,0,0,0,0,17l5.66,5.66a12,12,0,0,0,17,0L477.29,57.34l.71.7-.34,90a12,12,0,0,0,12,12h10a12,12,0,0,0,12-12L512,12A12,12,0,0,0,500,0Z",fill:t.color}})])}),[],!1,null,null,null);e.a=component.exports},882:function(t,e,n){"use strict";n.d(e,"c",(function(){return l})),n.d(e,"b",(function(){return m})),n.d(e,"a",(function(){return f}));n(32),n(69),n(81),n(22),n(96);var r=n(1026),c=n(1027),o=n(1076),d=n(908).utcToZonedTime,l=function(t,e){return d(new Date(t),e)},m=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"short",c={dateStyle:r,timeStyle:"short"};return l(t,n).toLocaleString(e,c)},f=function(t,e){var n=Object(r.a)(e,t);return n<121?{value:n,unit:"minutes"}:n<2880?{value:Object(c.a)(e,t),unit:"hours"}:{value:Object(o.a)(e,t),unit:"days"}}},926:function(t,e,n){"use strict";n(30),n(40),n(38);var r=n(1),c=n(213),o=n(42),d=n(882),l={high:"errorCritical",medium:"errorMedium",low:"errorLow"},m={high:"bg-error-high",medium:"bg-error-medium",low:"bg-error-note"};e.a=function(t){var e=Object(r.r)(),n=Object(r.l)().i18n,f=Object(r.a)((function(){return e.getters["access/getTimezone"]})),v=Object(r.a)((function(){return e.getters["projects/getActualSystem"]})),h=Object(r.a)((function(){return e.getters["projects/getActualProject"]})),_=Object(r.a)((function(){return n.t(l[t.severity.name])})),O=Object(r.a)((function(){return m[t.severity.name]})),section=Object(r.a)((function(){var body=c.d.find((function(e){return e.id===t.tool.identifier}))||{name:"",link:"",group:"",path:""};return{name:n.t("tools.".concat(body.name)),link:Object(o.d)(body.path,h.value,v.value),group:n.t("pages.".concat(body.group))}})),y=Object(r.a)((function(){return Object(d.c)(t.start_date,f.value)})),j=Object(r.a)((function(){var e=t.end_date?t.end_date:new Date;return Object(d.c)(e,f.value)})),w=Object(r.a)((function(){var t=Object(d.a)(y.value,j.value);return"minutes"===t.unit?"".concat(t.value," ").concat(n.t("minutes")):"hours"===t.unit?"".concat(t.value," ").concat(n.tc("hours",t.value>0?0:1)):"days"===t.unit?"".concat(t.value," ").concat(n.tc("days",t.value>0?0:1)):void 0})),I=Object(r.a)((function(){return"".concat(n.t("timeOpenAt")," ").concat(Object(d.b)(t.start_date,n.locale,f.value))})),C=Object(r.a)((function(){return!!t.end_date&&"".concat(n.t("timeCloseAt")," ").concat(Object(d.b)(t.end_date,n.locale,f.value))}));return{errorType:_,errorColor:O,section:section,incidentDate:y,incidentDateClose:j,duration:w,date:I,closeDate:C}}},927:function(t,e,n){"use strict";n(68);var r=n(169);e.a={components:{IconCaret:r.a},props:{header:{type:Array,default:function(){return[]}},width:{type:Number,default:0},breakpoint:{type:Number,default:0}},data:function(){return{sortIncidents:"asc"}}}},928:function(t,e,n){"use strict";n(68),n(35),n(43);var r=n(1);e.a=function(t){var e=Object(r.r)(),n=Object(r.o)(),c=Object(r.p)(),o=Object(r.i)([]),d=Object(r.i)(!1),l=Object(r.i)(null),m=Object(r.a)((function(){return e.getters["incidents/getPollingState"]})),f=function(t){setTimeout((function(){var e=document.getElementById(t);e&&window.scrollTo({top:e.offsetTop-50,behavior:"smooth"})}),20)};return"open"===t?Object(r.s)((function(){return[n.value,m.value]}),(function(){if(!m.value){var t=n.value.query;if(t.id){var r=e.getters["incidents/getIncidentIds"],v=Number(t.id);if(l.value=v,v&&r.closed.includes(v))return void c.push({path:"incidentsHistory",query:t})}o.value=e.getters["incidents/getProjectIncidents"],d.value=!0,f(l.value)}}),{immediate:!0}):"closed"===t&&Object(r.s)((function(){return m.value}),(function(){if(!m.value){var t=n.value.query;l.value=t.id?Number(t.id):null,o.value=e.getters["incidents/getIncidentsHistory"],d.value=!0,f(l.value)}}),{immediate:!0}),{incidents:o,initialized:d,target:l}}},963:function(t,e,n){t.exports={}}}]);