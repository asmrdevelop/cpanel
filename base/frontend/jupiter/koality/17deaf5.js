(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{1023:function(e,t,n){"use strict";n(964)},1037:function(e,t,n){"use strict";n.r(t);var r=n(723),c=n(18),o=(n(68),n(291),n(1)),l=n(720),d=n(927),v=Object(o.b)({name:"ClosedIncidentsTableHeader",mixins:[d.a],props:{incidents:{type:Array,default:function(){return[]}}},data:function(){return{sortDate:"desc"}},methods:{changeDateSort:function(){if(1===this.incidents.length)return!1;"asc"===this.sortDate?this.sortDate="desc":"desc"===this.sortDate&&(this.sortDate="asc"),this.$emit("sortDateColumn",this.sortDate)}}}),_=n(4),f=Object(_.a)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sticky top-0 z-10"},[e.incidents.length&&e.width>=e.breakpoint?n("div",{staticClass:"bg-gray-200 py-3 text-sm uppercase incidentTable__grid px-4"},[n("div",{staticClass:"flex items-center",class:["incidentTable__grid__"+e.header[0]]},[e._v("\n      "+e._s(e.$t(e.header[0]))+"\n    ")]),e._v(" "),n("div",{class:["incidentTable__grid__"+e.header[1]]},[e._v("\n      "+e._s(e.$t(e.header[1]))+"\n    ")]),e._v(" "),n("div",{staticClass:"flex items-center cursor-pointer",class:["incidentTable__grid__"+e.header[2]],attrs:{"data-cy":"sort"},on:{click:e.changeDateSort}},[e._v("\n      "+e._s(e.$t(e.header[2]))+"\n      "),e.incidents.length>1?n("IconCaret",{staticClass:"w-2 h-2 ml-2 text-gray-600",attrs:{degree:"asc"===e.sortDate?180:0}}):e._e()],1),e._v(" "),n("div",{class:["incidentTable__grid__"+e.header[3]]},[e._v("\n      "+e._s(e.$t(e.header[3]))+"\n    ")])]):e._e()])}),[],!1,null,null,null).exports,m=n(926),h=n(112),O=n(290),j=n(721),C=n(169),w={name:"ClosedIncidentsTableRow"};w.props={header:{type:Array,default:function(){return[]}},incident:{type:Object,default:function(){}},width:{type:Number,default:0},breakpoint:{type:Number,default:0}},w.setup=function(e,t){var n=e,r=Object(o.i)(),c=Object(o.i)(!1),l=Object(o.i)(!0),d=Object(m.a)(n.incident),section=d.section,v=d.errorType,_=d.errorColor,f=d.duration,h=d.closeDate;return Object(o.f)((function(){Object(o.d)((function(){setTimeout((function(){r.value&&(l.value=r.value.scrollHeight>42)}),200)}))})),{moreInfo:c,messageExpandable:l,section:section,errorType:v,errorColor:_,duration:f,closeDate:h}},w.components=Object.assign({IconExternal:j.a,IconArrow:O.a,Richtext:h.a,IconCaret:C.a},w.components);var x=w,y=(n(1023),Object(_.a)(x,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"incidentTable__grid text-sm"},[n("div",{staticClass:"incidentTable__grid__page"},[n("div",{staticClass:"incidentTable__listHeader uppercase text-xs font-medium mb-1"},[e._v("\n      "+e._s(e.$t(e.header[0]))+":\n    ")]),e._v(" "),n("div",{staticClass:"flex h-full"},[n("div",{staticClass:"h-full w-2 rounded-full mr-3 flex-grow-0 flex-shrink-0",class:[e.errorColor],staticStyle:{height:"42px"},attrs:{"data-cy":"indicator"}}),e._v(" "),n("div",[n("a",{staticClass:"font-medium mb-1 flex items-center",attrs:{href:e.incident.component.url,target:"_blank"}},[n("div",[e._v(e._s(e.incident.component.name))]),e._v(" "),n("IconExternal",{staticClass:"ml-2 w-2 h-2"})],1),e._v(" "),n("div",{staticClass:"text-xs"},[e._v("\n          "+e._s(e.$t(e.errorType))+"\n        ")])])])]),e._v(" "),n("div",{staticClass:"incidentTable__grid__section"},[n("div",{staticClass:"incidentTable__listHeader uppercase text-xs font-medium mb-1"},[e._v("\n      "+e._s(e.$t(e.header[1]))+":\n    ")]),e._v(" "),e.section.link?[n("nuxt-link",{attrs:{to:e.section.link}},[e._v("\n        "+e._s(e.section.name)+"\n        "),n("IconArrow",{staticClass:"w-2 h-2"})],1)]:[e._v("\n      "+e._s(e.section.name)+"\n    ")],e._v(" "),n("div",{staticClass:"text-xs mt-1"},[e._v("\n      "+e._s(e.section.group)+"\n    ")])],2),e._v(" "),n("div",{staticClass:"incidentTable__grid__duration"},[n("div",{staticClass:"incidentTable__listHeader uppercase text-xs font-medium mb-1"},[e._v("\n      "+e._s(e.$t(e.header[2]))+":\n    ")]),e._v(" "),n("div",[n("div",{staticClass:"mb-1"},[e._v("\n        "+e._s(e.duration)+"\n      ")]),e._v(" "),n("div",{staticClass:"text-xs"},[e._v("\n        "+e._s(e.date)+"\n      ")]),e._v(" "),e.closeDate?n("div",{staticClass:"text-xs"},[e._v("\n        "+e._s(e.closeDate)+"\n      ")]):e._e()])]),e._v(" "),n("div",{staticClass:"incidentTable__grid__description text-sm"},[n("div",{staticClass:"incidentTable__listHeader uppercase text-xs font-medium mb-1"},[e._v("\n      "+e._s(e.$t(e.header[3]))+":\n    ")]),e._v(" "),n("div",{staticClass:"flex",class:[{"cursor-pointer":e.messageExpandable}],attrs:{"data-cy":"message"},on:{click:function(t){e.moreInfo=!e.moreInfo}}},[n("div",{staticClass:"flex-auto",class:[e.moreInfo?"":"incidentTable__columns--lessInfo"]},[n("div",{ref:"message"},[n("Richtext",{staticClass:"incidentMessage",attrs:{content:e.incident.message}})],1)]),e._v(" "),e.width>=e.breakpoint?n("div",{staticClass:"h-full ml-2 flex-shrink-0 w-3",staticStyle:{height:"42px"}},[e.messageExpandable?n("div",{staticClass:"flex-center h-full text-gray-500"},[n("IconCaret",{staticClass:"w-3 h-3",attrs:{degree:e.moreInfo?0:-90}})],1):e._e()]):e._e()])])])}),[],!1,null,null,null).exports),T={name:"ClosedIncidents"};T.props={incidents:{type:Array,default:function(){return[]}},target:{type:Number,default:null}},T.setup=function(e,t){var n=e,r=Object(o.i)("desc");return{breakpoint:780,header:["page","section","closedSince","description"],sortIncidents:Object(o.a)((function(){return Object(c.a)(n.incidents).sort((function(a,b){var e=new Date(a.start_date).valueOf()-new Date(a.end_date).valueOf(),t=new Date(b.start_date).valueOf()-new Date(b.end_date).valueOf();return"asc"===r.value?e-t:t-e}))})),sortDateColumn:function(e){return r.value=e}}},T.components=Object.assign({Dimensions:l.a,ClosedIncidentsTableHeader:f,ClosedIncidentsTableRow:y},T.components);var I=T,D=Object(_.a)(I,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.sortIncidents.length?n("Dimensions",{scopedSlots:e._u([{key:"default",fn:function(t){var r=t.width;return n("div",{class:[{"incidentTable--isSmallList":r<600},{"incidentTable--isBigList":r>=600&&r<=e.breakpoint},{"incidentTable--isTable":r>e.breakpoint}]},[n("ClosedIncidentsTableHeader",{attrs:{width:r,breakpoint:e.breakpoint,incidents:e.incidents,header:e.header},on:{sortDateColumn:e.sortDateColumn}}),e._v(" "),n("div",{staticClass:"incidentTable__tableWrapper",attrs:{"data-cy":"incident-wrapper"}},e._l(e.sortIncidents,(function(t){return n("ClosedIncidentsTableRow",{key:t.id,staticClass:"incidentTable__row",class:[e.target===t.id?"bg-gray-200":"bg-white"],attrs:{id:t.id,"data-cy":"incident-entry",incident:t,width:r,breakpoint:e.breakpoint,header:e.header}})})),1)],1)}}],null,!1,98475537)}):e._e()}),[],!1,null,null,null).exports,k=n(928),H={name:"PageOverviewIncidents",setup:function(e,t){var n=Object(k.a)("closed");return{incidents:n.incidents,initialized:n.initialized,target:n.target}}};H.components=Object.assign({SegmentHeader:r.a,ClosedIncidents:D},H.components);var $=H,S=Object(_.a)($,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("SegmentHeader"),e._v(" "),e.initialized&&!e.incidents.length?n("p",[e._v("\n    "+e._s(e.$t("noHistoryIncidentsOnProject"))+"\n  ")]):e._e(),e._v(" "),e.initialized&&e.incidents.length?n("ClosedIncidents",{attrs:{incidents:e.incidents,target:e.target}}):e._e()],1)}),[],!1,null,null,null);t.default=S.exports},720:function(e,t,n){"use strict";var r=n(724),c=n(1),o=Object(c.b)({name:"Dimensions",data:function(){return{width:null,height:null}},computed:{dimensionObserver:function(){var e=this;return new r.a((function(t){window.requestAnimationFrame((function(){e.width=t[0].contentRect.width,e.height=t[0].contentRect.height}))}))}},mounted:function(){this.dimensionObserver.observe(this.$el)},destroyed:function(){this.dimensionObserver.disconnect()},render:function(){return this.$scopedSlots.default({width:this.width,height:this.height})}}),l=n(4),component=Object(l.a)(o,undefined,undefined,!1,null,null,null);t.a=component.exports},721:function(e,t,n){"use strict";var r={name:"IconExternal",props:{color:{type:String,default:"currentColor"}}},c=n(4),component=Object(c.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"}},[n("path",{attrs:{d:"M440,256H424a8,8,0,0,0-8,8V464a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V112A16,16,0,0,1,48,96H248a8,8,0,0,0,8-8V72a8,8,0,0,0-8-8H48A48,48,0,0,0,0,112V464a48,48,0,0,0,48,48H400a48,48,0,0,0,48-48V264A8,8,0,0,0,440,256ZM500,0,364,.34a12,12,0,0,0-12,12v10a12,12,0,0,0,12,12L454,34l.7.71L131.51,357.86a12,12,0,0,0,0,17l5.66,5.66a12,12,0,0,0,17,0L477.29,57.34l.71.7-.34,90a12,12,0,0,0,12,12h10a12,12,0,0,0,12-12L512,12A12,12,0,0,0,500,0Z",fill:e.color}})])}),[],!1,null,null,null);t.a=component.exports},882:function(e,t,n){"use strict";n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return v})),n.d(t,"a",(function(){return _}));n(32),n(69),n(81),n(22),n(96);var r=n(1026),c=n(1027),o=n(1076),l=n(908).utcToZonedTime,d=function(e,t){return l(new Date(e),t)},v=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"short",c={dateStyle:r,timeStyle:"short"};return d(e,n).toLocaleString(t,c)},_=function(e,t){var n=Object(r.a)(t,e);return n<121?{value:n,unit:"minutes"}:n<2880?{value:Object(c.a)(t,e),unit:"hours"}:{value:Object(o.a)(t,e),unit:"days"}}},926:function(e,t,n){"use strict";n(30),n(40),n(38);var r=n(1),c=n(213),o=n(42),l=n(882),d={high:"errorCritical",medium:"errorMedium",low:"errorLow"},v={high:"bg-error-high",medium:"bg-error-medium",low:"bg-error-note"};t.a=function(e){var t=Object(r.r)(),n=Object(r.l)().i18n,_=Object(r.a)((function(){return t.getters["access/getTimezone"]})),f=Object(r.a)((function(){return t.getters["projects/getActualSystem"]})),m=Object(r.a)((function(){return t.getters["projects/getActualProject"]})),h=Object(r.a)((function(){return n.t(d[e.severity.name])})),O=Object(r.a)((function(){return v[e.severity.name]})),section=Object(r.a)((function(){var body=c.d.find((function(t){return t.id===e.tool.identifier}))||{name:"",link:"",group:"",path:""};return{name:n.t("tools.".concat(body.name)),link:Object(o.d)(body.path,m.value,f.value),group:n.t("pages.".concat(body.group))}})),j=Object(r.a)((function(){return Object(l.c)(e.start_date,_.value)})),C=Object(r.a)((function(){var t=e.end_date?e.end_date:new Date;return Object(l.c)(t,_.value)})),w=Object(r.a)((function(){var e=Object(l.a)(j.value,C.value);return"minutes"===e.unit?"".concat(e.value," ").concat(n.t("minutes")):"hours"===e.unit?"".concat(e.value," ").concat(n.tc("hours",e.value>0?0:1)):"days"===e.unit?"".concat(e.value," ").concat(n.tc("days",e.value>0?0:1)):void 0})),x=Object(r.a)((function(){return"".concat(n.t("timeOpenAt")," ").concat(Object(l.b)(e.start_date,n.locale,_.value))})),y=Object(r.a)((function(){return!!e.end_date&&"".concat(n.t("timeCloseAt")," ").concat(Object(l.b)(e.end_date,n.locale,_.value))}));return{errorType:h,errorColor:O,section:section,incidentDate:j,incidentDateClose:C,duration:w,date:x,closeDate:y}}},927:function(e,t,n){"use strict";n(68);var r=n(169);t.a={components:{IconCaret:r.a},props:{header:{type:Array,default:function(){return[]}},width:{type:Number,default:0},breakpoint:{type:Number,default:0}},data:function(){return{sortIncidents:"asc"}}}},928:function(e,t,n){"use strict";n(68),n(35),n(43);var r=n(1);t.a=function(e){var t=Object(r.r)(),n=Object(r.o)(),c=Object(r.p)(),o=Object(r.i)([]),l=Object(r.i)(!1),d=Object(r.i)(null),v=Object(r.a)((function(){return t.getters["incidents/getPollingState"]})),_=function(e){setTimeout((function(){var t=document.getElementById(e);t&&window.scrollTo({top:t.offsetTop-50,behavior:"smooth"})}),20)};return"open"===e?Object(r.s)((function(){return[n.value,v.value]}),(function(){if(!v.value){var e=n.value.query;if(e.id){var r=t.getters["incidents/getIncidentIds"],f=Number(e.id);if(d.value=f,f&&r.closed.includes(f))return void c.push({path:"incidentsHistory",query:e})}o.value=t.getters["incidents/getProjectIncidents"],l.value=!0,_(d.value)}}),{immediate:!0}):"closed"===e&&Object(r.s)((function(){return v.value}),(function(){if(!v.value){var e=n.value.query;d.value=e.id?Number(e.id):null,o.value=t.getters["incidents/getIncidentsHistory"],l.value=!0,_(d.value)}}),{immediate:!0}),{incidents:o,initialized:l,target:d}}},964:function(e,t,n){e.exports={}}}]);