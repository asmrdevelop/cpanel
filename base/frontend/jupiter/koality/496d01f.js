(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{1016:function(e,t,n){"use strict";n(957)},1017:function(e,t,n){"use strict";n(958)},1018:function(e,t,n){"use strict";n(959)},1019:function(e,t,n){"use strict";n(960)},1032:function(e,t,n){"use strict";n.r(t);var r=n(14),l=n(9),o=(n(25),n(22),n(41),n(31),n(39),n(17),n(1)),c=n(723),m=(n(16),n(27),n(28),n(11)),d=(n(15),n(19),n(170),n(30),n(720)),f=(n(68),n(930)),h=(n(35),n(43),n(59),n(36)),v=n(289),_=n(292),y={data:function(){return{languages:["de","en","es","fr","it","ja","pt","ru"],priorities:[{label:this.$t("none"),value:"none"},{label:this.$t("immediately"),value:"immediately"},{label:this.$t("hourly"),value:"1h"},{label:this.$t("daily"),value:"24h"}]}}},x=Object(o.b)({name:"AlertSettingsEmailSetting",components:{FormLabel:_.a,InputField:v.a},mixins:[y],props:{form:{type:Object,default:function(){}},features:{type:Array,default:function(){return[]}}},data:function(){return{error:null}},computed:{mailField:function(){return this.form.email}},watch:{mailField:function(){this.checkMail()}},methods:{checkMail:function(){if(!this.form.email)return this.error=this.$t("emailAddressMissing"),this.$emit("formError",!0),!1;if(!/\S+@\S+\.\S+/.test(this.form.email))return this.error=this.$t("emailAddressWrong"),this.$emit("formError",!0),!1;this.error=null,this.$emit("formError",!1)}}}),w=(n(1016),n(4)),S=Object(w.a)(x,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("InputField",{staticClass:"mb-4",attrs:{name:"email",required:!0,debouncer:!0,placeholder:e.$t("emailAddressPlaceholder")},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}},[e._v("\n    "+e._s(e.$t("emailAddress"))+"\n  ")]),e._v(" "),n("div",{staticClass:"grid-notificationSetting"},[n("div",[n("FormLabel",{staticClass:"justify-between",attrs:{target:"serverity-high"}},[e._v("\n        "+e._s(e.$t("Notification"))+" "+e._s(e.$t("responseTimeCriticalError"))+"\n        "),n("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.$t("alerting.tooltips.critical"),popperOptions:{modifiers:{computeStyle:{gpuAcceleration:!1}}}},expression:"{content: $t('alerting.tooltips.critical'), popperOptions: { modifiers: { computeStyle: {gpuAcceleration: false}}} }"}],staticClass:"w-4 h-4 rounded-full text-white flex-center mx-2 text-xs leading-none bg-gray-400 font-medium flex-shrink-0 flex-grow-0 cursor-pointer",staticStyle:{"margin-top":"-2px"}},[e._v("\n          ?\n        ")])]),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.form.highSeverity,expression:"form.highSeverity"}],staticClass:"border border-gray-300 border-solid p-2 focus:outline-none w-full",attrs:{id:"serverity-high",name:"serverity-high"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.form,"highSeverity",t.target.multiple?n:n[0])}}},e._l(e.priorities,(function(t){return n("option",{key:t.value,domProps:{value:t.value}},[e._v("\n          "+e._s(t.label)+"\n        ")])})),0)],1),e._v(" "),n("div",[n("FormLabel",{staticClass:"justify-between",attrs:{target:"serverity-low"}},[e._v("\n        "+e._s(e.$t("Notification"))+" "+e._s(e.$t("responseTimeNonCriticalError"))+"\n        "),n("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.$t("alerting.tooltips.nonCritical"),popperOptions:{modifiers:{computeStyle:{gpuAcceleration:!1}}}},expression:"{content: $t('alerting.tooltips.nonCritical'), popperOptions: { modifiers: { computeStyle: {gpuAcceleration: false}}} }"}],staticClass:"w-4 h-4 rounded-full text-white flex-center mx-2 text-xs leading-none bg-gray-400 font-medium flex-shrink-0 flex-grow-0 cursor-pointer",staticStyle:{"margin-top":"-2px"}},[e._v("\n          ?\n        ")])]),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.form.lowSeverity,expression:"form.lowSeverity"}],staticClass:"border border-gray-300 border-solid p-2 focus:outline-none w-full",attrs:{id:"serverity-low",name:"serverity-low"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.form,"lowSeverity",t.target.multiple?n:n[0])}}},e._l(e.priorities,(function(t){return n("option",{key:t.value,domProps:{value:t.value}},[e._v("\n          "+e._s(t.label)+"\n        ")])})),0)],1)]),e._v(" "),e.features.includes("feature.language_multi")?n("div",{staticClass:"mt-5"},[n("FormLabel",{staticClass:"justify-between",attrs:{target:"language"}},[e._v("\n      "+e._s(e.$t("alerting.languagePicker"))),n("br")]),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.form.language,expression:"form.language"}],staticClass:"border border-gray-300 border-solid p-2 focus:outline-none w-full",attrs:{id:"language",name:"language"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.form,"language",t.target.multiple?n:n[0])}}},e._l(e.languages,(function(t){return n("option",{key:t,domProps:{value:t}},[e._v("\n        "+e._s(e.$t("language."+t))+"\n      ")])})),0)],1):e._e(),e._v(" "),e.error?n("div",{staticClass:"text-red-500 px-2 text-sm mt-6"},[e._v("\n    "+e._s(e.error)+"\n  ")]):e._e()],1)}),[],!1,null,null,null).exports,C=n(124),O=n(112),$=Object(o.b)({name:"AlertSettingsNotificationSetting",components:{Richtext:O.a,FormLabel:_.a,InputField:v.a},mixins:[y],props:{form:{type:Object,default:function(){}},features:{type:Array,default:function(){return[]}},setupType:{type:String,default:""}},data:function(){return{error:null}},computed:{urlField:function(){return this.form.url}},watch:{urlField:function(){this.checkUrl()}},methods:{checkUrl:function(){return this.form.url?Object(C.a)(this.form.url)?(this.error=null,void this.$emit("formError",!1)):(this.error=this.$t("webHookUrlWrong"),this.$emit("formError",!0),!1):(this.error=this.$t("webHookUrlMissing"),this.$emit("formError",!0),!1)}}}),k=(n(1017),Object(w.a)($,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("InputField",{staticClass:"mb-4 ",attrs:{name:"name",placeholder:e.setupType.charAt(0).toUpperCase()+e.setupType.slice(1)+" Notification"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}},[e._v("\n    "+e._s(e.$t("notificationName"))+"\n  ")]),e._v(" "),n("InputField",{staticClass:"mb-4 mt-8",attrs:{name:"email",required:!0,debouncer:!0,placeholder:e.$t("webHookUrlPlaceholder")},model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}},[e._v("\n    "+e._s(e.$t("webHookUrl"))+"\n  ")]),e._v(" "),n("Richtext",{staticClass:"font-light text-sm -mt-2 mb-3 px-1",attrs:{content:e.$t("plugin.alerting."+e.setupType+".webhookHelp")}}),e._v(" "),n("div",{staticClass:"grid-notificationSetting"},[n("div",[n("div",{staticClass:"text-sm text-gray-600  mt-8"},[e._v("\n        "+e._s(e.$t("Notification"))+"\n      ")]),e._v(" "),n("div",{staticClass:"flex space-x-2 items-center mt-1"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.highSeverity,expression:"form.highSeverity"}],attrs:{id:"serverity-high",type:"checkbox",name:"serverity-high",value:""},domProps:{checked:Array.isArray(e.form.highSeverity)?e._i(e.form.highSeverity,"")>-1:e.form.highSeverity},on:{change:function(t){var n=e.form.highSeverity,r=t.target,l=!!r.checked;if(Array.isArray(n)){var o=e._i(n,"");r.checked?o<0&&e.$set(e.form,"highSeverity",n.concat([""])):o>-1&&e.$set(e.form,"highSeverity",n.slice(0,o).concat(n.slice(o+1)))}else e.$set(e.form,"highSeverity",l)}}}),e._v(" "),n("label",{staticClass:"relative flex items-center text-sm text-gray-600 leading-loose cursor-pointer",attrs:{for:"serverity-high"}},[e._v("\n          "+e._s(e.$t("responseTimeCriticalError"))+"\n          "),n("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.$t("alerting.tooltips.critical"),popperOptions:{modifiers:{computeStyle:{gpuAcceleration:!1}}}},expression:"{content: $t('alerting.tooltips.critical'), popperOptions: { modifiers: { computeStyle: {gpuAcceleration: false}}} }"}],staticClass:"w-4 h-4 rounded-full text-white flex-center mx-2 text-xs leading-none bg-gray-400 font-medium flex-shrink-0 flex-grow-0 cursor-pointer relative",staticStyle:{"margin-top":"-2px"}},[e._v("\n            ?\n          ")])])]),e._v(" "),n("div",{staticClass:"flex space-x-2 items-center"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.lowSeverity,expression:"form.lowSeverity"}],attrs:{id:"serverity-low",type:"checkbox",value:"",name:"serverity-low"},domProps:{checked:Array.isArray(e.form.lowSeverity)?e._i(e.form.lowSeverity,"")>-1:e.form.lowSeverity},on:{change:function(t){var n=e.form.lowSeverity,r=t.target,l=!!r.checked;if(Array.isArray(n)){var o=e._i(n,"");r.checked?o<0&&e.$set(e.form,"lowSeverity",n.concat([""])):o>-1&&e.$set(e.form,"lowSeverity",n.slice(0,o).concat(n.slice(o+1)))}else e.$set(e.form,"lowSeverity",l)}}}),e._v(" "),n("label",{staticClass:"relative flex items-center text-sm text-gray-600 leading-loose cursor-pointer",attrs:{for:"serverity-low"}},[e._v("\n          "+e._s(e.$t("responseTimeNonCriticalError"))+"\n          "),n("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.$t("alerting.tooltips.nonCritical"),popperOptions:{modifiers:{computeStyle:{gpuAcceleration:!1}}}},expression:"{content: $t('alerting.tooltips.nonCritical'), popperOptions: { modifiers: { computeStyle: {gpuAcceleration: false}}} }"}],staticClass:"w-4 h-4 rounded-full text-white flex-center mx-2 text-xs leading-none bg-gray-400 font-medium flex-shrink-0 flex-grow-0 cursor-pointer",staticStyle:{"margin-top":"-2px"}},[e._v("\n            ?\n          ")])])])])]),e._v(" "),e.features.includes("feature.language_multi")?n("div",{staticClass:"mt-5  mt-8"},[n("FormLabel",{staticClass:"justify-between",attrs:{target:"language"}},[e._v("\n      "+e._s(e.$t("alerting.languagePicker"))),n("br"),e._v(" "),n("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.$t("alerting.tooltips.language"),popperOptions:{modifiers:{computeStyle:{gpuAcceleration:!1}}}},expression:"{content: $t('alerting.tooltips.language'), popperOptions: { modifiers: { computeStyle: {gpuAcceleration: false}}} }"}],staticClass:"w-4 h-4 rounded-full text-white flex-center mx-2 text-xs leading-none bg-gray-400 font-medium flex-shrink-0 flex-grow-0 cursor-pointer",staticStyle:{"margin-top":"-2px"}},[e._v("\n        ?\n      ")])]),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.form.language,expression:"form.language"}],staticClass:"border border-gray-300 border-solid p-2 focus:outline-none w-full rounded",attrs:{id:"language",name:"language"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.form,"language",t.target.multiple?n:n[0])}}},e._l(e.languages,(function(t){return n("option",{key:t,domProps:{value:t}},[e._v("\n        "+e._s(e.$t("language."+t))+"\n      ")])})),0)],1):e._e(),e._v(" "),e.error?n("div",{staticClass:"text-red-500 px-2 text-sm mt-6"},[e._v("\n    "+e._s(e.error)+"\n  ")]):e._e()],1)}),[],!1,null,null,null).exports),j=n(287);function A(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function T(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?A(Object(source),!0).forEach((function(t){Object(m.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):A(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var E=Object(o.b)({name:"AlertSettingWrapper",components:{FormFooter:j.a,Richtext:O.a,AlertSettingsNotificationSetting:k,AlertSettingsEmailSetting:S},props:{setupType:{type:String,default:""},editMode:{type:Boolean,default:!1},updateData:{type:Object,default:function(){}},channel:{type:Object,default:function(){}}},data:function(){return{isNotStoreAble:!this.editMode,checkDelete:!1,form:{email:null,language:this.$i18n.locale,highSeverity:!["slack","teams"].includes(this.setupType)&&"none",lowSeverity:!["slack","teams"].includes(this.setupType)&&"none",url:null,name:null}}},computed:T(T({},Object(h.c)({features:"navigation/getCombinedFeatures"})),{},{headline:function(){return{email:"emailSettings",slack:"plugin.alerting.slack.headline",teams:"plugin.alerting.teams.headline",default:""}[this.setupType||"default"]},subline:function(){return{email:"emailSettingsSubline",slack:"plugin.alerting.slack.subline",teams:"plugin.alerting.teams.subline",default:""}[this.setupType||"default"]}}),watch:{editMode:{handler:function(){this.editMode&&this.preFillForm()},immediate:!0}},methods:{preFillForm:function(){if("email"===this.setupType){var e=this.updateData,t=e.email,n=e.highSeverity,r=e.lowSeverity,l=e.language;this.form.email=t,this.form.highSeverity=n,this.form.lowSeverity=r,this.form.language=l}if(["slack","teams"].includes(this.setupType)){var o=this.updateData,c=o.highSeverity,m=o.lowSeverity,d=o.language,f=o.url,h=o.name;this.form.url=f,this.form.highSeverity=c,this.form.lowSeverity=m,this.form.language=d,this.form.name=h||""}},formError:function(e){this.isNotStoreAble=e},cancel:function(){this.$store.dispatch("ui/closeMetaSidebar"),this.$emit("close")},getLanguage:function(){return this.features.includes("feature.language_multi")?this.form.language:this.$i18n.locale},store:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var n,r,o,form,c,m,d,f,h,v,_,y;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.$route.params.pid,t.next=3,e.$apiClient.getRepository("alertingchannel");case 3:return r=t.sent,t.next=6,e.$apiClient.getRepository("alertingpolicy");case 6:if(o=t.sent,form=e.form,c="email"===e.setupType?{emailaddresses:form.email}:{webhookUrl:form.url},m="email"===e.setupType?form.email:form.name||"".concat(e.setupType.charAt(0).toUpperCase()+e.setupType.slice(1)," Notification"),d="email"===e.setupType?"none"!==form.highSeverity:form.highSeverity,f="email"===e.setupType?"none"!==form.lowSeverity:form.lowSeverity,t.prev=12,e.editMode){t.next=27;break}return t.next=16,r.create(n,{name:m,type:e.setupType,language:e.getLanguage(),options:c});case 16:if(h=t.sent,!d){t.next=20;break}return t.next=20,o.create(n,{name:m,channels:[h.channel.id],severities:["high"],interval:"email"===e.setupType?form.highSeverity:form.highSeverity?"immediately":"none"});case 20:if(!f){t.next=23;break}return t.next=23,o.create(n,{name:m,channels:[h.channel.id],severities:["low","medium"],interval:"email"===e.setupType?form.lowSeverity:form.lowSeverity?"immediately":"none"});case 23:e.$store.dispatch("onboarding/activatePolicies"),e.$store.dispatch("projects/updateProject"),t.next=36;break;case 27:return t.next=29,r.update(n,e.channel.id,{name:m,language:e.getLanguage(),type:e.setupType,options:c});case 29:return v=function(t,r,c,d){var f=function(){var e=Object(l.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.update(n,c,{name:m,severities:[d],interval:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var r=Object(l.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,o.create(n,{name:m,channels:[e.channel.id],severities:[d],interval:t});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),v=function(){var e=Object(l.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.delete(n,c);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if("none"!==t){if(r&&t!==r)return f();if(t!==r)return h()}else if(r)return v()},_="email"===e.setupType?form.lowSeverity:form.lowSeverity?"immediately":"none",y="email"===e.setupType?form.highSeverity:form.highSeverity?"immediately":"none",t.next=34,v(_,e.channel.severities.low,e.channel.severitiesId.low,"low");case 34:return t.next=36,v(y,e.channel.severities.high,e.channel.severitiesId.high,"high");case 36:e.cancel(),e.$emit("update"),t.next=44;break;case 40:t.prev=40,t.t0=t.catch(12),console.error(t.t0),e.$sentry.captureException(t.t0);case 44:case"end":return t.stop()}}),t,null,[[12,40]])})))()},removeEntry:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.$route.params.pid,t.prev=1,t.next=4,e.$apiClient.getRepository("alertingchannel");case 4:return r=t.sent,t.next=7,r.delete(n,e.channel.id);case 7:e.$emit("update"),e.cancel(),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(1),e.$sentry.captureException(t.t0),e.error=t.t0;case 15:case"end":return t.stop()}}),t,null,[[1,11]])})))()}}}),P=E,N=Object(w.a)(P,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.setupType?n("div",{staticClass:"flex mobileFullHeight flex-col"},[n("div",{staticClass:"p-4 mb-6"},[n("h2",{staticClass:"font-medium text-2xl mb-2 capitalize"},[e._v("\n      "+e._s(e.$t(e.headline))+"\n    ")]),e._v(" "),n("Richtext",{staticClass:"font-light",attrs:{content:e.$t(e.subline)}})],1),e._v(" "),n("div",{staticClass:"flex-auto overflow-y-scroll"},[n("div",{staticClass:"px-4"},["email"===e.setupType?n("AlertSettingsEmailSetting",{attrs:{form:e.form,features:e.features},on:{formError:e.formError}}):e._e(),e._v(" "),["slack","teams"].includes(e.setupType)?n("AlertSettingsNotificationSetting",{attrs:{form:e.form,features:e.features,"setup-type":e.setupType},on:{formError:e.formError}}):e._e()],1)]),e._v(" "),n("FormFooter",{attrs:{config:e.editMode?"update":"store","is-store-able":!e.isNotStoreAble},on:{cancel:e.cancel,disable:e.removeEntry,store:e.store}})],1):e._e()}),[],!1,null,null,null).exports,F={name:"AlertSettings"};F.props={setupType:{type:String,default:""},editMode:{type:Boolean,default:!1},updateData:{type:Object,default:function(){}},channel:{type:Object,default:function(){}}},F.setup=function(e,t){var n=Object(o.r)();return{metaSidebarOpen:Object(o.a)((function(){return n.getters["ui/getMetaSidebarState"]}))}},F.components=Object.assign({AlertSettingWrapper:N},F.components);var M=F,z=Object(w.a)(M,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"secondScreen fixed top-0 right-0 bg-white shadow-lg transition-all duration-300 ease-in-out z-[1029] rounded-lg overflow-hidden z-60 outerFullHeight",class:[{"secondScreen--open":e.metaSidebarOpen}]},[n("div",{staticClass:"mobileFullHeight"},[e.metaSidebarOpen?n("AlertSettingWrapper",{key:e.setupType,attrs:{"update-data":e.updateData,channel:e.channel,"edit-mode":e.editMode,"setup-type":e.setupType},on:{update:function(t){return e.$emit("update")},close:function(t){return e.$emit("close")}}}):e._e()],1)])}),[],!1,null,null,null).exports,H=n(7).default.extend({name:"IconAlerting",props:{icon:{type:String,default:""},color:{type:String,default:"currentColor"}}}),R=Object(w.a)(H,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 123 123"}},[n("g",{attrs:{stroke:"none","stroke-width":"1",fill:e.color,"fill-rule":"nonzero"}},["teams"===e.icon?n("path",{attrs:{id:"teams",d:"M105.72 41.14c-1.89 0-3.65-.35-5.29-1.05a13.68 13.68 0 01-7.13-7.13c-.7-1.64-1.05-3.4-1.05-5.29a13.22 13.22 0 013.94-9.47 13.68 13.68 0 014.24-2.89c1.64-.73 3.4-1.08 5.29-1.04 1.84-.04 3.59.3 5.23 1.04a13.48 13.48 0 017.2 17.65 13.67 13.67 0 01-7.2 7.13c-1.64.7-3.39 1.05-5.23 1.05m0-19.19c-1.6 0-3.02.56-4.25 1.66a5.75 5.75 0 00-1.53 4.06c0 1.6.51 2.98 1.53 4.12a6.44 6.44 0 004.25 1.54c1.6 0 2.95-.51 4.06-1.54a5.25 5.25 0 001.72-4.12c0-1.6-.57-2.95-1.72-4.06a5.52 5.52 0 00-4.06-1.66M123 50.73v28.72c0 2.58-.5 5.04-1.48 7.38a21.25 21.25 0 01-4.12 6.08 19.08 19.08 0 01-6.15 4.12 18.9 18.9 0 01-7.44 1.54c-1.56 0-3.11-.23-4.67-.68-1.6-.28-3.06-.8-4.37-1.53a30.54 30.54 0 01-11.13 15.68 29.4 29.4 0 01-8.55 4.3 30.49 30.49 0 01-20.85-.37 31.16 31.16 0 01-9.22-5.78 30.73 30.73 0 01-10.2-19.06H5.09a5.1 5.1 0 01-3.62-1.54A4.86 4.86 0 010 86.03V34.74a5.06 5.06 0 015.1-5.1h44.1a17.85 17.85 0 01-.37-14.76c.9-2.05 2.17-3.93 3.81-5.65a18.67 18.67 0 015.78-3.82A16.3 16.3 0 0165.33 4c2.5 0 4.83.47 7 1.41 2.18.95 4.08 2.22 5.72 3.82a19.65 19.65 0 013.82 5.65 17.85 17.85 0 011.41 7.07c0 2.46-.47 4.8-1.41 7.01a16.8 16.8 0 01-3.82 5.66 18.32 18.32 0 01-5.72 3.88 17.42 17.42 0 01-10.82.98V45h55.72c1.6 0 2.97.56 4.12 1.66a5.52 5.52 0 011.66 4.06M65.37 11.81c-1.43 0-2.72.22-3.87.68a9.96 9.96 0 00-3.44 2.2 10.23 10.23 0 00-2.95 7.26c0 1.44.26 2.77.8 4a11 11 0 002.15 3.26c.94.9 2.09 1.64 3.44 2.21a9.1 9.1 0 003.87.8c1.4 0 2.71-.26 3.94-.8a10.43 10.43 0 005.47-5.47 9.6 9.6 0 000-8 10.43 10.43 0 00-5.47-5.46 11.35 11.35 0 00-3.94-.68m-29.82 38H47.1v-9.6H14.39v9.6h11.56v30.74h9.6m52.89 6.7V52.7H61.5v33.33c0 1.39-.5 2.58-1.48 3.56a5.1 5.1 0 01-3.62 1.54H42.56a24.2 24.2 0 007.93 13.77 23.24 23.24 0 006.77 4c2.5.86 5.2 1.3 8.11 1.3 3.16 0 6.13-.56 8.92-1.67a23 23 0 0012.3-12.3 21.99 21.99 0 001.85-8.97m26.87-7.81V52.7H96.12v35.1c1.03 1.03 2.2 1.81 3.51 2.35 1.23.49 2.62.73 4.18.73a11 11 0 004.5-.92c1.39-.61 2.6-1.43 3.62-2.46a10.41 10.41 0 002.46-3.69c.61-1.4.92-2.85.92-4.36z"}}):e._e(),e._v(" "),"slack"===e.icon?n("path",{attrs:{id:"slack",d:"M25.8 77.6c0 7.1-5.8 12.9-12.9 12.9C5.8 90.5 0 84.7 0 77.6c0-7.1 5.8-12.9 12.9-12.9h12.9v12.9zm6.5 0c0-7.1 5.8-12.9 12.9-12.9 7.1 0 12.9 5.8 12.9 12.9v32.3c0 7.1-5.8 12.9-12.9 12.9-7.1 0-12.9-5.8-12.9-12.9V77.6zm12.9-51.8c-7.1 0-12.9-5.8-12.9-12.9C32.3 5.8 38.1 0 45.2 0c7.1 0 12.9 5.8 12.9 12.9v12.9H45.2zm0 6.5c7.1 0 12.9 5.8 12.9 12.9 0 7.1-5.8 12.9-12.9 12.9H12.9C5.8 58.1 0 52.3 0 45.2c0-7.1 5.8-12.9 12.9-12.9h32.3zM97 45.2c0-7.1 5.8-12.9 12.9-12.9 7.1 0 12.9 5.8 12.9 12.9 0 7.1-5.8 12.9-12.9 12.9H97V45.2zm-6.5 0c0 7.1-5.8 12.9-12.9 12.9-7.1 0-12.9-5.8-12.9-12.9V12.9C64.7 5.8 70.5 0 77.6 0c7.1 0 12.9 5.8 12.9 12.9v32.3zM77.6 97c7.1 0 12.9 5.8 12.9 12.9 0 7.1-5.8 12.9-12.9 12.9-7.1 0-12.9-5.8-12.9-12.9V97h12.9zm0-6.5c-7.1 0-12.9-5.8-12.9-12.9 0-7.1 5.8-12.9 12.9-12.9h32.3c7.1 0 12.9 5.8 12.9 12.9 0 7.1-5.8 12.9-12.9 12.9H77.6z"}}):e._e(),e._v(" "),"email"===e.icon?n("path",{attrs:{id:"email",d:"M106.23 11H16.77A16.8 16.8 0 000 27.83v67.34A16.8 16.8 0 0016.77 112h89.46A16.8 16.8 0 00123 95.17V27.83A16.8 16.8 0 00106.23 11zm0 11.22c.64 0 1.26.11 1.84.32L61.5 59.93l-46.57-37.4c.58-.2 1.2-.3 1.84-.3h89.46zm0 78.56H16.77a5.6 5.6 0 01-5.59-5.61V33.9l46.83 37.6a5.56 5.56 0 006.98 0l46.83-37.6v61.27a5.6 5.6 0 01-5.6 5.6z"}}):e._e()])])}),[],!1,null,null,null).exports,D=n(880),I=Object(o.b)({name:"ChannelsListEntries",components:{IconCheckmark:D.a,IconAlerting:R,AlertSetting:z,IconPencil:f.a},props:{breakpoint:{type:Number,default:0},channel:{type:Object,default:function(){}},width:{type:Number,default:0}},setup:function(e,t){var n=t.emit,r=Object(o.r)(),l=Object(o.l)().i18n,form=Object(o.h)({email:null,language:l.locale,highSeverity:"none",lowSeverity:"none",url:null}),c=Object(o.i)(null),m=Object(o.i)(!1),d=function(){m.value=!1,c.value=null,form.email=null,form.language=l.locale,form.highSeverity="none",form.lowSeverity="none",form.name=null};return{form:form,initEdit:m,clearData:d,update:function(){n("updateChannel"),d()},updateSettings:function(){var t=e.channel,n=t.sender,l=t.language,o=t.name,c=t.options,d=c.webhookUrl,f=c.emailaddresses,h=t.severities,v=h.high,_=h.low;"email"===n?(form.email=f,form.highSeverity=v||"none",form.lowSeverity=_||"none",form.language=l||"de"):(form.name=o,form.highSeverity="immediately"===v||"",form.lowSeverity="immediately"===_||"",form.language=l||"de",form.url=d),r.dispatch("ui/openMetaSidebar"),m.value=!0}}}}),L=(n(1018),Object(w.a)(I,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"channelsTable__row text-gray-70 zebra"},[n("div",{class:[e.width>=e.breakpoint?"channelsTable__grid":"channelsTable__list"]},[n("div",{staticClass:"channelsTable__grid__b0 channelsTable__list__entry",class:[{"flex-center":e.width>=e.breakpoint}]},[n("IconAlerting",{staticClass:"w-4 text-gray-500",attrs:{icon:e.channel.sender}})],1),e._v(" "),n("div",{staticClass:"channelsTable__grid__b1 channelsTable__list__entry truncate self-center"},[n("span",{staticClass:"channelsTable__mobileHeader font-bold"},[e._v("Email:")]),e._v("\n      "+e._s("email"===e.channel.sender?e.channel.options.emailaddresses:e.channel.name)+"\n    ")]),e._v(" "),n("div",{staticClass:"channelsTable__grid__b2 channelsTable__list__entry self-center"},[n("span",{staticClass:"channelsTable__mobileHeader font-bold"},[e._v(e._s(e.$t("alerting.language"))+": ")]),e._v("\n      "+e._s(e.$t("language."+e.channel.language)||"-")+"\n    ")]),e._v(" "),n("div",{staticClass:"channelsTable__grid__b3 channelsTable__list__entry self-center flex"},[n("span",{staticClass:"channelsTable__mobileHeader font-bold inline-block mr-1 capitalize"},[e._v(e._s(e.$t("criticalErrors"))+": ")]),e._v(" "),"email"===e.channel.sender?[e._v("\n        "+e._s(e.$t(e.channel.severities.high)||"-")+"\n      ")]:"immediately"===e.channel.severities.high?[n("IconCheckmark",{staticClass:"w-4 text-green-400"})]:e._e()],2),e._v(" "),n("div",{staticClass:"channelsTable__grid__b4 channelsTable__list__entry self-center flex"},[n("span",{staticClass:"channelsTable__mobileHeader font-bold inline-block mr-1 capitalize"},[e._v(e._s(e.$t("nonCriticalErrors"))+": ")]),e._v(" "),"email"===e.channel.sender?[e._v("\n        "+e._s(e.$t(e.channel.severities.medium)||e.$t(e.channel.severities.low)||"-")+"\n      ")]:"immediately"===e.channel.severities.low?[n("IconCheckmark",{staticClass:"w-4 text-green-400"})]:e._e()],2),e._v(" "),n("div",{staticClass:"channelsTable__grid__b4 channelsTable__list__entry flex items-center self-center ",class:[e.width>=e.breakpoint?" justify-end":""]},[n("span",{staticClass:"channelsTable__mobileHeader font-bold"},[e._v(e._s(e.$t("edit"))+":")]),e._v(" "),n("div",{staticClass:"p-2 cursor-pointer text-gray-500 hover:text-primary-regular transition duration-300",on:{click:e.updateSettings}},[n("IconPencil",{staticClass:"h-4 w-4"})],1)])]),e._v(" "),n("portal",{attrs:{to:"customSidebar"}},[e.initEdit?n("AlertSetting",{attrs:{"setup-type":e.channel.sender,"edit-mode":!0,"update-data":e.form,channel:e.channel},on:{update:e.update,close:e.clearData}}):e._e()],1)],1)}),[],!1,null,null,null).exports);function U(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function V(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?U(Object(source),!0).forEach((function(t){Object(m.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):U(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var B=Object(o.b)({name:"ChannelsList",components:{ChannelsListEntries:L,Dimensions:d.a},props:{channels:{type:Array,default:function(){return[]}},policies:{type:Array,default:function(){return[]}}},setup:function(e){return{breakpoint:700,channelData:Object(o.a)({get:function(){return e.channels.map((function(t){var n={},r={},l=e.policies.filter((function(e){return e.channels[t.id]})),o=l.map((function(e){return e.interval})),c=l.map((function(e){return e.id}));return l.map((function(e,t){return e.severities.flat().map((function(e){return V(V({},e),{},{interval:o[t],id:c[t]})}))})).flat().forEach((function(e){n[e.name]=e.interval,r[e.name]=e.id})),V(V({},t),{},{severities:n,severitiesId:r})}))},set:function(){return[]}})}}}),W=(n(1019),Object(w.a)(B,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.channelData.length?n("div",[n("Dimensions",{scopedSlots:e._u([{key:"default",fn:function(t){var r=t.width;return n("div",{class:[r<e.breakpoint?"channelsTable--isMobile":"channelsTable--isNotMobile"]},[r>=e.breakpoint?n("div",{staticClass:"channelsTable__grid"},[n("div",{staticClass:"channelsTable__grid__b1"}),e._v(" "),n("div",{staticClass:"channelsTable__grid__b2 flex items-center"},[e._v("\n          "+e._s(e.$t("alerting.language"))+"\n        ")]),e._v(" "),n("div",{staticClass:"channelsTable__grid__b3 flex items-center"},[n("span",{staticClass:"h-6 w-2 bg-red-500 mr-2"}),e._v(" "),n("div",{staticClass:"hyphens capitalize"},[e._v("\n            "+e._s(e.$t("criticalErrors"))+"\n          ")]),e._v(" "),n("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.$t("alerting.tooltips.critical"),popperOptions:{modifiers:{computeStyle:{gpuAcceleration:!1}}}},expression:"{content: $t('alerting.tooltips.critical'), popperOptions: { modifiers: { computeStyle: {gpuAcceleration: false}}} }"}],staticClass:"w-4 h-4 rounded-full text-white flex-center mx-2 text-xs leading-none bg-gray-400 font-medium flex-shrink-0 flex-grow-0 cursor-pointer",staticStyle:{"margin-top":"-2px"}},[e._v("\n            ?\n          ")])]),e._v(" "),n("div",{staticClass:"channelsTable__grid__b4 flex items-center"},[n("span",{staticClass:"h-6 w-2 bg-yellow-500 mr-2"}),e._v(" "),n("div",{staticClass:"hyphens capitalize"},[e._v("\n            "+e._s(e.$t("nonCriticalErrors"))+"\n          ")]),e._v(" "),n("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.$t("alerting.tooltips.nonCritical"),popperOptions:{modifiers:{computeStyle:{gpuAcceleration:!1}}}},expression:"{content: $t('alerting.tooltips.nonCritical'), popperOptions: { modifiers: { computeStyle: {gpuAcceleration: false}}} }"}],staticClass:"w-4 h-4 rounded-full text-white flex-center mx-2 text-xs leading-none bg-gray-400 font-medium flex-shrink-0 flex-grow-0 cursor-pointer",staticStyle:{"margin-top":"-2px"}},[e._v("\n            ?\n          ")])]),e._v(" "),n("div",{staticClass:"channelsTable__grid__b5 text-right"})]):e._e(),e._v(" "),r>=e.breakpoint?n("div",{staticClass:"channelsTable__border border-b border-solid border-gray-300 my-3"}):e._e(),e._v(" "),e._l(e.channelData,(function(t){return n("ChannelsListEntries",{key:t.id,attrs:{breakpoint:e.breakpoint,channel:t,width:r,sender:t.sender},on:{deletingChannel:function(t){return e.$emit("update")},updateChannel:function(t){return e.$emit("update")}}})}))],2)}}],null,!1,3880217843)})],1):e._e()}),[],!1,null,null,null).exports),G=n(80),J={name:"AlertingCreateChannel",setup:function(e,t){var n=Object(o.r)(),r=Object(o.i)(""),l=Object(o.a)((function(){return n.getters["navigation/getCombinedFeatures"]}));return{setupType:r,features:l,openSettings:function(e){r.value=e,n.dispatch("ui/openMetaSidebar")}}}};J.components=Object.assign({GeneralButton:G.a,IconAlerting:R,AlertSetting:z},J.components);var K=J,Q=Object(w.a)(K,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"flex overflow-hidden flex-wrap -mx-4"},[n("GeneralButton",{staticClass:"mb-4 mx-2",attrs:{size:"px-4 py-2"},nativeOn:{click:function(t){return e.openSettings("email")}}},[n("IconAlerting",{staticClass:"w-4 mr-2",attrs:{icon:"email"}}),e._v("\n      "+e._s(e.$t("alerting.channel.addNewEmail"))+"\n    ")],1),e._v(" "),e.features.includes("plugins.alerting_slack")?n("GeneralButton",{staticClass:"mb-4 mx-2",attrs:{size:"px-4 py-2"},nativeOn:{click:function(t){return e.openSettings("slack")}}},[n("IconAlerting",{staticClass:"w-4 mr-2",attrs:{icon:"slack"}}),e._v("\n      "+e._s(e.$t("alerting.channel.addSlackNotification"))+"\n    ")],1):e._e(),e._v(" "),e.features.includes("plugins.alerting_teams")?n("GeneralButton",{staticClass:"mb-4 mx-2",attrs:{size:"px-4 py-2"},nativeOn:{click:function(t){return e.openSettings("teams")}}},[n("IconAlerting",{staticClass:"w-4 mr-2",attrs:{icon:"teams"}}),e._v("\n      "+e._s(e.$t("alerting.channel.addTeamsNotification"))+"\n    ")],1):e._e()],1),e._v(" "),n("portal",{attrs:{to:"customSidebar"}},[n("AlertSetting",{attrs:{"setup-type":e.setupType,"edit-mode":!1},on:{update:function(t){return e.$emit("saveChannel")}}})],1)],1)}),[],!1,null,null,null).exports,X=n(285),Y={name:"PageAlerting",setup:function(e,t){var n=Object(o.l)().$apiClient,c=Object(o.o)(),m=Object(o.i)(null),d=Object(o.i)(null),f=c.value.params.pid,h=Object(o.m)(Object(l.a)(regeneratorRuntime.mark((function e(){var t,l,o,c,h,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getRepositoryCollection().then((function(e){return e.getAlertingChannelRepository()}));case 3:return t=e.sent,e.next=6,n.getRepositoryCollection().then((function(e){return e.getAlertingPolicyRepository()}));case 6:return l=e.sent,e.next=9,Promise.all([t.list(f),l.list(f)]);case 9:o=e.sent,c=Object(r.a)(o,2),h=c[0],v=c[1],m.value=Object.keys(h.channels).map((function(e){return h.channels[e]})),d.value=Object.keys(v.policies).map((function(e){return v.policies[e]})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),console.error(e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])}))));h.fetch,h.fetchState;return{channels:m,policies:d}}};Y.components=Object.assign({SegmentHeader:c.a,LoadingSpinner:X.a,AlertingCreateChannel:Q,ChannelsList:W},Y.components);var Z=Y,ee=Object(w.a)(Z,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("SegmentHeader",{attrs:{"with-onboarding":!0}}),e._v(" "),e.$fetchState.pending?n("LoadingSpinner"):[n("AlertingCreateChannel",{staticClass:"mb-16",on:{saveChannel:e.$fetch}}),e._v(" "),e.channels&&e.policies?n("ChannelsList",{staticClass:"mb-10",attrs:{channels:e.channels,policies:e.policies},on:{update:e.$fetch}}):e._e()]],2)}),[],!1,null,null,null);t.default=ee.exports},720:function(e,t,n){"use strict";var r=n(724),l=n(1),o=Object(l.b)({name:"Dimensions",data:function(){return{width:null,height:null}},computed:{dimensionObserver:function(){var e=this;return new r.a((function(t){window.requestAnimationFrame((function(){e.width=t[0].contentRect.width,e.height=t[0].contentRect.height}))}))}},mounted:function(){this.dimensionObserver.observe(this.$el)},destroyed:function(){this.dimensionObserver.disconnect()},render:function(){return this.$scopedSlots.default({width:this.width,height:this.height})}}),c=n(4),component=Object(c.a)(o,undefined,undefined,!1,null,null,null);t.a=component.exports},880:function(e,t,n){"use strict";var r={name:"IconCheckmark",props:{color:{type:String,default:"currentColor"}}},l=n(4),component=Object(l.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"}},[n("path",{attrs:{d:"M435.848 83.466L172.804 346.51l-96.652-96.652c-4.686-4.686-12.284-4.686-16.971 0l-28.284 28.284c-4.686 4.686-4.686 12.284 0 16.971l133.421 133.421c4.686 4.686 12.284 4.686 16.971 0l299.813-299.813c4.686-4.686 4.686-12.284 0-16.971l-28.284-28.284c-4.686-4.686-12.284-4.686-16.97 0z",fill:e.color}})])}),[],!1,null,null,null);t.a=component.exports},930:function(e,t,n){"use strict";var r={name:"IconPencil",props:{color:{type:String,default:"currentColor"}}},l=n(4),component=Object(l.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"}},[n("path",{attrs:{d:"M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z",fill:e.color}})])}),[],!1,null,null,null);t.a=component.exports},957:function(e,t,n){e.exports={}},958:function(e,t,n){e.exports={}},959:function(e,t,n){e.exports={}},960:function(e,t,n){e.exports={}}}]);