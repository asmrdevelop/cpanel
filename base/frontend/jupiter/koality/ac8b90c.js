(window.webpackJsonp=window.webpackJsonp||[]).push([[89],{1031:function(e,t,n){"use strict";n.r(t);var r=n(9),c=(n(25),n(1)),o=n(167),l=n(60),d=n.n(l),f=n(723),v=(n(15),n(35),n(43),n(189)),m=n(7).default.extend({name:"RadioButtonGroup",props:{options:{type:Array,default:function(){return[]}},initial:{type:String,default:""},disabled:{type:Boolean,default:!1}},data:function(){return{current:""}},mounted:function(){this.setCurrent()},methods:{setCurrent:function(){var e=this;this.$nextTick((function(){e.current=e.initial}))},triggerButton:function(e){this.current=e,this.$emit("updateButton",e)},buttonLabel:function(label){return this.$te(label)?this.$t(label):label}}}),h=n(4),_=Object(h.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex gap-4 flex-wrap"},e._l(e.options,(function(option){return n("div",{key:option.id,staticClass:"cursor-pointer mr-1 px-2 py-1 rounded transition duration-300 pr-5 pl-5",class:[{"bg-gray-200":option.id!==e.current},{"text-white bg-primary-regular":option.id===e.current},{"text-gray-300 bg-gray-100 cursor-not-allowed italic":e.disabled}],attrs:{disabled:e.disabled},on:{click:function(t){return e.triggerButton(option.id)}}},[e._v("\n    "+e._s(e.buttonLabel(option.label))+"\n  ")])})),0)}),[],!1,null,null,null).exports,j=n(21),y=Object(c.b)({name:"LanguageSwitcher",components:{RadioButtonGroup:_},props:{userDetails:{type:Object,required:!0},storybook:{type:Boolean,default:!1}},setup:function(e,t){var n=t.emit,o=Object(c.l)(),l=o.i18n,d=o.$apiClient,f=Object(c.r)(),m=Object(j.f)().languages,h=[{id:"de",label:"Deutsch"},{id:"en",label:"English"},{id:"fr",label:"Français"},{id:"it",label:"Italiano"},{id:"es",label:"Español"},{id:"pt",label:"Português (Brasil)"},{id:"ru",label:"Русский"},{id:"ja",label:"日本語"}],_=Object(v.a)(),y=h.filter((function(e){return m.includes(e.id)})),w=Object(c.i)(l.locale),O=e.userDetails.masterId,x=e.userDetails.id,S=function(e){l.setLocaleCookie(e),l.locale=e,w.value=e},C=function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(r){var c,o,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=e.storybook?"de":r,S(c),t.prev=2,d.setLanguage(c),t.next=6,d.getRepository("user");case 6:return o=t.sent,t.next=9,o.setPreferredLanguage(Object(j.f)().apiProvider,O,{language:c});case 9:return t.next=11,d.getRepository("clusterUser");case 11:return l=t.sent,t.next=14,l.setPreferredLanguage(x,{language:c});case 14:f.dispatch("scores/clearScores"),f.dispatch("incidents/clearIncidents"),f.dispatch("projects/updateProject"),_.set("locale",c,{path:"/",domain:".360monitoring.com"}),n("changedLanguage"),t.next=24;break;case 21:t.prev=21,t.t0=t.catch(2),console.error(t.t0);case 24:case"end":return t.stop()}}),t,null,[[2,21]])})));return function(e){return t.apply(this,arguments)}}();return{languages:y,currentLanguage:w,changeLanguage:C}}}),w=y,O=Object(h.a)(w,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("RadioButtonGroup",{attrs:{options:e.languages,initial:e.currentLanguage},on:{updateButton:e.changeLanguage}})}),[],!1,null,null,null).exports,x=(n(17),n(16),n(27),n(19),n(28),n(18)),S=n(11),C=(n(39),n(30),n(38),n(40),n(67)),k=n(80),P=n(882),T=n(917),$={name:"IconTrash",props:{color:{type:String,default:"currentColor"}}},D=Object(h.a)($,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"}},[n("path",{attrs:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z",fill:e.color}})])}),[],!1,null,null,null).exports,A=(n(932),n(288)),R=n(287),I={name:"DeleteSubscriptionScreen"};I.props={sub:{type:Object,default:function(){}},screenOpen:{type:Boolean,default:!1}},I.setup=function(e,t){var n=e,o=Object(c.l)().$apiClient,l=Object(c.p)(),d=t.emit,f=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.getRepositoryCollection().then((function(e){return e.getSubscriptionRepository()}));case 3:return t=e.sent,e.next=6,t.cancelSubscription(n.sub.id);case 6:d("delete"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return{checkSku:C.a,getCurrencyString:C.b,router:l,cancel:function(){d("close")},cancelSubscription:f}},I.components=Object.assign({SideScreen:A.a,PlanTag:T.a,GeneralButton:k.a,FormFooter:R.a},I.components);var B=I,E=Object(h.a)(B,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("SideScreen",{key:"deleteSubscription",attrs:{"is-open":e.screenOpen},scopedSlots:e._u([{key:"headline",fn:function(){return[n("header",{staticClass:"flex items-center justify-between mb-2 flex-grow-0 flex-shrink-0"},[n("h3",{staticClass:"text-2xl font-light",attrs:{"data-cy":"header"}},[e._v("\n        "+e._s(e.$t("CancelSubscription"))+"\n      ")])])]},proxy:!0},{key:"subline",fn:function(){return[n("div",{staticClass:"flex justify-between items-center"},[n("p",[e._v("\n        "+e._s(e.$t("CancelSubscriptionSubline"))+"\n      ")]),e._v(" "),n("PlanTag",{attrs:{"actual-sku":e.checkSku(e.sub.items[0].product.price.sku)}})],1)]},proxy:!0},{key:"body",fn:function(){return[e.sub.project?n("p",{staticClass:"mb-6"},[e._v("\n      "+e._s(e.$t("CancelSubscriptionBody"))+"\n    ")]):n("div",{staticClass:"my-4"},[n("p",[e._v("\n        "+e._s(e.$t("NoProjectAttachedText"))+"\n      ")]),e._v(" "),n("GeneralButton",{staticClass:"my-2",attrs:{"color-palette":"ghost"},nativeOn:{click:function(t){return e.router.push("/dashboard?newProject=true")}}},[e._v("\n        "+e._s(e.$t("addNewMainProject"))+"\n      ")])],1),e._v(" "),n("div",{staticClass:"flex flex-col"},[n("div",{staticClass:"flex flex-col md:flex-row"},[n("div",{staticClass:"mr-2 flex flex-col lg:border-r-2 lg:border-gray-300 flex-grow pr-2 lg:w-[20vw]"},[e.sub.project?n("p",{staticClass:"flex flex-col"},[n("span",{staticClass:"font-bold truncate"},[e._v("\n              "+e._s(e.sub.project.name)+"\n            ")]),e._v(" "),n("span",{staticClass:"truncate text-sm"},[e._v("\n              "+e._s(e.sub.project.domain)+"\n            ")])]):n("div",[n("p",{staticClass:"font-bold"},[e._v("\n              "+e._s(e.$t("NoProjectAttached"))+"\n            ")])])]),e._v(" "),n("div",{staticClass:"flex items-center"},[n("PlanTag",{attrs:{"actual-sku":e.checkSku(e.sub.items[0].product.price.sku)}})],1)]),e._v(" "),n("div",{staticClass:"w-full text-right my-8"},[e._v("\n        "+e._s(e.getCurrencyString(e.sub.upcoming_invoice)+" / "+e.sub.items[0].product.price.recurring_interval)+"\n      ")])])]},proxy:!0},{key:"footer",fn:function(){return[n("FormFooter",{attrs:{config:"disable","cancel-button-label":e.$t("Back"),"disable-button-label":e.$t("CancelSubscription"),"confirm-message":e.$t("CancelSubscriptionConfirmation")},on:{disable:e.cancelSubscription,cancel:e.cancel}})]},proxy:!0}])})}),[],!1,null,null,null).exports,H=n(285);function F(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function z(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?F(Object(source),!0).forEach((function(t){Object(S.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):F(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var L={name:"ManageSubscription",setup:function(e,t){var n=Object(c.l)().$apiClient,o=Object(c.r)(),l=Object(c.p)(),d=Object(c.a)((function(){return o.getters["projects/getProjects"]})),f=Object(c.a)((function(){return o.getters["navigation/getIsPaidEnabled"]})),v=Object(c.a)((function(){return o.getters["navigation/getPolling"]})),m=Object(c.i)(!1),h=Object(c.i)(!1),_=Object(c.i)({}),j=function(){_.value={},h.value=!1,setTimeout((function(){m.value=!1}),100)},y=Object(c.i)([]),w=Object(c.i)(!1),O=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(){var t,r,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getRepositoryCollection().then((function(e){return e.getSubscriptionRepository()}));case 3:return t=e.sent,e.next=6,t.getUserSubscriptions();case 6:r=e.sent,d.value&&(c=d.value.filter((function(e){var t;return"unlimited-lite"===(null===(t=null==e?void 0:e.systems[0])||void 0===t?void 0:t.size_sku)})).map((function(e){return{pid:e.id,sid:null==e?void 0:e.systems[0].id,domain:null==e?void 0:e.systems[0].domain,name:null==e?void 0:e.name,sku:null==e?void 0:e.systems[0].size_sku}})),y.value=[].concat(Object(x.a)(c),Object(x.a)(r.subscriptions))),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:w.value=!0;case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();Object(c.f)((function(){O()}));var S=Object(c.a)((function(){return d.value.map((function(e){return{pid:e.id,sid:e.systems[0].id,domain:e.systems[0].domain,name:e.name,sku:e.systems[0].size_sku}}))})),k=function(e){return S.value.find((function(t){return t.pid===e}))||""},T=function(e,t){o.dispatch("projects/setProjectSystem",{pid:e,sid:t}),l.push("/"+e+"/"+t+"/overview/overview")};return{checkSku:C.a,getCurrencyString:C.b,router:l,isPaidEnabled:f,polling:v,showScreenOpen:m,screenOpen:h,subToCancel:_,handleCancelSubscription:function(sub){var e;_.value=sub,sub.project&&(_.value.project=z(z({},sub.project),k(null===(e=sub.project)||void 0===e?void 0:e.id))),m.value=!0,h.value=!0},handleDelete:function(){O(),j()},handleClose:j,currentSubscriptions:y,loaded:w,getProject:k,handleViewProject:function(e,t,n){var r,c,o,l,d;n?(l=null==e?void 0:e.pid,d=null==e?void 0:e.sid,T(l,d)):t&&(null===(r=e.project)||void 0===r?void 0:r.id)&&(l=null===(c=e.project)||void 0===c?void 0:c.id,d=null===(o=k(l))||void 0===o?void 0:o.sid,T(l,d))},getRemainingDays:function(e){return Object(P.a)(Date.now(),new Date(e))}}}};L.components=Object.assign({PlanTag:T.a,GeneralButton:k.a,IconTrash:D,DeleteSubscriptionScreen:E,LoadingSpinner:H.a},L.components);var U=L,N=Object(h.a)(U,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.polling?e._e():n("div",[e.loaded&&e.isPaidEnabled?[e._l(e.currentSubscriptions,(function(t,i){return n("div",{key:i,staticClass:"my-1 bg-white p-2 gap-1 lg:gap-0 rounded-md shadow-md"},[e.loaded?[n("div",{staticClass:"flex flex-col items-start lg:items-center lg:flex-row gap-2 lg:h-12"},[n("div",{staticClass:"mr-2 flex flex-col lg:border-r-2 lg:border-gray-300 pr-2 lg:w-full lg:max-w-[20rem] h-full",on:{click:function(n){e.handleViewProject(t,t.items&&t.items.length,"lite"===e.checkSku(t.sku))}}},[t.project&&t.project.name||t.name?n("p",{staticClass:"flex flex-col hover:underline hover:cursor-pointer"},[n("span",{staticClass:"font-bold truncate"},[e._v("\n                "+e._s(t.project&&t.project.name?t.project.name:t.name)+"\n              ")]),e._v(" "),n("span",{staticClass:"truncate text-sm"},[e._v("\n                "+e._s(t.project&&t.project.id?e.getProject(t.project.id).domain:t.domain)+"\n              ")])]):n("p",{staticClass:"flex items-center font-bold h-full"},[e._v("\n              "+e._s(e.$t("NoProjectAttached"))+"\n            ")])]),e._v(" "),n("div",{staticClass:"flex items-center lg:border-r-2 lg:border-gray-300 pr-2 min-w-[5vw] lg:w-48 h-full"},[n("PlanTag",{attrs:{"actual-sku":t.items&&t.items.length?e.checkSku(t.items[0].product.price.sku):e.checkSku(t.sku)}})],1),e._v(" "),n("div",{staticClass:"flex flex-col flex-grow items-start lg:flex-row lg:items-center justify-between lg:pl-2 w-full"},[n("div",[t.items&&t.items.length&&t.upcoming_invoice?n("p",{staticClass:"text-left"},[e._v("\n                "+e._s(e.getCurrencyString(t.upcoming_invoice)+"/"+t.items[0].product.price.recurring_interval)+"\n              ")]):e._e(),e._v(" "),"lite"===e.checkSku(t.sku)?n("p",{staticClass:"text-left"},[e._v("\n                "+e._s(e.$t("Free"))+"\n              ")]):e._e(),e._v(" "),t.cancel_at&&t.current_period_ends_at?n("p",[e._v("\n                "+e._s(e.$tc("remainingDays",0,{time:e.getRemainingDays(t.current_period_ends_at).value,unit:e.getRemainingDays(t.current_period_ends_at).unit}))+"\n              ")]):e._e()]),e._v(" "),n("div",{staticClass:"flex items-center justify-center gap-4 h-full"},[t.project&&t.project.id||t.pid?e._e():n("GeneralButton",{staticClass:"!mb-0",attrs:{"color-palette":"ghost"},nativeOn:{click:function(t){return e.router.push("/dashboard?newProject=true")}}},[e._v("\n                "+e._s(e.$t("addNewMainProject"))+"\n              ")]),e._v(" "),"lite"===e.checkSku(t.sku)||t.cancel_at?e._e():n("GeneralButton",{staticClass:"mb-0",attrs:{"color-palette":"caution"},nativeOn:{click:function(n){return e.handleCancelSubscription(t)}}},[e._v("\n                "+e._s(e.$t("Cancel"))+" \n                "),n("IconTrash",{staticClass:"w-3"})],1),e._v(" "),t.cancel_at?n("GeneralButton",{staticClass:"mb-0",attrs:{"is-disabled":!0}},[e._v("\n                "+e._s(e.$t("Canceled"))+"\n              ")]):e._e()],1)])])]:e._e()],2)})),e._v(" "),e.loaded&&!e.currentSubscriptions.length&&e.isPaidEnabled?n("div",{staticClass:"text-left mt-4"},[n("p",[e._v("\n        "+e._s(e.$t("noSubscriptions"))+"\n      ")])]):e._e(),e._v(" "),e.showScreenOpen?n("DeleteSubscriptionScreen",{attrs:{sub:e.subToCancel,"screen-open":e.screenOpen},on:{close:e.handleClose,delete:e.handleDelete}}):e._e()]:e.loaded&&!e.isPaidEnabled?[e._v("\n    "+e._s(e.$t("manageSubscriptionNotPossible"))+"\n  ")]:n("LoadingSpinner")],2)}),[],!1,null,null,null).exports,M=n(289),G=Object(c.b)({name:"ChangePassword",components:{GeneralButton:k.a,InputField:M.a},setup:function(){var e=Object(c.r)(),t=Object(c.l)().$apiClient,n=Object(c.i)(""),o=Object(c.i)(""),form=Object(c.h)({currentPassword:null,newPassword:null}),l=Object(c.a)((function(){var e=form.currentPassword,t=form.newPassword;return!!(e&&(null==t?void 0:t.length)>2)})),d=Object(c.a)((function(){var e=form.currentPassword,t=form.newPassword,n=[];return(null==t?void 0:t.length)&&!(null==e?void 0:e.length)&&(n=[].concat(Object(x.a)(n),["enterCurrentPassword"])),(null==t?void 0:t.length)<4&&(n=[].concat(Object(x.a)(n),["newPasswordToShort"])),n})),f=function(){var c=Object(r.a)(regeneratorRuntime.mark((function r(){var c,d,f,v;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(l.value){r.next=2;break}return r.abrupt("return");case 2:return o.value="",c=e.getters["access/getMasterUserId"],r.prev=4,r.next=7,t.getRepository("user");case 7:return d=r.sent,r.next=10,d.changePassword("koality",c,{password_old:form.currentPassword,password_new:form.newPassword});case 10:f=r.sent,v=f.refreshToken,t.setRefreshToken(v),n.value="",o.value="newPasswordStored",form.currentPassword=null,form.newPassword=null,setTimeout((function(){o.value=""}),4e3),r.next=21;break;case 17:r.prev=17,r.t0=r.catch(4),console.error(r.t0),n.value="currentPasswordWrong";case 21:case"end":return r.stop()}}),r,null,[[4,17]])})));return function(){return c.apply(this,arguments)}}();return{form:form,isStorePossible:l,errors:d,apiError:n,successMessage:o,onSubmit:f}}}),V=G,J=Object(h.a)(V,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("form",{attrs:{novalidate:""},on:{submit:function(t){return t.preventDefault(),e.onSubmit.apply(null,arguments)}}},[n("input",{attrs:{hidden:"",type:"text",autocomplete:"username",value:""}}),e._v(" "),n("InputField",{staticClass:"mb-4",attrs:{name:"oldPassword",type:"password",autocomplete:"current-password"},model:{value:e.form.currentPassword,callback:function(t){e.$set(e.form,"currentPassword",t)},expression:"form.currentPassword"}},[e._v("\n      "+e._s(e.$t("currentPassword"))+"\n    ")]),e._v(" "),n("InputField",{staticClass:"mb-4",attrs:{name:"newPasswordA",type:"password",autocomplete:"new-password"},model:{value:e.form.newPassword,callback:function(t){e.$set(e.form,"newPassword",t)},expression:"form.newPassword"}},[e._v("\n      "+e._s(e.$t("newPassword"))+"\n    ")]),e._v(" "),n("ul",{staticClass:"text-error-high text-sm list-disc pl-5 mb-3"},[e._l(e.errors,(function(t,r){return n("li",{key:r},[e._v("\n        "+e._s(e.$t(t))+"\n      ")])})),e._v(" "),e.apiError?n("li",[e._v("\n        "+e._s(e.$t(e.apiError))+"\n      ")]):e._e()],2),e._v(" "),e.successMessage?n("div",{staticClass:"text-error-low text-sm mb-4"},[e._v("\n      "+e._s(e.$t(e.successMessage))+"\n    ")]):e._e(),e._v(" "),n("div",{staticClass:"flex justify-end mt-6"},[n("GeneralButton",{attrs:{"is-disabled":!e.isStorePossible},nativeOn:{click:function(t){return e.onSubmit.apply(null,arguments)}}},[e._v("\n        "+e._s(e.$t("store"))+"\n      ")])],1)],1)])}),[],!1,null,null,null),K=J.exports,W=n(899),Z={name:"ListUserProjects"};Z.props={projects:{type:Array,default:function(){return[]}}},Z.setup=function(e,t){var n=Object(c.r)(),r=Object(c.p)();return{sublayout:Object(c.a)((function(){return n.getters["navigation/getSublayout"]})),goToProject:function(e,t){n.dispatch("projects/setProjectSystem",{pid:e,sid:t}),r.push("/"+e+"/"+t+"/overview/overview")}}},Z.components=Object.assign({ColorMarker:W.a,PlanTag:T.a},Z.components);var Q=Z,X=Object(h.a)(Q,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.projects.length?n("div",{staticClass:"mb-4"},[e._v("\n    "+e._s("cpanel"!==e.sublayout?e.$t("FollowingProjectsWillDeleted"):e.$t("FollowingProjectsWillDeletedCpanel"))+"\n  ")]):e._e(),e._v(" "),n("div",[e.projects.length?n("div",{staticClass:"p-2 bg-gray-300 uppercase text-sm"},[e._v("\n      "+e._s(e.$t("projects"))+"\n    ")]):e._e(),e._v(" "),e._l(e.projects,(function(t,r){return n("div",{key:r,staticClass:"py-3 border-b border-gray-200 pl-2 flex items-stretch"},[n("ColorMarker",{attrs:{status:t.warning?"failure":"success"}}),e._v(" "),n("div",{staticClass:"hover:cursor-pointer hover:underline",on:{click:function(n){return e.goToProject(t.pid,t.sid)}}},[n("strong",{staticClass:"font-medium text-sm truncate"},[e._v(e._s(t.name))]),n("br"),e._v(" "),n("div",{staticClass:"text-xs truncate max-w-[85%] lg:max-w-full pr-2"},[e._v("\n          "+e._s(t.domain)+"\n        ")])]),e._v(" "),"cpanel"===e.sublayout?[n("div",{staticClass:"flex w-full justify-end gap-2"},[n("div",{staticClass:"flex w-[2px] mr-1 flex-grow-0 flex-shrink-0 rounded bg-gray-300 max-h-48p"}),e._v(" "),n("div",{staticClass:"flex items-center justify-end min-w-[75px]"},[n("PlanTag",{staticClass:"flex items-center justify-end min-w-[75px]",attrs:{"actual-sku":t.size_sku}})],1)])]:e._e()],2)}))],2)])}),[],!1,null,null,null).exports,Y={name:"DeleteUser"};Y.props={masterIds:{type:Object,default:function(){}},projects:{type:Array,default:function(){return[]}}},Y.setup=function(e,t){var n=Object(c.l)(),o=Object(c.p)(),l=e,d=Object(c.l)().$apiClient,f=Object(c.r)(),v=Object(c.a)((function(){return f.getters["navigation/getSublayout"]})),m=Object(c.i)(!1),h=Object(c.i)(!1),_=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.getRepositoryCollection();case 3:return t=e.sent,r=t.getCompanyRepository(),e.next=7,r.disconnectUser("koality",l.masterIds.company,l.masterIds.user,{deleteIfNoCompany:!0});case 7:if(!n.$cpanel){e.next=10;break}return e.next=10,n.$cpanel.delete();case 10:m.value=!1,o.push("/dashboard/logout"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();return{props:l,sublayout:v,openSideScreen:m,userHasInitiatedDelete:h,initDeleteUser:function(){h.value&&(m.value=!0)},deleteUser:_}},Y.components=Object.assign({ListUserProjects:X,GeneralButton:k.a,SideScreen:A.a,FormFooter:R.a},Y.components);var ee=Y,te=Object(h.a)(ee,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("ListUserProjects",{class:[{"mb-8":"cpanel"===e.sublayout}],attrs:{projects:e.props.projects}}),e._v(" "),n("p",{staticClass:"flex items-center gap-2 mb-2"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.userHasInitiatedDelete,expression:"userHasInitiatedDelete"}],attrs:{id:"checkbox",type:"checkbox",value:""},domProps:{checked:Array.isArray(e.userHasInitiatedDelete)?e._i(e.userHasInitiatedDelete,"")>-1:e.userHasInitiatedDelete},on:{change:function(t){var n=e.userHasInitiatedDelete,r=t.target,c=!!r.checked;if(Array.isArray(n)){var o=e._i(n,"");r.checked?o<0&&(e.userHasInitiatedDelete=n.concat([""])):o>-1&&(e.userHasInitiatedDelete=n.slice(0,o).concat(n.slice(o+1)))}else e.userHasInitiatedDelete=c}}}),e._v(" "),n("label",{attrs:{for:"checkbox"}},[e._v("\n      "+e._s(e.$t("ConfirmStartAccountDeletion"))+"\n    ")])]),e._v(" "),n("GeneralButton",{attrs:{"color-palette":"caution","is-disabled":!e.userHasInitiatedDelete},nativeOn:{click:function(t){return e.initDeleteUser.apply(null,arguments)}}},[e._v("\n    "+e._s("cpanel"!==e.sublayout?e.$t("userDetails.delete"):e.$t("userDetailsCpanel.delete"))+"\n  ")]),e._v(" "),n("SideScreen",{attrs:{"is-open":e.openSideScreen},scopedSlots:e._u([{key:"headline",fn:function(){return[e._v("\n      "+e._s("cpanel"!==e.sublayout?e.$t("userDetails.delete"):e.$t("userDetailsCpanel.delete"))+"\n    ")]},proxy:!0},{key:"subline",fn:function(){return[e._v("\n      "+e._s("cpanel"!==e.sublayout?e.$t("userDetails.deleteConfirmSentence"):e.$t("userDetailsCpanel.deleteConfirmSentence"))+"\n    ")]},proxy:!0},{key:"footer",fn:function(){return[n("FormFooter",{attrs:{config:"disable","with-opt-in":!1,"disable-button-label":"cpanel"!==e.sublayout?e.$t("userDetails.reallyDeleteUser"):e.$t("userDetailsCpanel.reallyDeleteUser")},on:{disable:e.deleteUser,cancel:function(t){e.openSideScreen=!1}}})]},proxy:!0}])})],1)}),[],!1,null,null,null),ne=te.exports,re=n(909),ae=n(910),se=n(902),ie=n(920),ce={};ce.setup=function(e,t){var n,l=Object(c.r)();Object(c.o)();window.mitt=window.mitt||{all:n=n||new Map,on:function(e,t){var i=n.get(e);i?i.push(t):n.set(e,[t])},off:function(e,t){var i=n.get(e);i&&(t?i.splice(i.indexOf(t)>>>0,1):n.set(e,[]))},emit:function(e,t){var i=n.get(e);i&&i.slice().map((function(e){e(t)})),(i=n.get("*"))&&i.slice().map((function(n){n(e,t)}))}};var f=Object(c.l)().$apiClient,v=Object(se.a)(),m=v.activeTab,h=v.updateActiveTab,_=v.setFirstTab,y=Object(c.i)(!1),w=Object(c.i)(1),O=(Object(c.a)((function(){return l.getters["access/getUserId"]})),Object(c.a)((function(){return l.getters["access/getUserDetails"]}))),x=Object(c.a)((function(){return l.getters["navigation/getCombinedFeatures"]})),S=Object(c.a)((function(){return l.getters["navigation/getIsPaidEnabled"]})),C=Object(c.a)((function(){return l.getters["navigation/getSublayout"]})),k=Object(c.i)(""),P=Object(ie.a)().projects,T=Object(c.a)((function(){return{company:O.value.company.masterId,user:O.value.masterId}})),$=Object(c.m)(Object(r.a)(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.getRepository("user");case 3:return t=e.sent,e.next=6,t.isDeletable(Object(j.f)().apiProvider,T.value.user,T.value.company);case 6:n=e.sent,r=n.isDeletable,y.value=r,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))),D=($.fetch,$.fetchState,Object(c.a)((function(){return l.getters["access/getTimezone"]}))),A=Object(c.a)((function(){var e={timezone:D.value};return JSON.stringify(e)})),R=JSON.stringify(["email","avatar","consent","removeAccount","password","naming"]);window.mitt.on("tsxUserProfile",(function(e){e.timezone&&I(e.timezone)}));var I=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.dispatch("access/setTimezone",t),n=new o.e(Object(j.c)(),d.a),e.next=4,n.setTimezone(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=Object(c.a)((function(){return 4-Object(j.a)("dashboard:userData:userSettings:tab")>1}));return Object(c.s)((function(){return C}),(function(){k.value="cpanel"!==C.value?"userDetails.delete":"userDetailsCpanel.delete"}),{immediate:!0}),{disabledFeature:j.b,activeTab:m,updateActiveTab:h,setFirstTab:_,isDeletable:y,tabKey:w,userDetails:O,features:x,isPaidEnabled:S,sublayout:C,deleteHeader:k,projects:P,masterIds:T,userData:A,inactiveFields:R,displayTabHeader:B}},ce.components=Object.assign({SegmentHeader:f.a,Tabs:re.a,Tab:ae.a,ChangePassword:K,LanguageSwitcher:O,ManageSubscription:N,LoadingSpinner:H.a,DeleteUser:ne},ce.components);var oe=ce,ue=Object(h.a)(oe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.$fetchState.pending?n("LoadingSpinner"):n("div",[n("SegmentHeader"),e._v(" "),n("Tabs",{key:e.tabKey,attrs:{"switch-size":750,"outer-active-tab":e.activeTab,"non-router":!0,"display-tab-header":e.displayTabHeader},on:{updateActiveTab:e.updateActiveTab,firstTab:e.setFirstTab}},[e.disabledFeature("dashboard:userData:userSettings:tab:changePassword")?e._e():n("Tab",{attrs:{"outer-active-tab":e.activeTab,name:"password",header:e.$t("userDetails.password")},on:{updateActiveTab:e.updateActiveTab}},[e.$fetchState.pending?e._e():[e.features.includes("feature.password")?[n("p",{staticClass:"font-light mb-4 max-w-75ch"},[e._v("\n            "+e._s(e.$t("userDetails.passwordSentence"))+"\n          ")]),e._v(" "),n("ChangePassword",{staticClass:"max-w-75ch"})]:[e._v("\n          "+e._s(e.$t("passwordChangeNotPossible"))+"\n        ")]]],2),e._v(" "),e.disabledFeature("dashboard:userData:userSettings:tab:language")?e._e():n("Tab",{attrs:{"outer-active-tab":e.activeTab,name:"language",header:e.$t("userDetails.language")},on:{updateActiveTab:e.updateActiveTab}},[e.$fetchState.pending?e._e():[e.features.includes("feature.language_multi")?[n("p",{staticClass:"font-light mb-4 max-w-75ch"},[e._v("\n            "+e._s(e.$t("userDetails.languageSentence"))+"\n          ")]),e._v(" "),n("LanguageSwitcher",{attrs:{"user-details":e.userDetails},on:{changedLanguage:function(t){e.tabKey+=1}}})]:[e._v("\n          "+e._s(e.$t("languageChangeNotPossible"))+"\n        ")]]],2),e._v(" "),e.disabledFeature("dashboard:userData:userSettings:tab:timezone")?e._e():n("Tab",{attrs:{"outer-active-tab":e.activeTab,name:"timezone",header:e.$t("Timezone")},on:{updateActiveTab:e.updateActiveTab}},[n("tsx-user-profile",{attrs:{"user-data":e.userData,"inactive-fields":e.inactiveFields,"current-language":e.$i18n.locale,view:"profile"}})],1),e._v(" "),e.isPaidEnabled?n("Tab",{attrs:{"outer-active-tab":e.activeTab,name:"subscription",header:e.$t("manageSubscription")},on:{updateActiveTab:e.updateActiveTab}},[n("ManageSubscription")],1):e._e(),e._v(" "),e.disabledFeature("dashboard:userData:userSettings:tab:deleteAccount")?e._e():n("Tab",{attrs:{"outer-active-tab":e.activeTab,name:"deleteUser",header:e.$t(e.deleteHeader)},on:{updateActiveTab:e.updateActiveTab}},[e.$fetchState.pending?n("LoadingSpinner"):[e.isDeletable?[n("p",{staticClass:"font-light mb-4 max-w-75ch"},[e._v("\n            "+e._s("cpanel"!==e.sublayout?e.$t("userDetails.deleteConfirmSentence"):e.$t("userDetailsCpanel.deleteConfirmSentence"))+"\n          ")]),e._v(" "),n("DeleteUser",{attrs:{"master-ids":e.masterIds,projects:e.projects}})]:[e._v("\n          "+e._s(e.$t("deleteUserNotPossible"))+"\n        ")]]],2)],1)],1)}),[],!1,null,null,null);t.default=ue.exports},720:function(e,t,n){"use strict";var r=n(724),c=n(1),o=Object(c.b)({name:"Dimensions",data:function(){return{width:null,height:null}},computed:{dimensionObserver:function(){var e=this;return new r.a((function(t){window.requestAnimationFrame((function(){e.width=t[0].contentRect.width,e.height=t[0].contentRect.height}))}))}},mounted:function(){this.dimensionObserver.observe(this.$el)},destroyed:function(){this.dimensionObserver.disconnect()},render:function(){return this.$scopedSlots.default({width:this.width,height:this.height})}}),l=n(4),component=Object(l.a)(o,undefined,undefined,!1,null,null,null);t.a=component.exports},882:function(e,t,n){"use strict";n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return v}));n(32),n(69),n(81),n(22),n(96);var r=n(1026),c=n(1027),o=n(1076),l=n(908).utcToZonedTime,d=function(e,t){return l(new Date(e),t)},f=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"short",c={dateStyle:r,timeStyle:"short"};return d(e,n).toLocaleString(t,c)},v=function(e,t){var n=Object(r.a)(t,e);return n<121?{value:n,unit:"minutes"}:n<2880?{value:Object(c.a)(t,e),unit:"hours"}:{value:Object(o.a)(t,e),unit:"days"}}},886:function(e,t,n){e.exports={}},899:function(e,t,n){"use strict";var r=n(1),c=Object(r.b)({name:"ColorMarker",props:{status:{type:String,default:"success"},limitHeight:{type:Boolean,default:!0}}}),o=n(4),component=Object(o.a)(c,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"w-1 mr-3 flex-grow-0 flex-shrink-0 rounded",class:["failure"===e.status?"bg-error-high":"bg-error-low",{"max-h-48p":e.limitHeight}]})}),[],!1,null,null,null);t.a=component.exports},902:function(e,t,n){"use strict";var r=n(1);t.a=function(){var e=Object(r.i)(null);return{updateActiveTab:function(t){return e.value=t},setFirstTab:function(t){return e.value=t},activeTab:e}}},903:function(e,t,n){"use strict";n(886)},909:function(e,t,n){"use strict";var r=n(9),c=n(18),o=(n(25),n(68),n(30),n(39),n(15),n(32),n(81),n(35),n(43),n(1)),l=n(720),d=Object(o.b)({name:"Tabs",components:{Dimensions:l.a},props:{switchSize:{type:Number,default:500},outerActiveTab:{type:String,default:""},nonRouter:{type:Boolean,default:!1},displayTabHeader:{type:Boolean,default:!0}},setup:function(e,t){var n=t.emit,l=Object(o.o)(),d=Object(o.p)(),f=Object(o.r)(),v=Object(o.q)(),m=Object(o.i)([]),h=Object(o.i)(""),_=Object(o.a)((function(){return f.getters["navigation/getIsPaidEnabled"]})),j=function(){var e=m.value[0].name;n("updateActiveTab",e),d.push({hash:e})};Object(o.s)((function(){return e.outerActiveTab}),(function(){e.outerActiveTab&&(h.value=e.outerActiveTab)}),{immediate:!0});var y=function(){return(v.default?v.default():[]).filter((function(e){return e.tag})).map((function(e){var t=e.componentInstance;return{isActive:t.isActive,isVisible:t.isVisible,name:t.name,header:t.header,notification:t.notification||null}}))};Object(o.f)((function(){if(m.value=Object(c.a)(y()),m.value.length){if(e.outerActiveTab||n("firstTab",y()[0].name),!e.nonRouter){if(!l.value.hash.length)return j();var t=l.value.hash.split("#")[1];m.value.map((function(e){return e.name})).includes(t)?n("updateActiveTab",t):j()}Object(o.s)((function(){return _.value}),Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.d)();case 2:m.value=Object(c.a)(y());case 3:case"end":return e.stop()}}),e)}))),{immediate:!0})}}));return{tabs:m,activeTab:h,clickTab:function(t){n("updateActiveTab",t),e.nonRouter?h.value=t:d.push({hash:t})}}}}),f=(n(903),n(4)),component=Object(f.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Dimensions",{scopedSlots:e._u([{key:"default",fn:function(t){var r=t.width;return n("div",{staticClass:"tabs",class:[{"tabs--smallSize":e.displayTabHeader&&r<e.switchSize}],attrs:{role:"tablist"}},[n("nav",{directives:[{name:"show",rawName:"v-show",value:e.displayTabHeader&&r>=e.switchSize,expression:"displayTabHeader && width >= switchSize"}],staticClass:"flex",attrs:{role:"presentation"}},e._l(e.tabs,(function(t,r){return n("a",{key:r,staticClass:"cursor-pointer rounded py-3 px-4 mr-4 transition-all duration-300 select-none flex items-center justify-between",class:[t.name===e.activeTab?"border-gray-300 bg-primary-regular text-white":"border-transparent bg-gray-300 text-gray-600"],attrs:{role:"tab"},on:{click:function(n){return n.preventDefault(),e.clickTab(t.name)}}},[e._v("\n        "+e._s(t.header)+"\n        "),t.notification?n("span",{staticClass:"bg-error-high rounded text-sm text-white ml-2 ar-square w-6 flex-center"},[e._v(e._s(t.notification))]):e._e()])})),0),e._v(" "),n("div",{class:[e.displayTabHeader&&r>=e.switchSize?"pt-4":""]},[e._t("default")],2)])}}],null,!0)})}),[],!1,null,null,null);t.a=component.exports},910:function(e,t,n){"use strict";n(68);var r=n(1),c=n(90),o=Object(r.b)({name:"Tab",components:{IconChevron:c.a},inheritAttrs:!1,props:{name:{type:String,default:""},header:{type:String,default:""},outerActiveTab:{type:String,default:""},nonRouter:{type:Boolean,default:!1},notification:{type:Number,default:null}}}),l=n(4),component=Object(l.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{ref:"tab",staticClass:"tabs__tabBody",attrs:{role:"tabpanel"}},[n("div",{staticClass:"tabs__tabHeader cursor-pointer transition-all duration-300 text-lg font-thin justify-between items-center",class:[e.outerActiveTab===e.name?"tabs__tabHeader--active bg-gray-200":"text-gray-600 "],on:{click:function(t){return e.$emit("updateActiveTab",e.name)}}},[n("div",{staticClass:"flex items-center justify-between"},[e._v("\n      "+e._s(e.header)+" "),e.notification?n("span",{staticClass:"bg-error-high rounded text-sm text-white ml-2 ar-square w-6 flex-center"},[e._v(e._s(e.notification))]):e._e()]),e._v(" "),n("IconChevron",{staticClass:"w-2 h-2 text-gray-600",attrs:{degree:e.outerActiveTab===e.name?270:90}})],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.outerActiveTab===e.name,expression:"outerActiveTab === name"}],staticClass:"pt-4 pb-4 tabs__tabContent"},[e._t("default")],2)])}),[],!1,null,null,null);t.a=component.exports},917:function(e,t,n){"use strict";var r=n(1),c=n(67),o={name:"PlanTag"};o.props={actualSku:{type:String,required:!0},clickable:{type:Boolean,default:!1}},o.setup=function(e,t){var n=Object(r.a)((function(){return Object(c.a)(o.actualSku)})),o=e;return{checkedSku:n,props:o}};var l=o,d=n(4),component=Object(d.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.props.actualSku.length?n("div",{staticClass:"text-sm capitalize px-2 rounded-md text-center justify-center hover:cursor-default transition duration-300 ease-in-out border border-gray-200",class:[{"hover:!cursor-pointer hover:opacity-90":e.props.clickable}]},[e._v("\n  "+e._s(e.checkedSku)+"\n")]):e._e()}),[],!1,null,null,null);t.a=component.exports},920:function(e,t,n){"use strict";var r=n(9),c=n(11),o=(n(25),n(39),n(17),n(15),n(68),n(40),n(30),n(16),n(27),n(19),n(28),n(1));function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function d(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(c.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var f=function(e){return Object.keys(e.scores).map((function(t){var n=e.scores[t].master;return{id:t,title:n.title,score:n.score,status:n.status,subScores:e.scores[t].sub_scores.map((function(e){return{status:e.status,score:e.score,id:e.identifier,title:e.title}}))}}))},v=function(e,t,n){return Object.keys(e).map((function(r){var c,o,l=e[r],d=t.value.find((function(e){return e.id===l.project.id})),v=d.onboarding.completed,m=(c=l.systems,o=d,Object.keys(c).map((function(e){var t,n=o.systems.find((function(t){return t.id===parseInt(e)}));return{id:c[e].system.id,domain:n.domain,type:null===(t=n.system_type)||void 0===t?void 0:t.name,scores:c[e].scores,size_sku:n.size_sku}})))[0],h=function(e,t){var n=t.filter((function(t){return Number(t.pid)===Number(e)}));return 0===n.length?null:!!n.find((function(e){return"failure"===e.status}))}(l.project.id,n);return{domain:m.domain||"",name:l.project.name,pid:l.project.id,sid:m.id,scores:f(m),pluginState:h,type:m.type||"",onBoarding:v,size_sku:m.size_sku}}))},m=function(e){return e.map((function(e){return d(d({},e),{},{warning:null!==e.pluginState&&e.pluginState||!!e.scores.find((function(e){return"bad"===e.status&&e.score>=0}))})}))};t.a=function(){var e=Object(o.l)(),t=e.store,n=e.$apiClient,c=Object(o.a)((function(){return t.getters["projects/getProjects"]})),l=Object(o.a)((function(){return t.getters["access/getUserId"]})),d=Object(o.a)((function(){return t.getters["navigation/getPluginIncidents"]})),f=Object(o.i)(null);return Object(o.m)(Object(r.a)(regeneratorRuntime.mark((function e(){var t,r,o,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getRepository("score");case 3:return t=e.sent,e.next=6,t.getScoresByUser(l.value,{scores:["basic-uptime","basic-performance","basic-seo","basic-content","basic-tech","basic-security"],with_sub_scores:!0,filter_empty_projects:!0});case 6:r=e.sent,o=r.scores,h=v(o,c,d.value),f.value=m(h),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))),{projects:f}}}}]);