define(["angular","jquery","lodash","cjt/util/locale","cjt/io/api","cjt/io/api2-request","cjt/io/api2","cjt/util/httpStatus","cjt/core","cjt/services/APIService"],(function(n,t,i,a,e,o,r,s,c){return n.module("cpanel.applicationManager").factory("Domains",["$q","defaultInfo","APIService",function(t,e,r){var s={addon_domains:a.maketext("Addon Domains"),main_domain:a.maketext("Main Domain"),sub_domains:a.maketext("Subdomains")};function c(n){return s[n]?s[n]:a.maketext("Other")}function d(n){for(var t=[],a=0,e=i.keys(n).sort(),o=e.length;a<o;a++){var r=e[a];if("cp_php_magic_include_path.conf"!==r&&"parked_domains"!==r)if(i.isArray(n[r])){for(var s=[],d=0,m=n[r].length;d<m;d++)s.push({domain:n[r][d],type:c(r)});t=t.concat(i.sortBy(s,["domain"]))}else t.push({domain:n[r],type:c(r)})}return t}var m=function(){};m.prototype=new r,m.domains=[],n.extend(m.prototype,{fetch:function(){if(0===this.domains.length){var n=new o.Class;return n.initialize("DomainInfo","list_domains"),this.deferred(n,{transformAPISuccess:function(n){return this.domains=d(n.data),this.domains}}).promise}return t.when(this.domains)},init:function(){this.domains=d(e.domains)}});var u=new m;return u.init(),u}])}));