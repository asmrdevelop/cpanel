define(["angular","lodash","cjt/core","cjt/util/locale","app/filters/htmlSafeString"],(function(e,t,i,n,a){"use strict";var r="cpanel.apiTokens.itemListerView.directive",c=[a.namespace],o="directives/itemListerView.ptt",l=i.config.debug?i.buildFullPath("api_tokens/directives/itemListerView.ptt"):o,m=["$scope","$location","ITEM_LISTER_CONSTANTS"],s=function(e,t,i){e.toggleSelection=function(t){t.selected?e.$emit(i.TABLE_ITEM_SELECTED,{item:t}):e.$emit(i.TABLE_ITEM_DESELECTED,{item:t})},e.getCreationLabel=function(e){return n.local_datetime(e,"datetime_format_medium")},e.getExpirationLabel=function(e){return e?n.local_datetime(e,"datetime_format_medium"):""},e.getRestrictionLabel=function(e){return e?n.maketext("Unrestricted"):n.maketext("Limited")},e.getItems=function(){return e.items},e.manageToken=function(e){t.path("/manage").search("token",e.id)}},u=e.module(r,c);u.value("PAGE",PAGE);var d=function(e,t,i,n){e.items=[],e.headerItems=n.getHeaderItems(),e.updateView=function(t){e.items=t},n.registerViewCallback(e.updateView.bind(e)),e.$on("$destroy",(function(){n.deregisterViewCallback(e.updateView)}))};return u.directive("itemListerView",(function(){return{templateUrl:l,restrict:"EA",replace:!0,require:"^itemLister",link:d,controller:m.concat(s)}})),{class:s,namespace:r,link:d,template:o}}));