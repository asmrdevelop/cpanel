define(["angular","lodash","cjt/util/locale","cjt/io/uapi-request","cjt/io/uapi","cjt/modules","cjt/directives/formWaiting","cjt/services/alertService","cjt/directives/alert","cjt/directives/alertList","uiBootstrap","cjt/services/APICatcher"],(function(e,t,c,r){"use strict";return function(){return require(["cjt/bootstrap"],(function(a){e.module("App",["cjt2.cpanel","ui.bootstrap"]).controller("BaseController",["$rootScope","$scope","APICatcher","alertService",function(a,s,i,o){e.extend(s,{save_privs:function(e){var a,s=document.forms[e.$name];if(s.ALL.checked)a="ALL";else{a="";for(var l=[].slice.call(s.privileges),n=0;n<l.length;n++)l[n].checked&&(a+=","+l[n].value);a=a.replace(/^,/,"")}var u=(new r.Class).initialize("Mysql","set_privileges_on_database",{user:CPANEL.PAGE.username,database:CPANEL.PAGE.dbname,privileges:a});return i.promise(u).then((function(e){for(var r=[].slice.call(s.elements),a=0;a<r.length;a++)"checkbox"===r[a].type&&(r[a].defaultChecked=r[a].checked);o.add({type:"success",message:c.maketext("You saved “[_1]”’s privileges on the database “[_2]”.",t.escape(CPANEL.PAGE.username),t.escape(CPANEL.PAGE.dbname)),closeable:!0,replace:!1,autoClose:1e4,group:"userrights"})}))}})}]),a("#ng_content","App")}))}}));