define(["angular","lodash","app/services/HasIdVerMix"],(function(t,i){"use strict";t.module("App").factory("Certificate",["HasIdVerMix",function(t){function e(t){this.reset(),t&&this.init(t)}return i.assign(e.prototype,t),i.assign(e.prototype,{get_product:function(){return this.selected_product},set_product:function(t){this.selected_product=t},set_price:function(t){this.total_price=t},get_price:function(){return this.total_price},set_domains:function(t){this.domains=t},get_domains:function(){return this.domains},get_subject_names:function(){return this.domains.map((function(t){return{type:"dNSName",name:t.domain,dcv_method:t.dcvPassed.dns?"dns":"http"}}))},set_virtual_hosts:function(t){this.virtual_hosts=t},get_virtual_hosts:function(){return this.virtual_hosts},get_validity_period:function(){return this.selected_product.validity_period||[1,"year"]},reset:function(){this.domains=[],this.total_price=null,this.virtual_hosts=[],this.selected_product=null,this.product_price=0,this.product_wildcard_price=0,this.identity_verification=null},toJSON:function(){return{domains:this.domains,total_price:this.total_price,virtual_hosts:this.virtual_hosts,selected_product:this.selected_product,product_price:this.product_price,product_wildcard_price:this.product_wildcard_price,identity_verification:this.get_identity_verification()}},init:function(t){i.assign(this,t)}}),e}])}));