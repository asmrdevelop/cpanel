"use strict";(self.webpackChunkcalendar_contact_management=self.webpackChunkcalendar_contact_management||[]).push([[179],{9894:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{ns:()=>ListComponent});var _services_calendar_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9360),_cpanel_locale__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(269),_angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4650),_cpanel_angular_ui_jupiter__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(6018),_angular_router__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(4793),_angular_common__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(6895);function ListComponent_span_6_Template(e,r){1&e&&_angular_core__WEBPACK_IMPORTED_MODULE_2__._UZ(0,"span",12)}function ListComponent_span_7_Template(e,r){1&e&&_angular_core__WEBPACK_IMPORTED_MODULE_2__._UZ(0,"span",13)}function ListComponent_span_11_Template(e,r){1&e&&_angular_core__WEBPACK_IMPORTED_MODULE_2__._UZ(0,"span",12)}function ListComponent_span_12_Template(e,r){1&e&&_angular_core__WEBPACK_IMPORTED_MODULE_2__._UZ(0,"span",13)}function ListComponent_span_16_Template(e,r){1&e&&_angular_core__WEBPACK_IMPORTED_MODULE_2__._UZ(0,"span",12)}function ListComponent_span_17_Template(e,r){1&e&&_angular_core__WEBPACK_IMPORTED_MODULE_2__._UZ(0,"span",13)}function ListComponent_tr_21_Template(e,r){if(1&e&&(_angular_core__WEBPACK_IMPORTED_MODULE_2__.TgZ(0,"tr",14),_angular_core__WEBPACK_IMPORTED_MODULE_2__._UZ(1,"cp-loading-spinner",15),_angular_core__WEBPACK_IMPORTED_MODULE_2__.qZA()),2&e){const t=_angular_core__WEBPACK_IMPORTED_MODULE_2__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_2__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_2__.Q6J("title",t.locale.maketext("Loading collections \u2026"))("isActive",!0)}}function ListComponent_tr_22_Template(e,r){if(1&e&&(_angular_core__WEBPACK_IMPORTED_MODULE_2__.TgZ(0,"tr")(1,"td",16),_angular_core__WEBPACK_IMPORTED_MODULE_2__._uU(2),_angular_core__WEBPACK_IMPORTED_MODULE_2__.qZA()()),2&e){const t=_angular_core__WEBPACK_IMPORTED_MODULE_2__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_2__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_2__.hij(" ",t.locale.maketext("No collections currently exist for your account.")," ")}}function ListComponent_tr_23_span_2_Template(e,r){if(1&e&&_angular_core__WEBPACK_IMPORTED_MODULE_2__._UZ(0,"span",22),2&e){const t=_angular_core__WEBPACK_IMPORTED_MODULE_2__.oxw().$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_2__.Jzz("background-color: ",t.color,"")}}function ListComponent_tr_23_Template(e,r){if(1&e){const t=_angular_core__WEBPACK_IMPORTED_MODULE_2__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_2__.TgZ(0,"tr")(1,"td"),_angular_core__WEBPACK_IMPORTED_MODULE_2__.YNc(2,ListComponent_tr_23_span_2_Template,1,3,"span",17),_angular_core__WEBPACK_IMPORTED_MODULE_2__._uU(3),_angular_core__WEBPACK_IMPORTED_MODULE_2__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_2__.TgZ(4,"td",18),_angular_core__WEBPACK_IMPORTED_MODULE_2__._uU(5),_angular_core__WEBPACK_IMPORTED_MODULE_2__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_2__.TgZ(6,"td"),_angular_core__WEBPACK_IMPORTED_MODULE_2__._uU(7),_angular_core__WEBPACK_IMPORTED_MODULE_2__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_2__.TgZ(8,"td")(9,"a",19),_angular_core__WEBPACK_IMPORTED_MODULE_2__.NdJ("click",function(){const u=_angular_core__WEBPACK_IMPORTED_MODULE_2__.CHM(t).$implicit;return _angular_core__WEBPACK_IMPORTED_MODULE_2__.oxw().editCollection(u)}),_angular_core__WEBPACK_IMPORTED_MODULE_2__._UZ(10,"span",20),_angular_core__WEBPACK_IMPORTED_MODULE_2__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_2__._uU(11," \xa0 "),_angular_core__WEBPACK_IMPORTED_MODULE_2__.TgZ(12,"a",19),_angular_core__WEBPACK_IMPORTED_MODULE_2__.NdJ("click",function(){const u=_angular_core__WEBPACK_IMPORTED_MODULE_2__.CHM(t).$implicit;return _angular_core__WEBPACK_IMPORTED_MODULE_2__.oxw().removeCollection(u)}),_angular_core__WEBPACK_IMPORTED_MODULE_2__._UZ(13,"span",21),_angular_core__WEBPACK_IMPORTED_MODULE_2__.qZA()()()}if(2&e){const t=r.$implicit,i=_angular_core__WEBPACK_IMPORTED_MODULE_2__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_2__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_2__.Q6J("ngIf",t.color),_angular_core__WEBPACK_IMPORTED_MODULE_2__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_2__.hij(" ",t.name," "),_angular_core__WEBPACK_IMPORTED_MODULE_2__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_2__.Oqu(t.type),_angular_core__WEBPACK_IMPORTED_MODULE_2__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_2__.Oqu(t.description),_angular_core__WEBPACK_IMPORTED_MODULE_2__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_2__.s9C("title",i.locale.maketext("Edit collection")),_angular_core__WEBPACK_IMPORTED_MODULE_2__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_2__.s9C("title",i.locale.maketext("Delete collection")),_angular_core__WEBPACK_IMPORTED_MODULE_2__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_2__.Q6J("ngClass",t.deleting||t.protected?"ri-xl ri-delete-bin-5-line disabledButan":"ri-xl ri-delete-bin-5-line")}}var DeleteStatus=(()=>{return(e=DeleteStatus||(DeleteStatus={}))[e.none=0]="none",e[e.confirmation=1]="confirmation",e[e.inProgress=2]="inProgress",DeleteStatus;var e})(),UpdateStatus=(()=>{return(e=UpdateStatus||(UpdateStatus={}))[e.none=0]="none",e[e.inProgress=1]="inProgress",UpdateStatus;var e})();let ListComponent=(()=>{class ListComponent{constructor(e,r,t,i){this.calendarService=e,this.locale=r,this._notifySvc=t,this.router=i,this.subscriptions=[],this.collections=[],this.lastSortOrder=1,this.lastSortProp="",this.usersForDisplay=[],this.loadingCollections=!0,this.calendarService.hideCreateBtn=!1,document.dispatchEvent(new CustomEvent("breadcrumbSetCrumbs",{bubbles:!0,detail:{help:"https://go.cpanel.net/calcontact-management",crumbs:[{displayName:"List Collections",longName:"The list of calendars and address books you have available to manage.",link:"list"}]}}))}ngOnInit(){this.subscriptions.push(this.calendarService.getCollectionList().subscribe(response=>{const user=eval("window.REMOTE_USER"),collections=response.data,transformedCollections=[];if(collections&&collections.hasOwnProperty(user))for(const e of Object.keys(collections[user])){const r={name:collections[user][e].displayname,owner:user,path:e,type:"VCALENDAR"===collections[user][e].type?"calendar":"addressbook",description:collections[user][e].description??"",protected:!!collections[user][e].protected};"VCALENDAR"===collections[user][e].type&&(r.color=collections[user][e]["calendar-color"]),transformedCollections.push(r)}this.setCollectionList(transformedCollections)}))}ngOnDestroy(){for(const e in this.subscriptions)this.subscriptions[e]&&this.subscriptions[e].unsubscribe();this.subscriptions=[]}setCollectionList(e){if(this.collections=e,this.collections)for(const r of this.collections)r.deleting=!1;this.sort("name"),this.loadingCollections=!1}removeCollection(e){e.protected||!confirm(this.locale.maketext("Are you sure you wish to delete the \u201c[_1]\u201d named \u201c[_2]\u201d?",e.type,e.name))||(e.deleting=!0,this.calendarService.manageCollection("delete",e).subscribe(t=>{if(!t)return void(e.deleting=!1);const i=this.locale.maketext("Successfully deleted the \u201c[_1]\u201d named \u201c[_2]\u201d for \u201c[_3]\u201d.",e.type,e.name,e.owner),_=this.collections.indexOf(e);this.collections.splice(_,1),this.collections=this.collections.slice(),e.deleting=!1,this._notifySvc.success(i)}))}sort(e){this.lastSortOrder=-1*this.lastSortOrder,e!==this.lastSortProp&&(this.lastSortOrder=1),this.collections=[...this.collections.sort((r,t)=>r[e].toLowerCase().localeCompare(t[e].toLowerCase())*this.lastSortOrder)],this.lastSortProp=e}editCollection(e){this.calendarService.CRUDComponentFormState=e,this.calendarService.CRUDComponentMode="update",this.calendarService.CRUDComponentValidationState="is-valid",this.router.navigate(["editor"])}}return ListComponent.\u0275fac=function e(r){return new(r||ListComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_2__.Y36(_services_calendar_service__WEBPACK_IMPORTED_MODULE_0__.ot),_angular_core__WEBPACK_IMPORTED_MODULE_2__.Y36(_cpanel_locale__WEBPACK_IMPORTED_MODULE_1__.g),_angular_core__WEBPACK_IMPORTED_MODULE_2__.Y36(_cpanel_angular_ui_jupiter__WEBPACK_IMPORTED_MODULE_3__.gq),_angular_core__WEBPACK_IMPORTED_MODULE_2__.Y36(_angular_router__WEBPACK_IMPORTED_MODULE_4__.F0))},ListComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_2__.Xpm({type:ListComponent,selectors:[["cp-calcontact-manager-list"]],decls:24,vars:13,consts:[[1,"table","table-striped"],["id","colHeads"],["id","colHead-name"],["href","javascript:;",3,"click"],["class","ri-arrow-down-s-line",4,"ngIf"],["class","ri-arrow-up-s-line",4,"ngIf"],["id","colHead-type"],["id","colHead-description"],["id","colHeadActions"],["height","300","colspan","5",4,"ngIf"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"ri-arrow-down-s-line"],[1,"ri-arrow-up-s-line"],["height","300","colspan","5"],["id","collectionsLoadingMsg",3,"title","isActive"],["colspan","4"],["class","colorBox",3,"style",4,"ngIf"],[1,"ucfirst"],["href","javascript:;",3,"title","click"],[1,"ri-xl","ri-pencil-fill"],[3,"ngClass"],[1,"colorBox"]],template:function e(r,t){1&r&&(_angular_core__WEBPACK_IMPORTED_MODULE_2__.TgZ(0,"table",0)(1,"thead",1)(2,"tr")(3,"th",2)(4,"a",3),_angular_core__WEBPACK_IMPORTED_MODULE_2__.NdJ("click",function(){return t.sort("name")}),_angular_core__WEBPACK_IMPORTED_MODULE_2__._uU(5),_angular_core__WEBPACK_IMPORTED_MODULE_2__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_2__.YNc(6,ListComponent_span_6_Template,1,0,"span",4),_angular_core__WEBPACK_IMPORTED_MODULE_2__.YNc(7,ListComponent_span_7_Template,1,0,"span",5),_angular_core__WEBPACK_IMPORTED_MODULE_2__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_2__.TgZ(8,"th",6)(9,"a",3),_angular_core__WEBPACK_IMPORTED_MODULE_2__.NdJ("click",function(){return t.sort("type")}),_angular_core__WEBPACK_IMPORTED_MODULE_2__._uU(10),_angular_core__WEBPACK_IMPORTED_MODULE_2__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_2__.YNc(11,ListComponent_span_11_Template,1,0,"span",4),_angular_core__WEBPACK_IMPORTED_MODULE_2__.YNc(12,ListComponent_span_12_Template,1,0,"span",5),_angular_core__WEBPACK_IMPORTED_MODULE_2__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_2__.TgZ(13,"th",7)(14,"a",3),_angular_core__WEBPACK_IMPORTED_MODULE_2__.NdJ("click",function(){return t.sort("description")}),_angular_core__WEBPACK_IMPORTED_MODULE_2__._uU(15),_angular_core__WEBPACK_IMPORTED_MODULE_2__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_2__.YNc(16,ListComponent_span_16_Template,1,0,"span",4),_angular_core__WEBPACK_IMPORTED_MODULE_2__.YNc(17,ListComponent_span_17_Template,1,0,"span",5),_angular_core__WEBPACK_IMPORTED_MODULE_2__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_2__.TgZ(18,"th",8),_angular_core__WEBPACK_IMPORTED_MODULE_2__._uU(19),_angular_core__WEBPACK_IMPORTED_MODULE_2__.qZA()()(),_angular_core__WEBPACK_IMPORTED_MODULE_2__.TgZ(20,"tbody"),_angular_core__WEBPACK_IMPORTED_MODULE_2__.YNc(21,ListComponent_tr_21_Template,2,2,"tr",9),_angular_core__WEBPACK_IMPORTED_MODULE_2__.YNc(22,ListComponent_tr_22_Template,3,1,"tr",10),_angular_core__WEBPACK_IMPORTED_MODULE_2__.YNc(23,ListComponent_tr_23_Template,14,7,"tr",11),_angular_core__WEBPACK_IMPORTED_MODULE_2__.qZA()()),2&r&&(_angular_core__WEBPACK_IMPORTED_MODULE_2__.xp6(5),_angular_core__WEBPACK_IMPORTED_MODULE_2__.hij(" ",t.locale.maketext("Name")," "),_angular_core__WEBPACK_IMPORTED_MODULE_2__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_2__.Q6J("ngIf",1===t.lastSortOrder&&"name"===t.lastSortProp),_angular_core__WEBPACK_IMPORTED_MODULE_2__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_2__.Q6J("ngIf",-1===t.lastSortOrder&&"name"===t.lastSortProp),_angular_core__WEBPACK_IMPORTED_MODULE_2__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_2__.hij(" ",t.locale.maketext("Type")," "),_angular_core__WEBPACK_IMPORTED_MODULE_2__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_2__.Q6J("ngIf",1===t.lastSortOrder&&"type"===t.lastSortProp),_angular_core__WEBPACK_IMPORTED_MODULE_2__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_2__.Q6J("ngIf",-1===t.lastSortOrder&&"type"===t.lastSortProp),_angular_core__WEBPACK_IMPORTED_MODULE_2__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_2__.hij(" ",t.locale.maketext("Description")," "),_angular_core__WEBPACK_IMPORTED_MODULE_2__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_2__.Q6J("ngIf",1===t.lastSortOrder&&"description"===t.lastSortProp),_angular_core__WEBPACK_IMPORTED_MODULE_2__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_2__.Q6J("ngIf",-1===t.lastSortOrder&&"description"===t.lastSortProp),_angular_core__WEBPACK_IMPORTED_MODULE_2__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_2__.hij(" ",t.locale.maketext("Actions")," "),_angular_core__WEBPACK_IMPORTED_MODULE_2__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_2__.Q6J("ngIf",t.loadingCollections),_angular_core__WEBPACK_IMPORTED_MODULE_2__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_2__.Q6J("ngIf",!t.collections.length&&!t.loadingCollections),_angular_core__WEBPACK_IMPORTED_MODULE_2__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_2__.Q6J("ngForOf",t.collections))},directives:[_angular_common__WEBPACK_IMPORTED_MODULE_5__.O5,_cpanel_angular_ui_jupiter__WEBPACK_IMPORTED_MODULE_3__.go,_angular_common__WEBPACK_IMPORTED_MODULE_5__.sg,_angular_common__WEBPACK_IMPORTED_MODULE_5__.mk],styles:["td[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{text-decoration:none}.ucfirst[_ngcontent-%COMP%]:first-letter{text-transform:capitalize}span.colorBox[_ngcontent-%COMP%]{display:inline-block;height:1rem;width:1rem;border-radius:.25rem}html[dir=ltr][_ngcontent-%COMP%]   span.colorBox[_ngcontent-%COMP%], [dir=ltr][_ngcontent-%COMP%]   span.colorBox[_ngcontent-%COMP%], [dir=ltr][_nghost-%COMP%]   span.colorBox[_ngcontent-%COMP%], html[dir=ltr][_nghost-%COMP%]   span.colorBox[_ngcontent-%COMP%], html[dir=ltr]   [_nghost-%COMP%]   span.colorBox[_ngcontent-%COMP%], [dir=ltr][_nghost-%COMP%]   span.colorBox[_ngcontent-%COMP%], [dir=ltr]   [_nghost-%COMP%]   span.colorBox[_ngcontent-%COMP%]{box-shadow:.5rem #000}html[dir=rtl][_ngcontent-%COMP%]   span.colorBox[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   span.colorBox[_ngcontent-%COMP%], [dir=rtl][_nghost-%COMP%]   span.colorBox[_ngcontent-%COMP%], html[dir=rtl][_nghost-%COMP%]   span.colorBox[_ngcontent-%COMP%], html[dir=rtl]   [_nghost-%COMP%]   span.colorBox[_ngcontent-%COMP%], [dir=rtl][_nghost-%COMP%]   span.colorBox[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   span.colorBox[_ngcontent-%COMP%]{box-shadow:-.5rem #000}span.disabledButan[_ngcontent-%COMP%]{color:gray;cursor:not-allowed}"]}),ListComponent})()},9360:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{ot:()=>CalendarService});var rxjs__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(2916),rxjs_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4850),_cpanel_api__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2291),_cpanel_api__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(7709),_cpanel_locale__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(269),_angular_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(4650),_cpanel_angular_api__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(8638),_cpanel_angular_ui_jupiter__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(6018);let CalendarService=(()=>{class CalendarService{constructor(uapi,_notifySvc,_locale){this.uapi=uapi,this._notifySvc=_notifySvc,this._locale=_locale,this.CRUDComponentFormState={owner:eval("window.REMOTE_USER"),name:"",path:"",color:"#de5c2e",description:"",type:"calendar",protected:!1},this.CRUDComponentMode="create",this.CRUDComponentValidationState="is-invalid",this.hideCreateBtn=!1}getPageDescription(){return this._locale.maketext(this.hideCreateBtn?"This is the editor view. Please input the details for the collection here.":"This interface allows you to create, rename, or delete calendars or address books for your account.")}submitUapiRequest(e){return this.uapi.post(e).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.U)(r=>r.success?r:(r.errors.length&&this._notifySvc.error(r.errors[0].message),!1)))}getCollectionList(){return this.submitUapiRequest(new _cpanel_api__WEBPACK_IMPORTED_MODULE_2__.j({namespace:"CPDAVD",method:"list_users",arguments:[new _cpanel_api__WEBPACK_IMPORTED_MODULE_3__.h("api.filter",!0),new _cpanel_api__WEBPACK_IMPORTED_MODULE_3__.h("api.filter_type","eq"),new _cpanel_api__WEBPACK_IMPORTED_MODULE_3__.h("api.filter_term",eval("window.REMOTE_USER")),new _cpanel_api__WEBPACK_IMPORTED_MODULE_3__.h("api.filter_column","user")]}))}manageCollection(e,r){const t={namespace:"CPDAVD",method:"manage_collection",arguments:[new _cpanel_api__WEBPACK_IMPORTED_MODULE_3__.h("account",r.owner),new _cpanel_api__WEBPACK_IMPORTED_MODULE_3__.h("action",e),new _cpanel_api__WEBPACK_IMPORTED_MODULE_3__.h("path",r.path),new _cpanel_api__WEBPACK_IMPORTED_MODULE_3__.h("collection_type",r.type),new _cpanel_api__WEBPACK_IMPORTED_MODULE_3__.h("name",r.name),new _cpanel_api__WEBPACK_IMPORTED_MODULE_3__.h("description",r.description)]};return r.color&&t.arguments.push(new _cpanel_api__WEBPACK_IMPORTED_MODULE_3__.h("calendar-color",r.color)),this.submitUapiRequest(new _cpanel_api__WEBPACK_IMPORTED_MODULE_2__.j(t))}resetFormState(){this.CRUDComponentFormState={owner:eval("window.REMOTE_USER"),name:"",path:"",color:"#de5c2e",description:"",type:"calendar",protected:!1},this.CRUDComponentMode="create",this.CRUDComponentValidationState="is-invalid"}}return CalendarService.\u0275fac=function e(r){return new(r||CalendarService)(_angular_core__WEBPACK_IMPORTED_MODULE_4__.LFG(_cpanel_angular_api__WEBPACK_IMPORTED_MODULE_5__.Tr),_angular_core__WEBPACK_IMPORTED_MODULE_4__.LFG(_cpanel_angular_ui_jupiter__WEBPACK_IMPORTED_MODULE_6__.gq),_angular_core__WEBPACK_IMPORTED_MODULE_4__.LFG(_cpanel_locale__WEBPACK_IMPORTED_MODULE_0__.g))},CalendarService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_4__.Yz7({token:CalendarService,factory:CalendarService.\u0275fac,providedIn:"root"}),CalendarService})();class CalendarMock{constructor(){this.CRUDComponentFormState={owner:"luser",name:"",path:"",color:"#de5c2e",description:"",type:"calendar",protected:!1},this.CRUDComponentMode="create",this.CRUDComponentValidationState="is-invalid",this.hideCreateBtn=!1}submitUapiRequest(r){return rxjs__WEBPACK_IMPORTED_MODULE_7__.y.create(t=>r)}getCollectionList(){return this.submitUapiRequest(this.mockedCollectionList)}manageCollection(){return this.submitUapiRequest(this.mockedManageReturn)}resetFormState(){this.CRUDComponentFormState={owner:"luser",name:"",path:"",color:"#de5c2e",description:"",type:"calendar",protected:!1},this.CRUDComponentMode="create",this.CRUDComponentValidationState="is-invalid"}getPageDescription(){return"This is never consulted but prevents exceptions. YOLO."}}const CalendarServiceMock={provide:CalendarService,useClass:CalendarMock}},2321:(e,r,t)=>{var i=t(1481),_=t(4650),u=t(6895),d=t(348),E=t(4793),g=t(269),P=t(9894),M=t(9360),c=t(4006),l=t(6018),O=t(2502),C=(()=>{return(a=C||(C={})).left="ri-arrow-left-line",a.right="ri-arrow-right-line",C;var a})();function m(a,s){if(1&a&&(_.TgZ(0,"div",7)(1,"cp-form-field",19)(2,"div",9),_._uU(3),_.qZA(),_.TgZ(4,"select",20)(5,"option",21),_._uU(6),_.qZA(),_.TgZ(7,"option",22),_._uU(8),_.qZA()()()()),2&a){const o=_.oxw();_.xp6(1),_.Q6J("isRequired",!0)("showInfoToggle",!0)("showAllHelp",o.showAllHelp)("labelText",o.locale.maketext("Collection Type")),_.xp6(2),_.hij(" ",o.locale.maketext("Collection type can be a Calendar or Address Book.")," "),_.xp6(3),_.hij(" ",o.locale.maketext("Calendar")," "),_.xp6(2),_.hij(" ",o.locale.maketext("Address Book")," ")}}function D(a,s){if(1&a&&(_.TgZ(0,"div",23)(1,"cp-form-field",24)(2,"div",9),_._uU(3),_.qZA(),_._UZ(4,"input",25),_.qZA()()),2&a){const o=_.oxw();_.xp6(1),_.Q6J("isRequired",!1)("labelText",o.locale.maketext("Color"))("showInfoToggle",!0)("showAllHelp",o.showAllHelp)("control",o.createCollectionForm.get("color")),_.xp6(2),_.hij(" ",o.locale.maketext("Provide a color code for the calendar.")," ")}}const h=function(a){return{"ng-form-validated":a}},T=[{path:"editor",component:(()=>{class a{constructor(o,n,p,K,W){this.router=o,this.calendarService=n,this._notifySvc=p,this.locale=K,this.location=W,this.showAllHelp=!1,this.submitBtn={id:"submitBtn",buttonState:l.BN.enabled,type:"submit"},this.backBtn={id:"backBtn",type:"button",cssClass:"m-2",buttonState:l.BN.enabled,buttonVariant:l.Wu.iconLink},this.calendarService.hideCreateBtn=!0}ngOnInit(){this.createView="create"===this.calendarService.CRUDComponentMode,this.formVerb=this.calendarService.CRUDComponentMode,this.arrowDirection=this.returnArrowDir,this.headerText=this.locale.maketext(`${this.formVerb.charAt(0).toUpperCase()+this.formVerb.slice(1)} Collection`),this.createCollectionForm=new c.cw({type:new c.NI(`${this.calendarService.CRUDComponentFormState.type}`),name:new c.NI(`${this.calendarService.CRUDComponentFormState.name}`),color:new c.NI(`${this.calendarService.CRUDComponentFormState.color}`),description:new c.NI(`${this.calendarService.CRUDComponentFormState.description}`)}),this.setValidators(this.createCollectionForm),this.showColorInputHandler(this.createCollectionForm.get("type").value),this.formTypeSubscription=this.createCollectionForm.get("type").valueChanges.subscribe(o=>{this.showColorInputHandler(o)})}ngOnDestroy(){this.formTypeSubscription.unsubscribe()}showColorInputHandler(o){this.showColorInput="calendar"===o}toggleHelpText(){this.showAllHelp=!this.showAllHelp}setValidators(o){o.get("type").setValidators([O.dt.required(this.locale.maketext("You [output,strong,must] choose a type."))]),o.get("name").setValidators([O.dt.required(this.locale.maketext("You [output,strong,must] provide a collection name."))])}updateCalendarServiceFormValues(o){this.calendarService.CRUDComponentFormState.type=o.get("type").value,this.calendarService.CRUDComponentFormState.name=o.get("name").value,this.calendarService.CRUDComponentFormState.color=o.get("color").value,this.calendarService.CRUDComponentFormState.description=o.get("description").value}backNav(){this.location.back()}get returnArrowDir(){return this.locale.isRtl?C.right:C.left}doCollMng(){this.createCollectionForm.invalid||(this.submitBtn.buttonState=l.BN.loading,this.updateCalendarServiceFormValues(this.createCollectionForm),this.calendarService.manageCollection(this.calendarService.CRUDComponentMode,this.calendarService.CRUDComponentFormState).subscribe(o=>{1===o.status&&(this._notifySvc.success(o.messages[0].message),this.router.navigate(["list"])),this.submitBtn.buttonState=l.BN.enabled}))}}return a.\u0275fac=function(o){return new(o||a)(_.Y36(E.F0),_.Y36(M.ot),_.Y36(l.gq),_.Y36(g.g),_.Y36(u.Ye))},a.\u0275cmp=_.Xpm({type:a,selectors:[["cp-calcontact-manager-crud"]],decls:29,vars:31,consts:[[1,"row"],["id","collection-form",1,"col-sm-6",3,"formGroup","ngClass","ngSubmit"],["ngForm","ngForm"],["id","header",3,"formHeaderText","showHelpLink","toggleFormHelp"],[1,"panel","card","panel-default"],[1,"panel-body","card-block","card-body"],["class","mb-3",4,"ngIf"],[1,"mb-3"],["id","name","labelFor","nameInput",3,"labelText","isRequired","showInfoToggle","showAllHelp","control"],["label-help-text",""],["input-content","","type","text","id","nameInput","formControlName","name",1,"form-control"],["class","mb-3","class","colorFormAligner",4,"ngIf"],["labelFor","descriptionInput","id","description",3,"labelText","showInfoToggle","control","showAllHelp"],["input-content","","type","text","id","descriptionInput","formControlName","description",1,"form-control"],["id","crud-footer-container"],[3,"id","buttonState","type"],[3,"id","cssClass","buttonState","type","buttonVariant","onBtnClick"],[3,"ngClass"],[1,"icon-btn-link-text"],["labelFor","typeInput","id","type",3,"isRequired","showInfoToggle","showAllHelp","labelText"],["input-content","","formControlName","type","id","typeInput",1,"form-select"],["selected","selected","value","calendar"],["value","addressbook"],[1,"colorFormAligner"],["labelFor","colorInput","id","color",3,"isRequired","labelText","showInfoToggle","showAllHelp","control"],["input-content","","formControlName","color","type","color","id","colorInput",1,"form-control"]],template:function(o,n){if(1&o&&(_.TgZ(0,"div",0)(1,"form",1,2),_.NdJ("ngSubmit",function(){return n.doCollMng()}),_.TgZ(3,"cp-form-header",3),_.NdJ("toggleFormHelp",function(){return n.toggleHelpText()}),_.qZA(),_.TgZ(4,"div",4)(5,"div",5),_.YNc(6,m,9,7,"div",6),_.TgZ(7,"div",7)(8,"cp-form-field",8)(9,"div",9),_._uU(10),_.qZA(),_._UZ(11,"input",10),_.qZA()(),_.YNc(12,D,5,6,"div",11),_.TgZ(13,"div",7)(14,"cp-form-field",12)(15,"div",9),_._uU(16),_.TgZ(17,"em"),_._uU(18),_.qZA(),_._uU(19," ) "),_.qZA(),_._UZ(20,"textarea",13),_.qZA()()()(),_.TgZ(21,"cp-form-footer")(22,"div",14)(23,"cp-button",15),_._uU(24),_.qZA(),_.TgZ(25,"cp-button",16),_.NdJ("onBtnClick",function(){return n.backNav()}),_._UZ(26,"i",17),_.TgZ(27,"span",18),_._uU(28),_.qZA()()()()()()),2&o){const p=_.MAs(2);_.xp6(1),_.Q6J("formGroup",n.createCollectionForm)("ngClass",_.VKq(29,h,p.submitted)),_.xp6(2),_.Q6J("formHeaderText",n.headerText)("showHelpLink",!0),_.xp6(3),_.Q6J("ngIf",n.createView),_.xp6(2),_.Q6J("labelText",n.locale.maketext("Collection Name"))("isRequired",!0)("showInfoToggle",!0)("showAllHelp",n.showAllHelp)("control",n.createCollectionForm.get("name")),_.xp6(2),_.hij(" ",n.locale.maketext("Provide a name for the collection.")," "),_.xp6(2),_.Q6J("ngIf",n.showColorInput),_.xp6(2),_.Q6J("labelText",n.locale.maketext("Description"))("showInfoToggle",!0)("control",n.createCollectionForm.get("description"))("showAllHelp",n.showAllHelp),_.xp6(2),_.hij(" ",n.locale.maketext("Describe the collection.")," ( "),_.xp6(2),_.Oqu(n.locale.maketext("Optional.")),_.xp6(5),_.Q6J("id",n.submitBtn.id)("buttonState",n.submitBtn.buttonState)("type",n.submitBtn.type),_.xp6(1),_.hij("",n.locale.maketext("Submit")," "),_.xp6(1),_.Q6J("id",n.backBtn.id)("cssClass",n.backBtn.cssClass)("buttonState",n.backBtn.buttonState)("type",n.backBtn.type)("buttonVariant",n.backBtn.buttonVariant),_.xp6(1),_.Q6J("ngClass",n.arrowDirection),_.xp6(2),_.hij(" ",n.locale.maketext("Go Back")," ")}},directives:[c._Y,c.JL,c.sg,u.mk,l.kP,u.O5,l.hg,c.EJ,c.JJ,c.u,c.YN,c.Kr,c.Fj,l.WX,l.r0],styles:["div.colorFormAligner[_ngcontent-%COMP%]{line-height:2.5rem;margin-bottom:.5rem}#colorInput[_ngcontent-%COMP%]{height:2.5rem;width:3.5rem;vertical-align:middle}#crud-footer-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;text-wrap:nowrap}@media (max-width: 900px){#crud-footer-container[_ngcontent-%COMP%]{flex-direction:column-reverse}}.spinner[_ngcontent-%COMP%]{display:inline-block;animation:spin 1s infinite linear}@keyframes spin{0%{transform:scale(1) rotate(0)}to{transform:scale(1) rotate(360deg)}}"]}),a})(),data:{breadcrumb:{id:"editor"}}},{path:"list",component:P.ns,data:{breadcrumb:{id:"list"}}},{path:"",redirectTo:"list",pathMatch:"full"},{path:"**",redirectTo:"list",pathMatch:"full"}];let U=(()=>{class a{constructor(o,n){this.breadcrumbService=o,this.locale=n;const p={list:{displayName:n.maketext("List Collections"),id:"list",link:n.maketext("Go to the List Collections interface."),longName:n.maketext("List of existing Collections."),path:"list",parentId:null},editor:{displayName:n.maketext("Collection Editor"),id:"editor",link:n.maketext("Go to the Collection Editor interface."),longName:n.maketext("Create or edit a Collection."),path:"editor",parentId:"list"}};this.breadcrumbService.initializeBreadcrumbs(),this.breadcrumbService.flattenedRoutesData=Object.values(p)}}return a.\u0275fac=function(o){return new(o||a)(_.LFG(l.pm),_.LFG(g.g))},a.\u0275mod=_.oAB({type:a}),a.\u0275inj=_.cJS({imports:[[E.Bz.forRoot(T,{useHash:!0,enableTracing:!1,relativeLinkResolution:"legacy"})],E.Bz]}),a})();var f=t(1607);function A(a,s){if(1&a){const o=_.EpF();_.TgZ(0,"div",4)(1,"cp-button",5),_.NdJ("onBtnClick",function(){return _.CHM(o),_.oxw().gotoEditor()}),_._uU(2),_.qZA()()}if(2&a){const o=_.oxw();_.xp6(1),_.Q6J("id",o.createBtn.id)("type",o.createBtn.type),_.xp6(1),_.hij(" ",o.locale.maketext("Create")," ")}}let R=(()=>{class a{constructor(o,n,p){this.calendarService=o,this.router=n,this.locale=p,this.title="calendar-contact-management",this.notifyPosition=l.vK.topRight,this.docUrl="https://go.cpanel.net/calcontact-management",this.createBtn={id:"createBtn",type:"link"},(0,f.Dc)("bs5")}gotoEditor(){this.calendarService.resetFormState(),this.router.navigate(["editor"])}}return a.\u0275fac=function(o){return new(o||a)(_.Y36(M.ot),_.Y36(E.F0),_.Y36(g.g))},a.\u0275cmp=_.Xpm({type:a,selectors:[["cp-calcontact-manager"]],decls:7,vars:4,consts:[[3,"position"],["id","page-intro"],[3,"innerHTML"],["class","create-btn-container",4,"ngIf"],[1,"create-btn-container"],[3,"id","type","onBtnClick"]],template:function(o,n){1&o&&(_._UZ(0,"cp-notification-list",0),_.TgZ(1,"div",1)(2,"p"),_._uU(3),_.qZA(),_._UZ(4,"p",2),_.qZA(),_.YNc(5,A,3,3,"div",3),_._UZ(6,"router-outlet")),2&o&&(_.Q6J("position",n.notifyPosition),_.xp6(3),_.hij(" ",n.calendarService.getPageDescription()," "),_.xp6(1),_.Q6J("innerHTML",n.locale.maketext("Visit [output,url,_1,our documentation] for more information.",n.docUrl),_.oJD),_.xp6(1),_.Q6J("ngIf",!n.calendarService.hideCreateBtn))},directives:[l.ZP,u.O5,l.r0,E.lC],styles:[".create-btn-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-bottom:var(--cp-spacer-3)}html[dir=ltr][_ngcontent-%COMP%]   .right-float[_ngcontent-%COMP%], [dir=ltr][_ngcontent-%COMP%]   .right-float[_ngcontent-%COMP%], [dir=ltr][_nghost-%COMP%]   .right-float[_ngcontent-%COMP%], html[dir=ltr][_nghost-%COMP%]   .right-float[_ngcontent-%COMP%], html[dir=ltr]   [_nghost-%COMP%]   .right-float[_ngcontent-%COMP%], [dir=ltr][_nghost-%COMP%]   .right-float[_ngcontent-%COMP%], [dir=ltr]   [_nghost-%COMP%]   .right-float[_ngcontent-%COMP%]{float:right}html[dir=rtl][_ngcontent-%COMP%]   .right-float[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .right-float[_ngcontent-%COMP%], [dir=rtl][_nghost-%COMP%]   .right-float[_ngcontent-%COMP%], html[dir=rtl][_nghost-%COMP%]   .right-float[_ngcontent-%COMP%], html[dir=rtl]   [_nghost-%COMP%]   .right-float[_ngcontent-%COMP%], [dir=rtl][_nghost-%COMP%]   .right-float[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .right-float[_ngcontent-%COMP%]{float:left}html[dir=rtl][_ngcontent-%COMP%]   .right-float[_ngcontent-%COMP%]{float:left}"]}),a})();var L=t(529),B=t(793),I=t(6178),v=t(9474);let b=(()=>{class a{}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=_.oAB({type:a,bootstrap:[R]}),a.\u0275inj=_.cJS({providers:[M.ot],imports:[[i.b2,u.ez,U,l.zf,B.xD,L.JF,I.z8.forRoot(),v.A0,c.u5,c.UX,l.m8,l.M7,l.kx,l.kM,l.wL,d.m,l.u5,l.pR,l.hJ,l.wH]]}),a})();(0,_.G48)(),i.q6().bootstrapModule(b).catch(a=>console.error(a))}},e=>{e.O(0,[647,534],()=>e(e.s=2321)),e.O()}]);