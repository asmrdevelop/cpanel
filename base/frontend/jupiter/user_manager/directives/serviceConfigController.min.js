define(["angular","cjt/util/test"],(function(i,n){i.module("App").controller("serviceConfigController",["$scope","$attrs",function(i,e){i.needsConflictResolution=function(){return i.hasConflict()&&!i.isResolved()},i.hasConflict=function(){return i.service&&i.service.isCandidate},i.isResolved=function(){return i.service.willLink||i.service.willDismiss},i.hasLinkAction=function(){return!!e.linkAction},i.setDismiss=function(){i.service.willDismiss=!0,i.service.enabled=!1,i.validateConflictResolution()},i.setLink=function(){i.service.willLink=!0,i.service.enabled=!0,i.validateConflictResolution()},i.clearConflictResolution=function(){i.service.willLink=i.service.willDismiss=!1,i.validateConflictResolution()},i.runLinkAction=function(){if(i.isLinking=!0,i.setLink(),i.hasLinkAction()){var e=i.linkAction({service:i.service});return n.isQPromise(e)?e.finally((function(){i.isLinking=!1})):i.isLinking=!1,e}i.isLinking=!1},i.validateConflictResolution=function(){i.conflictResolutionRequired&&i.ngModel.$setValidity("conflictCleared",!i.needsConflictResolution())},i.toggleConflictSummary=function(){i.isSummaryCollapsed=!i.isSummaryCollapsed},i.isSummaryCollapsed=!0}])}));