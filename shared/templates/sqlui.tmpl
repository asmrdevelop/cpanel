[%# Parameters:
    db_engine    ('mysql' or 'postgresql')
-%]

[%
USE CpanelDB;

SET PAGE = {
    db_prefix => CpanelDB.dbownerprefix(),
    db_engine => db_engine || CPANEL.CPVAR.db_engine,
    rename_url => rename_url || CPANEL.CPVAR.rename_url,
};
-%]

<style type="text/css">
.rename-dialog {
    width: 500px;
}
</style>


<script type="text/x-handlebars-template" id="sql_rename_template">
<div class="section">
    <div class="rename-warning-area"></div>
    <div class="oldname-unprefixed-notice-area"></div>
    <div class="details-error-notice"></div>
</div>
<div class="section">
    <div class="form-group">
        <div class="row">
            <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
                <label>
                    [% locale.maketext('Old name:') %]
                </label>
                <div class="input-group">
                    {{oldname}}
                </div>
            </div>
        </div>
    </div>
    <div class="form-group">
        <div class="row">
            <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
                <label for="rename_newname">
                    [% locale.maketext('New name:') %]
                </label>
                <div id="newname_form_group">
                [% IF CpanelDB.dbownerprefix().length %]
                    <div class="input-group">
                        <span class="input-group-addon" id="dbPrefix">
                            [% CpanelDB.dbownerprefix() %]
                        </span>
                        <input id="rename_newname"
                            name="newname"
                            class="form-control"
                            value="{{oldname_no_prefix}}" />
                    </div>
                [% ELSE %]
                    <input id="rename_newname"
                        name="newname"
                        class="form-control"
                        value="{{oldname}}" />
                [% END %]
                </div>
            </div>
            <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
                <span class="hide">
                    <span id="rename_newname_error" class="no_panel"></span>
                </span>
                <div id="newname_validation_container"
                    class="validation_errors_div hide">
                    <ul class="validation_errors_ul">
                        <li class="validation_errors_li">
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
{{#if is_postgresql_name}}
<p>[% locale.maketext('PostgreSQL uses a user’s name to secure the user’s password internally, so you must set the user’s password again after you rename the user.'); ' '; locale.maketext('After you rename this user, your browser will redirect you to a screen so you can set the password.') %]</p>
{{/if}}
</script>

<script>
window.PAGE = [% JSON.stringify(PAGE) %];
</script>
<script>
[%
IF CPANEL.is_debug_mode_enabled();
    INSERT 'handlebars/handlebars.js';
ELSE;
    INSERT 'handlebars/handlebars.min.js';
END;
%]
</script>
[% SET lex_path = locale.cpanel_get_lex_path('/usr/local/cpanel/base/cjt/sql.js', '/cjt/sql.js') %]
[% IF lex_path %]<script src="[% lex_path %]"></script>[% END %]
<script src="[% CPANEL.get_js_url('/cjt/sql.js') %]"></script>
[% SET lex_path = locale.cpanel_get_lex_path('/usr/local/cpanel/base/sharedjs/sqlui.js', '/sharedjs/sqlui.js') %]
[% IF lex_path %]<script src="[% lex_path %]"></script>[% END %]
<script src="[% CPANEL.get_js_url('/sharedjs/sqlui.js') %]"></script>
