"format cjs";"use strict";(function(root,factory){if(typeof define==="function"&&define.amd){define(["angular","jquery-minicolors"],factory)}else if(typeof exports==="object"){module.exports=factory(require("angular"),require("jquery-minicolors"));module.exports="minicolors"}else{root.angularMinicolors=factory(root.angular,root.jqueryMinicolors)}})(this,function(angular){angular.module("minicolors",[]);angular.module("minicolors").provider("minicolors",function(){this.defaults={theme:"bootstrap",position:"top left",defaultValue:"",animationSpeed:50,animationEasing:"swing",change:null,changeDelay:0,control:"hue",hide:null,hideSpeed:100,inline:false,letterCase:"lowercase",opacity:false,show:null,showSpeed:100};this.$get=function(){return this}});angular.module("minicolors").directive("minicolors",["minicolors","$timeout",function(minicolors,$timeout){return{require:"?ngModel",restrict:"A",priority:1,link:function(scope,element,attrs,ngModel){var inititalized=false;var getSettings=function(){var config=angular.extend({},minicolors.defaults,scope.$eval(attrs.minicolors));return config};function isValidColor(color){return/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(color)}function canSetValue(){return element.data("minicolors-settings")!=null}function setMinicolorsValue(color){if(isValidColor(color)&&canSetValue()){element.minicolors("value",color)}}ngModel.$render=function(){$timeout(function(){var color=ngModel.$viewValue;setMinicolorsValue(color)},0,false)};var initMinicolors=function(){if(!ngModel){return}var settings=getSettings();settings.change=function(hex){scope.$apply(function(){if(isValidColor(hex))ngModel.$setViewValue(hex)})};if(element.hasClass("minicolors-input")){element.minicolors("destroy");element.off("blur",onBlur)}element.minicolors(settings);element.on("blur",onBlur);if(!inititalized){$timeout(function(){var color=ngModel.$viewValue;setMinicolorsValue(color)},0);inititalized=true;return}function onBlur(e){scope.$apply(function(){var color=element.minicolors("value");if(isValidColor(color))ngModel.$setViewValue(color)})}};initMinicolors();var unbindWatch=scope.$watch(getSettings,initMinicolors,true);scope.$on("$destroy",function(){if(element.hasClass("minicolors-input")){element.minicolors("destroy");element.remove()}if(unbindWatch)unbindWatch()})}}}])});