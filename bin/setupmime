#!/usr/local/cpanel/3rdparty/bin/perl

# cpanel - bin/setupmime                           Copyright 2022 cPanel, L.L.C.
#                                                           All rights reserved.
# copyright@cpanel.net                                         http://cpanel.net
# This code is subject to the cPanel license. Unauthorized copying is prohibited

package bin::setupmime;

use strict;
use warnings;

use Cpanel::SysMime ();

__PACKAGE__->script() unless caller();

sub script {

    # TODO: This modulino needs to have its core functionality moved to
    # a module and have its test coverage improved.  Once done the
    # install/* scripts should call the module directly instead of
    # loading this modulino.
    Cpanel::SysMime::ensure_mimetype(
        {
            'application/x-img'              => ['img'],
            'application/octet-stream'       => [ 'iso', 'dmg' ],
            'application/x-gzip'             => ['tgz'],
            'application/x-bzip'             => ['tbz'],
            'audio/mp4'                      => [ 'm4p', 'm4a', 'mp4' ],
            'audio/x-mpegurl'                => ['m3u'],
            'audio/x-ms-wma'                 => ['wma'],
            'audio/x-ms-wax'                 => ['wax'],
            'text/plain'                     => ['txt'],
            'application/perl'               => [ 'pl', 'plx', 'ppl', 'perl', 'pm' ],
            'application/ruby'               => ['rb'],
            'application/cgi'                => ['cgi'],
            'text/html'                      => ['shtml'],
            'application/x-httpd-ea-php54'   => [ 'php', 'php5' ],
            'application/x-httpd-ea-php55'   => [ 'php', 'php5' ],
            'application/x-httpd-ea-php56'   => [ 'php', 'php5' ],
            'application/x-httpd-ea-php70'   => [ 'php', 'php7' ],
            'application/x-httpd-ea-php71'   => [ 'php', 'php7' ],
            'application/x-httpd-ea-php72'   => [ 'php', 'php7' ],
            'application/x-httpd-ea-php73'   => [ 'php', 'php7' ],
            'application/x-httpd-ea-php74'   => [ 'php', 'php7' ],
            'application/x-httpd-ea-php80'   => [ 'php', 'php8' ],
            'application/x-httpd-php-source' => ['phps'],
            'text/x-registry'                => ['reg'],
            'text/x-config'                  => [ 'cnf', 'conf' ],
            'text/x-log'                     => ['log'],
            'text/vbscript'                  => ['vbs'],
            'text/x-sql'                     => ['sql'],
        }
    );
    return;

}
