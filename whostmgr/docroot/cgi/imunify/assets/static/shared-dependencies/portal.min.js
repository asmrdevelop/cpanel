System.register(["@angular/core","@angular/common"],(function(t){"use strict";var e,o,s,n,a;return{setters:[function(t){e=t,t.Directive,t.Inject,t.Output,t.NgModule,o=t.ElementRef,s=t.Injector,n=t.EventEmitter},function(t){a=t.DOCUMENT}],execute:function(){class i{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}t("Portal",i);class r extends i{constructor(t,e,o,s){super(),this.component=t,this.viewContainerRef=e,this.injector=o,this.componentFactoryResolver=s}}t("ComponentPortal",r);class c extends i{constructor(t,e,o,s){super(),this.templateRef=t,this.viewContainerRef=e,this.context=o,this.injector=s}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}t("TemplatePortal",c);class h extends i{constructor(t){super(),this.element=t instanceof o?t.nativeElement:t}}t("DomPortal",h);class l{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof r?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof c?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof h?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}t("BasePortalOutlet",l);t("BasePortalHost",class extends l{});class d extends l{constructor(t,e,o,s,n){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=o,this._defaultInjector=s,this.attachDomPortal=t=>{this._document;const e=t.element;e.parentNode;const o=this._document.createComment("dom-portal");e.parentNode.insertBefore(o,e),this.outletElement.appendChild(e),this._attachedPortal=t,super.setDisposeFn((()=>{o.parentNode&&o.parentNode.replaceChild(e,o)}))},this._document=n}attachComponentPortal(t){const e=t.componentFactoryResolver||this._componentFactoryResolver;const o=e.resolveComponentFactory(t.component);let n;return t.viewContainerRef?(n=t.viewContainerRef.createComponent(o,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn((()=>n.destroy()))):(n=o.create(t.injector||this._defaultInjector||s.NULL),this._appRef.attachView(n.hostView),this.setDisposeFn((()=>{this._appRef.viewCount>0&&this._appRef.detachView(n.hostView),n.destroy()}))),this.outletElement.appendChild(this._getComponentRootNode(n)),this._attachedPortal=t,n}attachTemplatePortal(t){let e=t.viewContainerRef,o=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return o.rootNodes.forEach((t=>this.outletElement.appendChild(t))),o.detectChanges(),this.setDisposeFn((()=>{let t=e.indexOf(o);-1!==t&&e.remove(t)})),this._attachedPortal=t,o}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}t("DomPortalOutlet",d);t("DomPortalHost",class extends d{});class p extends c{constructor(t,e){super(t,e)}}t("CdkPortal",p),p.\u0275fac=function(t){return new(t||p)(e.\u0275\u0275directiveInject(e.TemplateRef),e.\u0275\u0275directiveInject(e.ViewContainerRef))},p.\u0275dir=e.\u0275\u0275defineDirective({type:p,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],features:[e.\u0275\u0275InheritDefinitionFeature]});class u extends p{}t("TemplatePortalDirective",u),u.\u0275fac=function(){let t;return function(o){return(t||(t=e.\u0275\u0275getInheritedFactory(u)))(o||u)}}(),u.\u0275dir=e.\u0275\u0275defineDirective({type:u,selectors:[["","cdk-portal",""],["","portal",""]],exportAs:["cdkPortal"],features:[e.\u0275\u0275ProvidersFeature([{provide:p,useExisting:u}]),e.\u0275\u0275InheritDefinitionFeature]});class m extends l{constructor(t,e,o){super(),this._componentFactoryResolver=t,this._viewContainerRef=e,this._isInitialized=!1,this.attached=new n,this.attachDomPortal=t=>{this._document;const e=t.element;e.parentNode;const o=this._document.createComment("dom-portal");t.setAttachedHost(this),e.parentNode.insertBefore(o,e),this._getRootNode().appendChild(e),this._attachedPortal=t,super.setDisposeFn((()=>{o.parentNode&&o.parentNode.replaceChild(e,o)}))},this._document=o}get portal(){return this._attachedPortal}set portal(t){(!this.hasAttached()||t||this._isInitialized)&&(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const e=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,o=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),s=e.createComponent(o,e.length,t.injector||e.injector);return e!==this._viewContainerRef&&this._getRootNode().appendChild(s.hostView.rootNodes[0]),super.setDisposeFn((()=>s.destroy())),this._attachedPortal=t,this._attachedRef=s,this.attached.emit(s),s}attachTemplatePortal(t){t.setAttachedHost(this);const e=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn((()=>this._viewContainerRef.clear())),this._attachedPortal=t,this._attachedRef=e,this.attached.emit(e),e}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}t("CdkPortalOutlet",m),m.\u0275fac=function(t){return new(t||m)(e.\u0275\u0275directiveInject(e.ComponentFactoryResolver),e.\u0275\u0275directiveInject(e.ViewContainerRef),e.\u0275\u0275directiveInject(a))},m.\u0275dir=e.\u0275\u0275defineDirective({type:m,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[e.\u0275\u0275InheritDefinitionFeature]});class f extends m{}t("PortalHostDirective",f),f.\u0275fac=function(){let t;return function(o){return(t||(t=e.\u0275\u0275getInheritedFactory(f)))(o||f)}}(),f.\u0275dir=e.\u0275\u0275defineDirective({type:f,selectors:[["","cdkPortalHost",""],["","portalHost",""]],inputs:{portal:["cdkPortalHost","portal"]},exportAs:["cdkPortalHost"],features:[e.\u0275\u0275ProvidersFeature([{provide:m,useExisting:f}]),e.\u0275\u0275InheritDefinitionFeature]});class _{}t("PortalModule",_),_.\u0275fac=function(t){return new(t||_)},_.\u0275mod=e.\u0275\u0275defineNgModule({type:_}),_.\u0275inj=e.\u0275\u0275defineInjector({});t("PortalInjector",class{constructor(t,e){this._parentInjector=t,this._customTokens=e}get(t,e){const o=this._customTokens.get(t);return void 0!==o?o:this._parentInjector.get(t,e)}})}}}));
