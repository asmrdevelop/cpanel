(function(){var EVENT=YAHOO.util.Event,DOM=YAHOO.util.Dom,lastNotice=null;var updateSpamdConfigSuccess=function(o){lastNotice=new CPANEL.ajax.Dynamic_Notice({content:LOCALE.maketext("Spamd startup configuration successfully updated."),level:"success"})};var updateSpamdConfigFailure=function(o){lastNotice=new CPANEL.ajax.Dynamic_Notice({content:LOCALE.maketext("Spamd startup configuration not updated: [_1]",o.cpanel_error.html_encode()),level:"error"})};var updateSpamdConfig=function(mouseEvt,data){lastNotice=new CPANEL.ajax.Dynamic_Notice({content:LOCALE.maketext("Attempting to save Spamd startup configuration."),level:"info"});var allowedIpsValue=DOM.get("allowedips").value;var maxconnperchildValue=DOM.get("maxconnperchild").value;var maxchildrenValue=DOM.get("maxchildren").value;var timeouttcpValue=DOM.get("timeouttcp").value;var timeoutchildValue=DOM.get("timeoutchild").value;CPANEL.api({application:"whm",func:"save_spamd_config",data:{allowedips:allowedIpsValue,maxconnperchild:maxconnperchildValue,maxchildren:maxchildrenValue,timeouttcp:timeouttcpValue,timeoutchild:timeoutchildValue},callback:{success:updateSpamdConfigSuccess,failure:updateSpamdConfigFailure}})};var initialize=function(){EVENT.addListener("saveButton","click",updateSpamdConfig,{})};EVENT.onDOMReady(initialize)})();
