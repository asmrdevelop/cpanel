define("app/services/yumAPI",["angular","jquery","lodash","cjt/util/locale","cjt/util/parse","cjt/io/api","cjt/io/whm-v1-request","cjt/io/whm-v1"],(function(e,n,t,o,r,i,a,l){return e.module("App").factory("YumAPI",["$q",function(e){var n={run_update:function(n){var t=e.defer(),o=new a.Class;return o.initialize("","package_manager_upgrade"),o.addArgument("kernel",n),i.promise(o.getRunArguments()).done((function(e){e=e.parsedResponse,t.resolve(e.raw.data)})),t.promise},tailing_log:function(n,t){var o=e.defer(),r=new a.Class;return r.initialize("","package_manager_get_build_log"),r.addArgument("build",n),r.addArgument("offset",t),i.promise(r.getRunArguments()).done((function(e){e=e.parsedResponse,o.resolve(e.raw.data)})),o.promise}};return n}])})),define("app/views/landing",["angular","jquery","cjt/util/locale","cjt/util/parse","uiBootstrap","app/services/yumAPI","cjt/directives/actionButtonDirective"],(function(e,n,t,o){var r=e.module("App");r.controller("ModalInstanceCtrl",["$scope","$uibModalInstance",function(e,n){e.closeModal=function(){n.close()},e.runIt=function(){n.close(!0)}}]),r.controller("landing",["$scope","$rootScope","$location","$anchorScroll","$routeParams","$q","spinnerAPI","alertService","YumAPI","$uibModal",function(e,n,o,r,i,a,l,c,s,u){function d(e){document.body.removeChild(e.target)}e.update=function(){u.open({templateUrl:"updateModalContent.tmpl",controller:"ModalInstanceCtrl"}).result.then((function(n){n&&e.runUpdate()}))},e.runUpdate=function(){e.realTimeLog="",e.realTimeLogDisplay="",l.start("runningSpinner"),e.running=!0,s.run_update(e.kernel).then((function(n){e.buildID=n.build,e.currentTailingPosition=0,e.errorDetected=!1,e.tailing()}))},e.tailing=function(){s.tailing_log(e.buildID,e.currentTailingPosition).then((function(n){for(var o=0;o<n.content.length;o++)n.content[o]!=="-- "+e.buildID+" --"?n.content[o]!=="-- /"+e.buildID+" --"?(e.realTimeLog+=n.content[o]+"\r\n",/Error:.*/gm.test(n.content[o])&&(n.content[o]="<span class='text-danger'>"+n.content[o]+"</span>",e.errorDetected=!0),n.content[o]=n.content[o].replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/'/gm,"&#39;").replace(/"/gm,"&quot;"),n.content[o]!=="-- error("+e.buildID+") --"?n.content[o]!=="-- /error("+e.buildID+") --"?(e.inErrorMode&&(n.content[o]="<span class='text-danger'>"+n.content[o]+"</span>"),e.realTimeLogDisplay+=n.content[o]+"\r\n"):e.inErrorMode=!1:(e.inErrorMode=!0,e.errorDetected=!0)):(e.realTimeLog+=t.maketext("System update process has finished.")+"\r\n",e.realTimeLogDisplay+="<span class='text-success'><strong>"+t.maketext("System update process has finished.")+"</strong></span>\r\n"):(e.realTimeLog+=t.maketext("System update process has started.")+"\r\n",e.realTimeLogDisplay+="<span class='text-success'><strong>"+t.maketext("System update process has started.")+"</strong></span>\r\n");window.setTimeout((function(){r()}),100),e.currentTailingPosition=n.offset,n.still_running?window.setTimeout(e.tailing(),100):(l.stop("runningSpinner"),e.finished=!0,e.running=!1)}))},e.saveLog=function(){var n=e.realTimeLog,t=new Blob([n],{type:"text/plain"}),o=document.createElement("a");o.download="log.txt",o.innerHTML="My Hidden Link",window.URL=window.URL||window.webkitURL,o.href=window.URL.createObjectURL(t),o.target="_blank",o.onclick=d,o.style.display="none",document.body.appendChild(o),o.click()},e.init=function(){"bottom"!==o.hash()&&o.hash("bottom"),e.kernel=!0},e.init()}])})),define("app/index",["angular","jquery","lodash","cjt/core","cjt/modules","ngRoute","uiBootstrap","ngSanitize"],(function(e,n,t,o){return function(){return e.module("App",["cjt2.config.whm.configProvider","ngRoute","ui.bootstrap","cjt2.whm"]),require(["cjt/bootstrap","cjt/views/applicationController","app/views/landing","app/services/yumAPI"],(function(n){e.module("App").config(["$routeProvider",function(e){e.when("/landing",{controller:"landing",templateUrl:o.buildFullPath("yumupdate/views/landing.ptt")}).otherwise({redirectTo:"/landing"})}]),n(document)}))}}));