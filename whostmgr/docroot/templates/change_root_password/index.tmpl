[%
    USE Whostmgr;
    USE JSON;

    SET PAGE_BASE = '/scripts/chrootpass/';
    SET PAGE_NAME = Whostmgr.get_page_name_by_url(PAGE_BASE);

    SET PAGE_DATA = {
        MINIMUM_PASSWORD_STRENGTH   => data.minpwstrength
    };

    WRAPPER 'master_templates/master.tmpl'
        header         = locale.makevar(PAGE_NAME),
        breadcrumburl  = PAGE_BASE,
        base           = PAGE_BASE,
        CJT2_EXCLUSIVE = 1,
        theme          = 'bootstrap',
        app_key        = 'change_root_password';
%]

<div ng-controller="changeRootPasswordController" class="ng-cloak" ng-cloak>
    <form name="changeRootPasswordForm" autocomplete="off">
        <div class="form-group">
            <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-6">
                    <toggle-label-info
                        for="password"
                        label-text="[% locale.maketext('New [asis,root] Password') %]"
                        label-id="password-label"
                        info-icon-id="password-info-icon"
                        info-block-id="password-info-block"
                        show-info-block="false">
                        <p>[% locale.maketext('Change the [asis,root] password for [asis,cPanel amp() WHM].') %]</p>
                    </toggle-label-info>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-6">
                    <password name="password"
                          title="[% locale.maketext('Password') %]"
                          autocomplete="new-password"
                          minimum-strength="{{minimumPasswordStrength}}"
                          placeholder="[% locale.maketext('Enter a Password') %]"
                          password="password"
                          show-meter="true"
                          show-strength="true"
                          show-generator="true"
                          minimum-length="5"
                          required
                          generate-button-tab-index="-1"
                          toggle-view-button-tab-index="-1"
                          generate-settings-tab-index="-1"
                          strength-meets-template="[% locale.lextext('This password has a strength of [numf,_1], which meets or exceeds the system requirement of [numf,_2].') %]"
                          strength-does-not-meet-template="[% locale.lextext('The password has a strength of [numf,_1], but your system requires a strength of [numf,_2].') %]"></password>
                </div>
                <div class="col-xs-12 col-sm-4 col-md-6">
                    <ul validation-container field-name="password">
                        <li validation-item field-name="password" validation-name="required" id="val-password-required">
                            [% locale.maketext('You [output,strong,must] enter a password.') %]
                        </li>
                        <li validation-item field-name="password" validation-name="minlength" id="val-password-minlength">
                            [% locale.maketext('You [output,strong,must] enter a password that contains at least five characters.') %]
                        </li>
                        <li validation-item field-name="password" validation-name="minimumPasswordStrength" id="val-password-minimum-strength">
                            [% locale.maketext('You [output,strong,must] enter a stronger password.') %]
                        </li>
                    </ul>
                </div>
            </div>
        </div>


        <div class="form-group">
            <div class="row"><!--Label-->
                <div class="col-xs-12 col-sm-8 col-md-6">
                    <toggle-label-info
                        for="confirm-password"
                        label-text="[% locale.maketext('Confirm Password') %]"
                        label-id=""
                        info-icon-id=""
                        info-block-id=""
                        show-info-block="false">
                        [% locale.maketext('Enter your new [asis,root] password again to confirm the change.') %]
                    </toggle-label-info>
                </div>
            </div>

            <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-6">
                    <input
                        id="confirm-password"
                        name="confirm-password"
                        type="password"
                        autocomplete="new-password"
                        class="form-control"
                        required
                        validate-equals="changeRootPasswordForm.password"
                        title="[% locale.maketext('Confirm your password.') %]"
                        ng-model="confirmPassword"/>
                </div>

                <div class="col-xs-12 col-sm-4 col-md-6">
                    <ul validation-container field-name="confirm-password">
                        <li validation-item field-name="confirm-password" validation-name="required" id="val-confirm-password-required">
                            [% locale.maketext('You [output,strong,must] enter a password.') %]
                        </li>
                        <li validation-item field-name="confirm-password" validation-name="validateEquals" id="val-confirm-password-match">
                            [% locale.maketext('The passwords do not match.') %]
                        </li>
                    </ul>
                </div>
            </div>
        </div>


        <div class="form-group">
            <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-6">
                    <button
                        id="btnChangeRootPassword"
                        type="submit"
                        spinner-id="spinnerChangePassword"
                        cp-action="submitChangeRootPassword()"
                        ng-disabled="!changeRootPasswordForm.$valid">
                        [% locale.maketext('Change Password') %]
                    </button>
                </div>
            </div>
        </div>
    </form>
    <div growl></div>
</div>



<script type="text/javascript">
    var PAGE = [% PAGE_DATA.json() %];
</script>

[% PROCESS 'master_templates/cjt2_header_include.tt' %]
[% END %]
