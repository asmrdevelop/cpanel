(function(){"use strict";function hideBanner(){document.getElementById(BANNER.id).style.display="none"}function showBanner(){document.getElementById(BANNER.id).style.display="block"}function showProblems(){document.getElementById("troubleModal").style.display="block"}function dismissedId(id){return"dismissed_"+id}function dismissBanner(bannerId){hideBanner();localStorage.setItem(dismissedId(bannerId),(new Date).toISOString());return}function lastTimeDismissed(bannerId){return localStorage.getItem(dismissedId(bannerId))}function purchaseAnyway(){var url=BANNER.token+"/"+BANNER.info.purchaselink;window.open(url)}function init(){if(BANNER.info.dismissible){var dismissed=lastTimeDismissed(BANNER.id);if(dismissed){if(typeof BANNER.info.show_again_in==="number"){var nowDate=new Date;var dismissedDate=new Date(dismissed);var elapsed=nowDate-dismissedDate;if(elapsed>BANNER.info.show_again_in){showBanner()}else{hideBanner()}}else{hideBanner()}}else{showBanner()}var proceedBtn=document.querySelector("#"+BANNER.id+" .proceed_to_purchase");if(proceedBtn){proceedBtn.addEventListener("click",(function(ev){hideBanner();purchaseAnyway()}))}document.querySelectorAll("#"+BANNER.id+" .dismiss_banner").forEach((function(el){el.addEventListener("click",(function(ev){dismissBanner(BANNER.id)}))}));var link=document.getElementById("purchaseLink");if(link){link.addEventListener("click",(function(ev){hideBanner(BANNER.id)}))}}else{showBanner()}if(BANNER.info.show_insufficiencies_when_detected&&BANNER.info.insufficiencies.length){showProblems()}}document.addEventListener("DOMContentLoaded",init)})();
