define("app/services/workerNodes",["angular","lodash","cjt/util/locale"],(function(e,t,s){"use strict";var i="whm.transfers.services.workerNodes",r="WorkerNodesService",n=["LOCAL_WORKER_NODES","REMOTE_WORKER_NODES","DEFAULT_WORKER_OPTIONS"],o=function(e,i,r){var n=function(){};return n.prototype=Object.create({}),t.assign(n.prototype,{_localWorkerNodes:null,_remoteWorkerNodes:null,_workerOptionTypes:null,_defaultWorkerOptions:null,_accountWorkerNodeOptions:{},_accountWorkerDefaultValues:{},_parseWorkerNode:function(e){return{alias:e.alias,hostname:e.hostname,workerCapabilities:Object.keys(e.worker_capabilities)}},_parseWorkerNodes:function(e){return e.map(this._parseWorkerNode)},getRemoteWorkerNodes:function(){return t.isNull(this._remoteWorkerNodes)&&(this._remoteWorkerNodes=this._parseWorkerNodes(i)),this._remoteWorkerNodes},getLocalWorkerNodes:function(){return t.isNull(this._localWorkerNodes)&&(this._localWorkerNodes=this._parseWorkerNodes(e)),this._localWorkerNodes},getDefaultWorkerOptions:function(){return t.isNull(this._defaultWorkerOptions)&&(this._defaultWorkerOptions=r,Object.keys(this._defaultWorkerOptions).filter((function(e){return!this.getWorkerByAlias(this.getLocalWorkerNodes(),this._defaultWorkerOptions[e].value)}),this).forEach((function(e){this._defaultWorkerOptions[e].value=".local"}),this)),this._defaultWorkerOptions},getWorkerOptionTypes:function(){return t.isNull(this._workerOptionTypes)&&(this._workerOptionTypes=Object.keys(this.getDefaultWorkerOptions())),this._workerOptionTypes},getWorkerByHostname:function(e,s,i){if(e)return t.find(e,(function(e){return e.hostname===s&&e.workerCapabilities.indexOf(i)>-1}))},getWorkerByAlias:function(e,s){if(e)return t.find(e,(function(e){return e.alias===s}))},_createWorkerListTypeItem:function(e,t,s){return{label:e,value:t,modelKey:this.getDefaultWorkerOptions()[s].modelKey}},_createAccountWorkerListType:function(e,t){var i,r=this.getDefaultWorkerOptions(),n=this.getRemoteWorkerNodes(),o=this.getLocalWorkerNodes(),a=[];if(a.push(this._createWorkerListTypeItem(s.maketext("Use only this server. Transfer or restore locally."),".local",t)),e.workerNodes&&e.workerNodes[t]){var c=this.getWorkerByAlias(n,e.workerNodes[t]),l=c&&this.getWorkerByHostname(o,c.hostname,t);l&&(i=l.alias,a.push(this._createWorkerListTypeItem(s.maketext("Use the [asis,cPanel] account’s package configuration.")+" ("+l.hostname+")",i,t)))}o.filter((function(e){return e.alias!==i})).forEach((function(e){a.push(this._createWorkerListTypeItem(e.alias+" ("+e.hostname+")",e.alias,t))}),this);var u=i||r[t].value;return a.filter((function(e){return e.value===u})).forEach((function(e){e.isDefault=!0})),a},_createAccountWorkerLists:function(e){var t={};return this.getWorkerOptionTypes().forEach((function(s){t[s]=this._createAccountWorkerListType(e,s)}),this),t},getAccountWorkerNodeOptions:function(e){var s=this._getAccountCacheKey(e);return t.isUndefined(this._accountWorkerNodeOptions[s])&&(this._accountWorkerNodeOptions[s]=this._createAccountWorkerLists(e)),this._accountWorkerNodeOptions[s]},checkWorkerOptionsAltered:function(e){return this.getAccountWorkerDefaultValues(e).some((function(t){var s=t.modelKey,i=t.value;return e[s]!==i}))},getAccountWorkerDefaultValues:function(e){var s=this._getAccountCacheKey(e);if(t.isUndefined(this._accountWorkerDefaultValues[s])){var i=this.getAccountWorkerNodeOptions(e),r=this.getDefaultWorkerOptions(),n=[];Object.keys(i).forEach((function(e){var t={workerType:e,modelKey:r[e].modelKey};i[e].forEach((function(e){e.isDefault&&(t.value=e.value)})),t.value||(t.value=r[e].value),n.push(t)})),this._accountWorkerDefaultValues[s]=n}return this._accountWorkerDefaultValues[s]},resetAccountToDefaults:function(e){this.getAccountWorkerDefaultValues(e).forEach((function(t){e[t.modelKey]=t.value}),this)},_getAccountCacheKey:function(e){return e.remote_user+"|"+e.domain}}),new n};n.push(o);var a=e.module(i,[]);return a.value("DEFAULT_WORKER_OPTIONS",{Mail:{value:".local",modelKey:"mail_location"}}),a.factory(r,n),{class:o,serviceName:r,namespace:i}})),define("app/directives/accountExpandPanel",["angular","lodash","cjt/util/locale","app/services/workerNodes"],(function(e,t,s,i){"use strict";var r="whm.transfers.directives.accountExpandPanel",n=[i.namespace],o="accountExpandPanel",a="directives/accountExpandPanel.ptt",c=["$scope",i.serviceName],l=function(e,i){function r(t){e.account[t.modelKey]=t.default,e.skipOptionChanged(t)}function n(t){var s=t.modelKey,i=t.value,r=t.workerType;e.account[s]=i,e.workerNodeOption[r]=e.findWorkerOptionByValue(r,i),e.workerNodeOptionChanged(r)}e.resetToDefaultClicked=function(){e.account.proxyOption&&(e.account.proxyOption.value=e.account.proxyOption.default),e.skipOptions.forEach(r),i.getAccountWorkerDefaultValues(e.account).forEach(n)},e.applyToAllClicked=function(){e.onApplyToAll({updatedAccount:e.account,skipOptions:e.skipOptions,workerOptions:e.workerNodeOption,proxyOption:e.account.proxyOption})},e.skipOptionChanged=function(t){e.onChange({updatedAccount:e.account,modelKey:t.modelKey,value:e.account[t.modelKey]})},e.proxyOptionChanged=function(t){e.onChange({updatedAccount:e.account,modelKey:t.modelKey,value:!t.value})},e.isSetToDefault=function(){return!e._skipOptionsAltered()&&!e._workerOptionsAltered()&&!e._proxyOptionAltered()},e.getOtherSelectedAccountsCount=function(){var t=e.selectedAccountsCount;return e.account.selected&&t>0&&t--,t},e.applyAndClose=function(){e.onClose({updatedAccount:e.account})},e._skipOptionsAltered=function(){return e.skipOptions.some((function(t){return e.account[t.modelKey]!==t.default}))},e._proxyOptionAltered=function(){return!!e.account.proxyOption&&e.account.proxyOption.value!==e.account.proxyOption.default},e._workerOptionsAltered=function(){return i.checkWorkerOptionsAltered(e.account)},e.getWorkerConfigLabel=function(e){switch(e.toLowerCase()){case"mail":return s.maketext("Mail")}},e.workerNodeOptionChanged=function(t){var s=i.getDefaultWorkerOptions()[t];e.onChange({updatedAccount:e.account,modelKey:s.modelKey,value:e.workerNodeOption[t].value})},e.findWorkerOptionByValue=function(s,i){return t.find(e.workerNodeOptions[s],(function(e){return e.value===i}))},e.setCurrentWorkerTypeValue=function(t){var s=i.getDefaultWorkerOptions()[t].modelKey;e.workerNodeOption[t]=e.findWorkerOptionByValue(t,e.account[s])},e.workerNodeOptions=i.getAccountWorkerNodeOptions(e.account),e.workerNodeOption={},i.getWorkerOptionTypes().forEach((function(t){e.setCurrentWorkerTypeValue(t);var s=i.getDefaultWorkerOptions()[t].modelKey;e.$watch((function(){return e.account[s]}),(function(){e.setCurrentWorkerTypeValue(t)}))})),e.showWorkerNodeOptions=i.getWorkerOptionTypes().some((function(t){return e.workerNodeOptions[t].length>1}))},u=function(e,s,i){if(t.isUndefined(e.parentID))throw new Error("“id” must be set for "+o);if(t.isUndefined(e.account))throw new Error("“account” must be set for "+o);if(t.isUndefined(e.selectedAccountsCount))throw new Error("“selectedAccountsCount” must be set for "+o);e.skipOptions||(e.skipOptions=[]),e.selectedAccountsCount=parseInt(e.selectedAccountsCount,10),e.skipOptions.forEach((function(s){var i=["label","id","modelKey","default"];i.forEach((function(e){if(t.isUndefined(s[e]))throw new Error("[accountExpandPanel] all skip-options items must have the following parameters:\n"+i.join(", ")+"\nInvalid item:\n"+JSON.stringify(s))})),s.id=e.parentID+"_"+s.id}))};return e.module(r,n).directive(o,(function(){return{restrict:"E",transclude:!0,scope:{parentID:"@id",skipOptions:"=",proxyOption:"=",account:"=",selectedAccountsCount:"@",onApplyToAll:"&onApplyToAll",onChange:"&onChange",onClose:"&onClose"},link:u,controller:c.concat(l),templateUrl:a}})),{namespace:r,class:l,factory:u,template:a}})),define("app/overwriteStates",[],(function(){"use strict";return{NO_OVERWRITE:"noOverwrite",OVERWRITE:"overwrite",OVERWRITE_WITH_DELETE:"overwriteWithDelete"}})),define("app/overwriteOptions",["app/overwriteStates","cjt/util/locale"],(function(e,t){"use strict";return[{label:t.maketext("Do Not Overwrite"),value:e.NO_OVERWRITE},{label:t.maketext("Overwrite"),value:e.OVERWRITE},{label:t.maketext("Overwrite with Delete"),value:e.OVERWRITE_WITH_DELETE}]})),function(e){define("jquery-chosen",["jquery"],(function(){return function(){
/*!
Chosen, a Select Box Enhancer for jQuery and Prototype
by Patrick Filler for Harvest, http://getharvest.com

Version 1.5.1
Full source at https://github.com/harvesthq/chosen
Copyright (c) 2011-2016 Harvest http://getharvest.com

MIT License, https://github.com/harvesthq/chosen/blob/master/LICENSE.md
This file is generated by `grunt build`, do not edit it by hand.
*/
(function(){var e,t,s,i,r={}.hasOwnProperty;(i=function(){function e(){this.options_index=0,this.parsed=[]}return e.prototype.add_node=function(e){return"OPTGROUP"===e.nodeName.toUpperCase()?this.add_group(e):this.add_option(e)},e.prototype.add_group=function(e){var t,s,i,r,n,o;for(t=this.parsed.length,this.parsed.push({array_index:t,group:!0,label:this.escapeExpression(e.label),title:e.title?e.title:void 0,children:0,disabled:e.disabled,classes:e.className}),o=[],i=0,r=(n=e.childNodes).length;i<r;i++)s=n[i],o.push(this.add_option(s,t,e.disabled));return o},e.prototype.add_option=function(e,t,s){if("OPTION"===e.nodeName.toUpperCase())return""!==e.text?(null!=t&&(this.parsed[t].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:e.value,text:e.text,html:e.innerHTML,title:e.title?e.title:void 0,selected:e.selected,disabled:!0===s?s:e.disabled,group_array_index:t,group_label:null!=t?this.parsed[t].label:null,classes:e.className,style:e.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1},e.prototype.escapeExpression=function(e){var t,s;return null==e||!1===e?"":/[\&\<\>\"\'\`]/.test(e)?(t={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},s=/&(?!\w+;)|[\<\>\"\'\`]/g,e.replace(s,(function(e){return t[e]||"&amp;"}))):e},e}()).select_to_array=function(e){var t,s,r,n,o;for(s=new i,r=0,n=(o=e.childNodes).length;r<n;r++)t=o[r],s.add_node(t);return s.parsed},t=function(){function e(t,s){this.form_field=t,this.options=null!=s?s:{},e.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers(),this.on_ready())}return e.prototype.set_default_values=function(){var e=this;return this.click_test_action=function(t){return e.test_active_click(t)},this.activate_action=function(t){return e.activate_field(t)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text&&this.options.allow_single_deselect,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null==this.options.enable_split_word_search||this.options.enable_split_word_search,this.group_search=null==this.options.group_search||this.options.group_search,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null==this.options.single_backstroke_delete||this.options.single_backstroke_delete,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null==this.options.display_selected_options||this.options.display_selected_options,this.display_disabled_options=null==this.options.display_disabled_options||this.options.display_disabled_options,this.include_group_label_in_selected=this.options.include_group_label_in_selected||!1,this.max_shown_results=this.options.max_shown_results||Number.POSITIVE_INFINITY},e.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||e.default_multiple_text:this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||e.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||e.default_no_result_text},e.prototype.choice_label=function(e){return this.include_group_label_in_selected&&null!=e.group_label?"<b class='group-name'>"+e.group_label+"</b>"+e.html:e.html},e.prototype.mouse_enter=function(){return this.mouse_on_container=!0},e.prototype.mouse_leave=function(){return this.mouse_on_container=!1},e.prototype.input_focus=function(e){var t=this;if(this.is_multiple){if(!this.active_field)return setTimeout((function(){return t.container_mousedown()}),50)}else if(!this.active_field)return this.activate_field()},e.prototype.input_blur=function(e){var t=this;if(!this.mouse_on_container)return this.active_field=!1,setTimeout((function(){return t.blur_test()}),100)},e.prototype.results_option_build=function(e){var t,s,i,r,n,o,a;for(t="",r=0,n=0,o=(a=this.results_data).length;n<o&&(i="",""!==(i=(s=a[n]).group?this.result_add_group(s):this.result_add_option(s))&&(r++,t+=i),(null!=e?e.first:void 0)&&(s.selected&&this.is_multiple?this.choice_build(s):s.selected&&!this.is_multiple&&this.single_set_selected_text(this.choice_label(s))),!(r>=this.max_shown_results));n++);return t},e.prototype.result_add_option=function(e){var t,s;return e.search_match&&this.include_option_in_results(e)?(t=[],e.disabled||e.selected&&this.is_multiple||t.push("active-result"),!e.disabled||e.selected&&this.is_multiple||t.push("disabled-result"),e.selected&&t.push("result-selected"),null!=e.group_array_index&&t.push("group-option"),""!==e.classes&&t.push(e.classes),(s=document.createElement("li")).className=t.join(" "),s.style.cssText=e.style,s.setAttribute("data-option-array-index",e.array_index),s.innerHTML=e.search_text,e.title&&(s.title=e.title),this.outerHTML(s)):""},e.prototype.result_add_group=function(e){var t,s;return(e.search_match||e.group_match)&&e.active_options>0?((t=[]).push("group-result"),e.classes&&t.push(e.classes),(s=document.createElement("li")).className=t.join(" "),s.innerHTML=e.search_text,e.title&&(s.title=e.title),this.outerHTML(s)):""},e.prototype.results_update_field=function(){if(this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing)return this.winnow_results()},e.prototype.reset_single_select_options=function(){var e,t,s,i,r;for(r=[],t=0,s=(i=this.results_data).length;t<s;t++)(e=i[t]).selected?r.push(e.selected=!1):r.push(void 0);return r},e.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},e.prototype.results_search=function(e){return this.results_showing?this.winnow_results():this.results_show()},e.prototype.winnow_results=function(){var e,t,s,i,r,n,o,a,c,l,u,h;for(this.no_results_clear(),i=0,e=(n=this.get_search_text()).replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),c=new RegExp(e,"i"),s=this.get_search_regex(e),l=0,u=(h=this.results_data).length;l<u;l++)(t=h[l]).search_match=!1,r=null,this.include_option_in_results(t)&&(t.group&&(t.group_match=!1,t.active_options=0),null!=t.group_array_index&&this.results_data[t.group_array_index]&&(0===(r=this.results_data[t.group_array_index]).active_options&&r.search_match&&(i+=1),r.active_options+=1),t.search_text=t.group?t.label:t.html,t.group&&!this.group_search||(t.search_match=this.search_string_match(t.search_text,s),t.search_match&&!t.group&&(i+=1),t.search_match?(n.length&&(o=t.search_text.search(c),a=t.search_text.substr(0,o+n.length)+"</em>"+t.search_text.substr(o+n.length),t.search_text=a.substr(0,o)+"<em>"+a.substr(o)),null!=r&&(r.group_match=!0)):null!=t.group_array_index&&this.results_data[t.group_array_index].search_match&&(t.search_match=!0)));return this.result_clear_highlight(),i<1&&n.length?(this.update_results_content(""),this.no_results(n)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},e.prototype.get_search_regex=function(e){var t;return t=this.search_contains?"":"^",new RegExp(t+e,"i")},e.prototype.search_string_match=function(e,t){var s,i,r,n;if(t.test(e))return!0;if(this.enable_split_word_search&&(e.indexOf(" ")>=0||0===e.indexOf("["))&&(i=e.replace(/\[|\]/g,"").split(" ")).length)for(r=0,n=i.length;r<n;r++)if(s=i[r],t.test(s))return!0},e.prototype.choices_count=function(){var e,t,s;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,e=0,t=(s=this.form_field.options).length;e<t;e++)s[e].selected&&(this.selected_option_count+=1);return this.selected_option_count},e.prototype.choices_click=function(e){if(e.preventDefault(),!this.results_showing&&!this.is_disabled)return this.results_show()},e.prototype.keyup_checker=function(e){var t,s;switch(t=null!=(s=e.which)?s:e.keyCode,this.search_field_scale(),t){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(e.preventDefault(),this.results_showing)return this.result_select(e);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:case 18:break;default:return this.results_search()}},e.prototype.clipboard_event_checker=function(e){var t=this;return setTimeout((function(){return t.results_search()}),50)},e.prototype.container_width=function(){return null!=this.options.width?this.options.width:this.form_field.offsetWidth+"px"},e.prototype.include_option_in_results=function(e){return!(this.is_multiple&&!this.display_selected_options&&e.selected)&&(!(!this.display_disabled_options&&e.disabled)&&!e.empty)},e.prototype.search_results_touchstart=function(e){return this.touch_started=!0,this.search_results_mouseover(e)},e.prototype.search_results_touchmove=function(e){return this.touch_started=!1,this.search_results_mouseout(e)},e.prototype.search_results_touchend=function(e){if(this.touch_started)return this.search_results_mouseup(e)},e.prototype.outerHTML=function(e){var t;return e.outerHTML?e.outerHTML:((t=document.createElement("div")).appendChild(e),t.innerHTML)},e.browser_is_supported=function(){return!/iP(od|hone)/i.test(window.navigator.userAgent)&&((!/Android/i.test(window.navigator.userAgent)||!/Mobile/i.test(window.navigator.userAgent))&&(!/IEMobile/i.test(window.navigator.userAgent)&&(!/Windows Phone/i.test(window.navigator.userAgent)&&(!/BlackBerry/i.test(window.navigator.userAgent)&&(!/BB10/i.test(window.navigator.userAgent)&&("Microsoft Internet Explorer"!==window.navigator.appName||document.documentMode>=8))))))},e.default_multiple_text="Select Some Options",e.default_single_text="Select an Option",e.default_no_result_text="No results match",e}(),(e=jQuery).fn.extend({chosen:function(i){return t.browser_is_supported()?this.each((function(t){var r,n;n=(r=e(this)).data("chosen"),"destroy"!==i?n instanceof s||r.data("chosen",new s(this,i)):n instanceof s&&n.destroy()})):this}}),s=function(t){function s(){return s.__super__.constructor.apply(this,arguments)}return function(e,t){for(var s in t)r.call(t,s)&&(e[s]=t[s]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(s,t),s.prototype.setup=function(){return this.form_field_jq=e(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},s.prototype.set_up_html=function(){var t,s;return(t=["chosen-container"]).push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&t.push(this.form_field.className),this.is_rtl&&t.push("chosen-rtl"),s={class:t.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(s.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=e("<div />",s),this.is_multiple?this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>'):this.container.html('<a class="chosen-single chosen-default"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior()},s.prototype.on_ready=function(){return this.form_field_jq.trigger("chosen:ready",{chosen:this})},s.prototype.register_observers=function(){var e=this;return this.container.bind("touchstart.chosen",(function(t){return e.container_mousedown(t),t.preventDefault()})),this.container.bind("touchend.chosen",(function(t){return e.container_mouseup(t),t.preventDefault()})),this.container.bind("mousedown.chosen",(function(t){e.container_mousedown(t)})),this.container.bind("mouseup.chosen",(function(t){e.container_mouseup(t)})),this.container.bind("mouseenter.chosen",(function(t){e.mouse_enter(t)})),this.container.bind("mouseleave.chosen",(function(t){e.mouse_leave(t)})),this.search_results.bind("mouseup.chosen",(function(t){e.search_results_mouseup(t)})),this.search_results.bind("mouseover.chosen",(function(t){e.search_results_mouseover(t)})),this.search_results.bind("mouseout.chosen",(function(t){e.search_results_mouseout(t)})),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",(function(t){e.search_results_mousewheel(t)})),this.search_results.bind("touchstart.chosen",(function(t){e.search_results_touchstart(t)})),this.search_results.bind("touchmove.chosen",(function(t){e.search_results_touchmove(t)})),this.search_results.bind("touchend.chosen",(function(t){e.search_results_touchend(t)})),this.form_field_jq.bind("chosen:updated.chosen",(function(t){e.results_update_field(t)})),this.form_field_jq.bind("chosen:activate.chosen",(function(t){e.activate_field(t)})),this.form_field_jq.bind("chosen:open.chosen",(function(t){e.container_mousedown(t)})),this.form_field_jq.bind("chosen:close.chosen",(function(t){e.input_blur(t)})),this.search_field.bind("blur.chosen",(function(t){e.input_blur(t)})),this.search_field.bind("keyup.chosen",(function(t){e.keyup_checker(t)})),this.search_field.bind("keydown.chosen",(function(t){e.keydown_checker(t)})),this.search_field.bind("focus.chosen",(function(t){e.input_focus(t)})),this.search_field.bind("cut.chosen",(function(t){e.clipboard_event_checker(t)})),this.search_field.bind("paste.chosen",(function(t){e.clipboard_event_checker(t)})),this.is_multiple?this.search_choices.bind("click.chosen",(function(t){e.choices_click(t)})):this.container.bind("click.chosen",(function(e){e.preventDefault()}))},s.prototype.destroy=function(){return e(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},s.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},s.prototype.container_mousedown=function(t){if(!this.is_disabled&&(t&&"mousedown"===t.type&&!this.results_showing&&t.preventDefault(),null==t||!e(t.target).hasClass("search-choice-close")))return this.active_field?this.is_multiple||!t||e(t.target)[0]!==this.selected_item[0]&&!e(t.target).parents("a.chosen-single").length||(t.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),e(this.container[0].ownerDocument).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field()},s.prototype.container_mouseup=function(e){if("ABBR"===e.target.nodeName&&!this.is_disabled)return this.results_reset(e)},s.prototype.search_results_mousewheel=function(e){var t;if(e.originalEvent&&(t=e.originalEvent.deltaY||-e.originalEvent.wheelDelta||e.originalEvent.detail),null!=t)return e.preventDefault(),"DOMMouseScroll"===e.type&&(t*=40),this.search_results.scrollTop(t+this.search_results.scrollTop())},s.prototype.blur_test=function(e){if(!this.active_field&&this.container.hasClass("chosen-container-active"))return this.close_field()},s.prototype.close_field=function(){return e(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},s.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},s.prototype.test_active_click=function(t){var s;return(s=e(t.target).closest(".chosen-container")).length&&this.container[0]===s[0]?this.active_field=!0:this.close_field()},s.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=i.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},s.prototype.result_do_highlight=function(e){var t,s,i,r,n;if(e.length){if(this.result_clear_highlight(),this.result_highlight=e,this.result_highlight.addClass("highlighted"),r=(i=parseInt(this.search_results.css("maxHeight"),10))+(n=this.search_results.scrollTop()),(t=(s=this.result_highlight.position().top+this.search_results.scrollTop())+this.result_highlight.outerHeight())>=r)return this.search_results.scrollTop(t-i>0?t-i:0);if(s<n)return this.search_results.scrollTop(s)}},s.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},s.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results(),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}))},s.prototype.update_results_content=function(e){return this.search_results.html(e)},s.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},s.prototype.set_tab_index=function(e){var t;if(this.form_field.tabIndex)return t=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=t},s.prototype.set_label_behavior=function(){var t=this;if(this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=e("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0)return this.form_field_label.bind("click.chosen",(function(e){return t.is_multiple?t.container_mousedown(e):t.activate_field()}))},s.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},s.prototype.search_results_mouseup=function(t){var s;if((s=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first()).length)return this.result_highlight=s,this.result_select(t),this.search_field.focus()},s.prototype.search_results_mouseover=function(t){var s;if(s=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first())return this.result_do_highlight(s)},s.prototype.search_results_mouseout=function(t){if(e(t.target).hasClass("active-result"))return this.result_clear_highlight()},s.prototype.choice_build=function(t){var s,i,r=this;return s=e("<li />",{class:"search-choice"}).html("<span>"+this.choice_label(t)+"</span>"),t.disabled?s.addClass("search-choice-disabled"):((i=e("<a />",{class:"search-choice-close","data-option-array-index":t.array_index})).bind("click.chosen",(function(e){return r.choice_destroy_link_click(e)})),s.append(i)),this.search_container.before(s)},s.prototype.choice_destroy_link_click=function(t){if(t.preventDefault(),t.stopPropagation(),!this.is_disabled)return this.choice_destroy(e(t.target))},s.prototype.choice_destroy=function(e){if(this.result_deselect(e[0].getAttribute("data-option-array-index")))return this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),e.parents("li").first().remove(),this.search_field_scale()},s.prototype.results_reset=function(){if(this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field)return this.results_hide()},s.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},s.prototype.result_select=function(e){var t,s;if(this.result_highlight)return t=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?t.removeClass("active-result"):this.reset_single_select_options(),t.addClass("result-selected"),(s=this.results_data[t[0].getAttribute("data-option-array-index")]).selected=!0,this.form_field.options[s.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(s):this.single_set_selected_text(this.choice_label(s)),(e.metaKey||e.ctrlKey)&&this.is_multiple||this.results_hide(),this.show_search_field_default(),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[s.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,e.preventDefault(),this.search_field_scale())},s.prototype.single_set_selected_text=function(e){return null==e&&(e=this.default_text),e===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").html(e)},s.prototype.result_deselect=function(e){var t;return t=this.results_data[e],!this.form_field.options[t.options_index].disabled&&(t.selected=!1,this.form_field.options[t.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[t.options_index].value}),this.search_field_scale(),!0)},s.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect)return this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")},s.prototype.get_search_text=function(){return e("<div/>").text(e.trim(this.search_field.val())).html()},s.prototype.winnow_results_set_highlight=function(){var e,t;if(null!=(e=(t=this.is_multiple?[]:this.search_results.find(".result-selected.active-result")).length?t.first():this.search_results.find(".active-result").first()))return this.result_do_highlight(e)},s.prototype.no_results=function(t){var s;return(s=e('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>')).find("span").first().html(t),this.search_results.append(s),this.form_field_jq.trigger("chosen:no_results",{chosen:this})},s.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},s.prototype.keydown_arrow=function(){var e;return this.results_showing&&this.result_highlight?(e=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(e):void 0:this.results_show()},s.prototype.keyup_arrow=function(){var e;return this.results_showing||this.is_multiple?this.result_highlight?(e=this.result_highlight.prevAll("li.active-result")).length?this.result_do_highlight(e.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight()):void 0:this.results_show()},s.prototype.keydown_backstroke=function(){var e;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(e=this.search_container.siblings("li.search-choice").last()).length&&!e.hasClass("search-choice-disabled")?(this.pending_backstroke=e,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0},s.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},s.prototype.keydown_checker=function(e){var t,s;switch(t=null!=(s=e.which)?s:e.keyCode,this.search_field_scale(),8!==t&&this.pending_backstroke&&this.clear_backstroke(),t){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(e),this.mouse_on_container=!1;break;case 13:this.results_showing&&e.preventDefault();break;case 32:this.disable_search&&e.preventDefault();break;case 38:e.preventDefault(),this.keyup_arrow();break;case 40:e.preventDefault(),this.keydown_arrow()}},s.prototype.search_field_scale=function(){var t,s,i,r,n,o,a,c;if(this.is_multiple){for(0,o=0,r="position:absolute; left: -1000px; top: -1000px; display:none;",a=0,c=(n=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"]).length;a<c;a++)r+=(i=n[a])+":"+this.search_field.css(i)+";";return(t=e("<div />",{style:r})).text(this.search_field.val()),e("body").append(t),o=t.width()+25,t.remove(),o>(s=this.container.outerWidth())-10&&(o=s-10),this.search_field.css({width:o+"px"})}},s}(t)}).call(this)}.apply(e,arguments)}))}(this),function(e){define("angular-chosen",["angular","jquery-chosen"],(function(){return function(){
/**
 * angular-chosen-localytics - Angular Chosen directive is an AngularJS Directive that brings the Chosen jQuery in a Angular way
 * @version v1.3.0
 * @link http://github.com/leocaseiro/angular-chosen
 * @license MIT
 */
(function(){var e=[].indexOf||function(e){for(var t=0,s=this.length;t<s;t++)if(t in this&&this[t]===e)return t;return-1};angular.module("localytics.directives",[]),angular.module("localytics.directives").directive("chosen",["$timeout",function(t){var s,i,r,n;return i=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,s=["persistentCreateOption","createOptionText","createOption","skipNoResults","noResultsText","allowSingleDeselect","disableSearchThreshold","disableSearch","enableSplitWordSearch","inheritSelectClasses","maxSelectedOptions","placeholderTextMultiple","placeholderTextSingle","searchContains","singleBackstrokeDelete","displayDisabledOptions","displaySelectedOptions","width","includeGroupLabelInSelected","maxShownResults"],n=function(e){return e.replace(/[A-Z]/g,(function(e){return"_"+e.toLowerCase()}))},r=function(e){var t;if(angular.isArray(e))return 0===e.length;if(angular.isObject(e))for(t in e)if(e.hasOwnProperty(t))return!1;return!0},{restrict:"A",require:"?ngModel",priority:1,link:function(o,a,c,l){var u,h,d,p,_,f,m,g,v,y;if(o.disabledValuesHistory=o.disabledValuesHistory?o.disabledValuesHistory:[],(a=$(a)).addClass("localytics-chosen"),p=o.$eval(c.chosen)||{},angular.forEach(c,(function(t,i){if(e.call(s,i)>=0)return c.$observe(i,(function(e){return p[n(i)]="{{"===String(a.attr(c.$attr[i])).slice(0,2)?e:o.$eval(e),g()}))})),f=function(){return a.addClass("loading").attr("disabled",!0).trigger("chosen:updated")},m=function(){return a.removeClass("loading"),angular.isDefined(c.disabled)?a.attr("disabled",c.disabled):a.attr("disabled",!1),a.trigger("chosen:updated")},u=null,h=!1,d=function(){return u?a.trigger("chosen:updated"):(t((function(){u=a.chosen(p).data("chosen")})),angular.isObject(u)?u.default_text:void 0)},g=function(){return h?a.attr("data-placeholder",u.results_none_found).attr("disabled",!0):a.removeAttr("data-placeholder"),a.trigger("chosen:updated")},l?(_=l.$render,l.$render=function(){return _(),d()},a.on("chosen:hiding_dropdown",(function(){return o.$apply((function(){return l.$setTouched()}))})),c.multiple&&(y=function(){return l.$viewValue},o.$watch(y,l.$render,!0))):d(),c.$observe("disabled",(function(){return a.trigger("chosen:updated")})),c.ngOptions&&l)return v=c.ngOptions.match(i)[7],o.$watchCollection(v,(function(e,s){return t((function(){return angular.isUndefined(e)?f():(h=r(e),m(),g())}))})),o.$on("$destroy",(function(e){if("undefined"!=typeof timer&&null!==timer)return t.cancel(timer)}))}}}])}).call(this)}.apply(e,arguments)}))}(this),define("app/filters/startFromFilter",["angular"],(function(e){"use strict";var t;try{t=e.module("App")}catch(s){t=e.module("App",[])}t.filter("startFrom",(function(){return function(t,s){if(t&&e.isArray(t))return s=Number(s),t.slice(s)}}))})),define("app/filters/cpLimitToFilter",["angular"],(function(e){"use strict";var t;try{t=e.module("App")}catch(s){t=e.module("App",[])}t.filter("cpLimitTo",(function(){return function(e,t){return t?e.slice(0,t):e}}))})),define("app/controllers/MainController",["angular","cjt/util/locale","cjt/directives/pageSizeDirective","../filters/startFromFilter","../filters/cpLimitToFilter"],(function(e,t){"use strict";var s,i=function(s,i,r,n,o,a){var c=this;c._log=i,c.PAGE=n,c.REMAINING_ACCOUNT_SLOTS=parseInt(n.REMAINING_ACCOUNT_SLOTS,10),c.SERVER_MAX_USERS=parseInt(n.SERVER_MAX_USERS,10),c.pkgTable={currentPage:1,pageSize:10,reverse:!1,order:"name"},c.overwriteStates=a,c.olderRemote=parseInt(c.PAGE.remote.version.split(".")[1])<55;var l=t.maketext("Unknown"),u=!0;(l=c.PAGE.remote.server_type.match(/WHM/)?"WHM "+c.PAGE.remote.version:c.PAGE.remote.server_type+" "+c.PAGE.remote.version).match(/WHM/)||(u=!1),c.meta={server_type:l,is_cpanel:u,panel_name:c.PAGE.remote.server_type},c.LOCALE=t,c.control_bwdata=!0,c.control_homedir=!0,c.control_databases=!0,c.control_reseller_privs=!0,e.forEach(c.PAGE.items.packages,(function(e,t){c.PAGE.items.packages[t].selected=0})),c.PAGE.domainsWithDedicatedIp={},e.forEach(c.PAGE.local.dedicated_ips,(function(e,t){this[e]=!0}),c.PAGE.domainsWithDedicatedIp);var h=r("startFrom"),d=r("orderBy"),p=r("cpLimitTo"),_=r("filter");return c.existingUsersFilter=r("existingUsers"),c.selectedAccounts=_(c.PAGE.items.accounts,{selected:1}),c.selectedPackages=_(c.PAGE.items.packages,{selected:1}),c.filteredPackages=_(c.PAGE.items.packages,c.pkgsFilter),c.viewablePackages=p(h(d(c.filteredPackages,c.pkgTable.order,c.pkgTable.reverse),(c.pkgTable.currentPage-1)*c.pkgTable.pageSize),c.pkgTable.pageSize),c.updateSelectedPackages=function(){c.selectedPackages=_(this.PAGE.items.packages,{selected:1})},c.updateSelectedConfigurations=function(){c.selectedConfigurations=[],e.forEach(c.PAGE.configuration_modules,(function(e,t){if(e.selected){var s={};s[t+"_enabled"]=1,c.selectedConfigurations.push(s)}}))},c.updateSelectedConfigurations(),c.recheckUsers=function(e){s.$broadcast("recheckUsersCalled",{dataset:e})},c.updateSelectedAccounts=function(){c.selectedAccounts=_(this.PAGE.items.accounts,{selected:1})},c.updateFilteredPackages=function(){c.filteredPackages=_(this.PAGE.items.packages,this.pkgsFilter)},c.updateViewablePackages=function(){c.viewablePackages=p(h(d(c.filteredPackages,c.pkgTable.order,c.pkgTable.reverse),(c.pkgTable.currentPage-1)*c.pkgTable.pageSize),c.pkgTable.pageSize)},c.getPossiblePageSizes=function(){return c.PAGE.all_possible_page_sizes},c.newDedicatedIpFilter=function(e){return!!e.dedicated_ip&&!c.PAGE.domainsWithDedicatedIp[e.domain]},c.toArray=function(){c.configuration_modules=[],e.forEach(c.PAGE.configuration_modules,(function(t,s){var i=[];e.forEach(t.analysis,(function(e,t){i.push({analysis:e,analysisKey:t})})),t.analysis=i,c.configuration_modules.push({key:s,value:t})}))},c.overwriteIsDefault=function(e){return e.overwrite_type.value===c.overwriteStates.NO_OVERWRITE},c.overwriteOptions=o,s.$watch((function(){return c.selectedAccounts.length}),(function(e){e||s.$broadcast("selectedAccountsEmptied",{})})),s.$watch((function(){return c.pkgTable}),(function(){c.updateViewablePackages()}),!0),c.toArray(),c};i.prototype.updatePackages=function(){this.updateFilteredPackages(),this.updateViewablePackages()},i.prototype.updateConfigurations=function(){this.updateSelectedConfigurations()},i.prototype.selectedHeaderClass=function(e,t){var s="icon-arrow-"+(e.reverse?"down":"up");return t===e.order&&s},i.prototype.selectedColClass=function(e,t){return t===e.order&&"active"},i.prototype.toggleCheckAll=function(t,s,i){var r;r="overwrite_type"===s?i:i?1:0,e.forEach(t,(function(e){e[s]=r}))},i.prototype.toggleCheckAllAndReValidate=function(e,t,s){var i=this;i.toggleCheckAll.apply(i,arguments),i.updateSelectedAccounts(),i.recheckUsers(e)},i.prototype.toggleSort=function(e,t){e.reverse=e.order===t?!e.reverse:0,e.order=t},i.prototype.invalidUserFilter=function(e){return e.selected&&e.invalidUser},i.prototype.noUsernameChange=function(e){return e.localuser===e.remote_user},i.prototype.reservedUserFilter=function(e){return e.selected&&e.invalidUser&&e.userCheckStates.reserved},i.prototype.duplicateUserFilter=function(e){return e.selected&&!!e.localuser&&e.invalidUser&&e.userCheckStates.duplicate},i.prototype.invalidUsernameFilter=function(e){return e.selected&&e.invalidUser&&e.userCheckStates.invalid},i.prototype.invalidDomainFilter=function(e){return e.selected&&e.invalidDomain},i.prototype.resellerNoCopyFilter=function(e){return e.selected&&e.is_reseller&&!e.copy_reseller_privs},i.prototype.reValidateDomainAndUsernameFor=function(e){if(e)for(var t=0;t<e.length;t++){var s=e[t].localuser||"";s.length||(s=e[t].remote_user),e[t].invalidUser=this.PAGE.local.users[s]&&!e[t].invalidDomain&&e[t].overwrite_type===this.overwriteOptions[0]?1:0}},i.prototype.getExistingUserMessage=function(e){var t=e.localuser,s=e.similarLocalUser;return t===s?this.LOCALE.maketext("The remote account “[_1]” cannot transfer because an account with the same username exists on the local server.",t):this.LOCALE.maketext("The remote account “[_1]” cannot transfer because the first [quant,_3,non-special character matches,non-special characters match] the local username “[_2]”.",t,s,this.PAGE.USERNAME_UNIQUE_LENGTH)},i.prototype.existingAccountWarning=function(e){return t.maketext("[output,strong,Error]: You have selected [quant,_1,account transfer,account transfers] that will not complete properly because the [numerate,_1,username,usernames] already [numerate,_1,exists,exist] on the local server.",e)+" "+t.maketext("To resolve this, you can overwrite the local [numerate,_1,account,accounts], rename the incoming [numerate,_1,account,accounts], or deselect the [numerate,_1,account,accounts].",e)},i.prototype.existingDomainWarning=function(e){return t.maketext("[output,strong,Error]: You have selected [quant,_1,account transfer,account transfers] that will not complete properly because of [numerate,_1,a domain conflict,domain conflicts].",e)+" "+t.maketext("This is due to [numerate,_1,an existing domain,existing domains] that [numerate,_1,matches an incoming domain,match incoming domains] but [numerate,_1,does,do] not match the local [numerate,_1,username,usernames].",e)+" "+t.maketext("To resolve this, remove the matching [numerate,_1,domain,domains] from the local machine for any [numerate,_1,account,accounts] that you wish to transfer.",e)},i.prototype.dedicatedIpAddrWarning=function(e,s){return t.maketext("[output,strong,Error]: You have selected [numf,_1] of [quant,_2,available IP address,available IP addresses]. Either deselect an account to transfer, or deselect its corresponding “[_3]” field.",e,s,t.maketext("Dedicated IP Address"))},i.prototype.frontPageWarning=function(e){return t.maketext("[output,strong,Warning]: You selected [quant,_1,account,accounts] that use [asis,Microsoft® FrontPage Extensions] on the source server. The local server does not support [asis,FrontPage]. To resolve this issue, disable [asis,FrontPage] for each account before you attempt the transfer.",e)},i.prototype.unusedDedicatedIpWarning=function(e){return t.maketext("[output,strong,Warning]: You have selected [quant,_1,account,accounts] which previously had a dedicated [asis,IP] address but you have chosen not to assign one after transfer.",e)},i.prototype.packageFilterMessage=function(){return this.pkgsFilter?t.maketext("Your search matched [numf,_1] of [quant,_2,record,records].",this.filteredPackages.length,this.PAGE.items.packages.length):t.maketext("There [numerate,_1,is,are] [quant,_1,record,records].",this.PAGE.items.packages.length)},i.prototype.packageSelectedMessage=function(){return t.maketext("[_1] selected",this.selectedPackages.length||0)},i.prototype.accountFilterMessage=function(e){return e!==this.PAGE.items.accounts.length?t.maketext("Your search matched [numf,_1] of [quant,_2,record,records].",e||0,this.PAGE.items.accounts.length):t.maketext("There [numerate,_1,is,are] [quant,_1,record,records].",this.PAGE.items.accounts.length)},i.prototype.accountSelectedMessage=function(e){return t.maketext("[quant,_1,account,accounts] selected.",e||0)},i.prototype.accountConflictSelectedMessage=function(e){return t.maketext("You have selected [quant,_1,account,accounts] that cannot transfer properly because [numerate,_1,its username conflicts,their usernames conflict] with [numerate,_1,a username,usernames] on the local server.",e)},i.prototype.licenseOverloadMessage=function(){return 0===this.REMAINING_ACCOUNT_SLOTS?t.maketext("Because the destination server’s license is limited to [quant,_1,account,accounts], you can only overwrite existing accounts.",this.SERVER_MAX_USERS):t.maketext("Because the destination server’s license is limited to [quant,_1,account,accounts], you can only transfer [quant,_2,account,accounts].",this.SERVER_MAX_USERS,this.REMAINING_ACCOUNT_SLOTS)},i.prototype.licenseOverloadCancelMessage=function(e){return t.maketext("Deselect [quant,_1,account,accounts] to continue.",e)},i.prototype.accountOverwriteResolveMessage=function(e){return t.maketext("To resolve this issue, you can overwrite the local [numerate,_1,account,accounts], rename the incoming [numerate,_1,account,accounts] so that the first [quant,_2,alphanumeric character,alphanumeric characters] do not match those of any local accounts, or deselect the [numerate,_1,account,accounts]. These options are mutually exclusive.",e,this.PAGE.USERNAME_UNIQUE_LENGTH)},i.prototype.accountOverwriteConfirmMessage=function(e){return t.maketext("Overwrite conflicted [numerate,_1,account,accounts]",e)},i.prototype.accountConflictCancelMessage=function(e){return t.maketext("Deselect conflicted [numerate,_1,account,accounts]",e)},i.prototype.accountConflictResolveMessage=function(e){return t.maketext("To resolve this issue, you can rename the incoming [numerate,_1,account,accounts] so that the first [quant,_2,alphanumeric character,alphanumeric characters] do not match those of any local accounts, or deselect the [numerate,_1,account,accounts].",e,this.PAGE.USERNAME_UNIQUE_LENGTH)},i.prototype.accountConflictSelectedResolveMessage=function(e){return t.maketext("You have selected [quant,_1,account transfer,account transfers] that will not complete properly because the [numerate,_1,username is,usernames are] reserved on the local server. To resolve this, you can either rename the incoming [numerate,_1,account,accounts] or deselect the [numerate,_1,account,accounts].",e)},i.prototype.accountConflictNameResolveMessage=function(e){return t.maketext("The following [quant,_1,remote user is set,remote users are set] to migrate with [numerate,_1,a new name,new names] whose first [quant,_2,character conflicts,characters conflict] with one or more other proposed new usernames. To resolve this, you can either rename the incoming [numerate,_1,account,accounts] or deselect [numerate,_1,it,them].",e,this.PAGE.USERNAME_UNIQUE_LENGTH)},i.prototype.accountRenameMessage=function(e,s){return t.maketext("“[_1]” is set to be renamed “[_2]”.",e,s)},i.prototype.usernameValidationTitle=function(e){return t.maketext("You have entered [quant,_1,username that does,usernames that do] not meet this server’s username requirements:",e)},i.prototype.usernameValidationMessage=function(e){return t.maketext("Usernames must be no longer than [quant,_1,character,characters] and must contain only lowercase letters and numerals. They may not begin with a numeral. To resolve this, you can either fix the [numerate,_2,username,usernames] or deselect the [numerate,_1,account,accounts].",this.PAGE.MAX_USERNAME_LENGTH,e)},i.prototype.usernameValidationAction=function(e){return t.maketext("Deselect the [numerate,_1,account,accounts] with [numerate,_1,the invalid username,invalid usernames].",e)},i.prototype.dedicatedIPDeselectAction=function(e){return t.maketext("Deselect “Dedicated IP Address” for conflicted [numerate,_1,account,accounts]",e)},i.prototype.dedicatedIPReselectAction=function(e){return t.maketext("Reselect “[_1]” for [numerate,_2,account,accounts]",t.maketext("Dedicated IP Address"),e)},i.prototype.domainsWithFrontpageMessage=function(e){return t.maketext("The following domains use [asis,FrontPage] on the source server:")},i.prototype.resellerNoCopyTitle=function(e){return t.maketext("You have selected [quant,_1,user,users] that will be transferred with no reseller privileges.",e)},i.prototype.resellerNoCopyMessage=function(e){return this.PAGE.restricted_restore?t.maketext("[numerate,_1,This user is a reseller,These users are resellers] on the source server. Restricted Restore does not allow the transfer of reseller privileges. After the system restores the [numerate,_1,user,users], you can assign reseller privileges in WHM’s Reseller Center interface ([output,em,WHM » Home » Resellers » Reseller Center]).",e):t.maketext("[numerate,_1,This user is a reseller,These users are resellers] on the source server. To transfer an account’s reseller privileges from the source server, edit the [output,strong,Transfer Configuration] for the desired [numerate,_1,account,accounts] above. Be aware that reseller privileges can give users special permissions, including full root access, to your server.",e)},i.prototype.resellerNoCopyFixMessage=function(e){return t.maketext("Transfer reseller privileges for the selected [numerate,_1,account,accounts].",e)},i.prototype.canSubmitForm=function(e,t,s){for(var i=0;i<e.length;i++)if(e[i].length)return!1;return!!(this.selectedPackages.length||this.selectedAccounts.length||this.selectedConfigurations.length)&&(!(t.length>this.PAGE.local.available_ips.length)&&!(this.SERVER_MAX_USERS&&s.length>this.REMAINING_ACCOUNT_SLOTS))},i.prototype.getCopyButtonLabel=function(){return t.maketext("Copy")},i.prototype.submitSummaryMessage=function(){var e=[];return this.selectedAccounts.length&&e.push(t.maketext("[quant,_1,Account,Accounts]",this.selectedAccounts.length)),this.selectedPackages.length&&e.push(t.maketext("[quant,_1,Package,Packages]",this.selectedPackages.length)),this.selectedConfigurations.length&&e.push(t.maketext("[quant,_1,Server Configuration,Server Configurations]",this.selectedConfigurations.length)),t.maketext("When you click [output,em,_1], you will start the transfer process for the following: [list_and,_2]",this.getCopyButtonLabel(),e)};try{(s=e.module("App")).value("PAGE",PAGE)}catch(t){s=e.module("App",[])}return s.filter("existingUsers",(function(){return function(t,s){var i=[];return e.forEach(t,(function(e,t){return(!s||e.localuser===e.similarLocalUser)&&(!(!s&&e.localuser===e.similarLocalUser)&&void(e.selected&&e.invalidUser&&e.userCheckStates.existing&&!e.userCheckStates.reserved&&i.push(e)))})),i}})),i.$inject=["$scope","$log","$filter","PAGE","OVERWRITE_OPTIONS","OVERWRITE_STATES"],s.controller("MainController",i)})),define("app/filters/accountFilter",["angular"],(function(e){"use strict";var t;try{t=e.module("App")}catch(s){t=e.module("App",[])}t.filter("accountFilter",(function(){return function(t,s){if(!s)return t;var i=[];return e.forEach(t,(function(e){(-1!==e.user.indexOf(s)||-1!==e.domain.indexOf(s)||-1!==e.owner.indexOf(s))&&i.push(e)})),i}}))})),define("app/filters/advanceAccountFilter",["angular"],(function(e){"use strict";var t;try{t=e.module("App")}catch(s){t=e.module("App",[])}t.filter("advanceAccountFilter",(function(){return function(t,s){if(!s)return t;var i=[];return e.forEach(t,(function(e){-1!==e.remote_user.indexOf(s.user)&&-1!==e.domain.indexOf(s.domain)&&(s.owner&&s.owner.length&&-1===s.owner.indexOf(e.owner)||s.dedicated_ip>=0&&e.dedicated_ip!==s.dedicated_ip||i.push(e))})),i}}))})),define("app/controllers/AccountTableController",["angular","cjt/util/locale","cjt/util/parse","app/services/workerNodes","app/filters/startFromFilter","app/filters/cpLimitToFilter","app/filters/accountFilter","app/filters/advanceAccountFilter","cjt/services/whm/nvDataService"],(function(e,t,s,i){"use strict";var r,n=t.maketext("Default"),o=t.maketext("Custom"),a={copy_homedir:1,copy_databases:1,copy_bwdata:1,copy_reseller_privs:0},c=["$scope","$rootScope",i.serviceName,"$filter","$uibModal","PAGE","nvDataService","OVERWRITE_OPTIONS","OVERWRITE_STATES","OVERWRITE_DESCRIPTION_TEMPLATE"],l=function(i,r,n,o,c,l,u,h,d,p){var _=this;_.PAGE=l,_.disableLiveTransfers=_.PAGE.disable_live_transfers,_.isRestrictedRestore=_.PAGE.restricted_restore,_.isRTL="1"===l.locale_is_rtl.toString(),_.overwriteOptions=h,_.reservedUsernamePatterns=_.PAGE.local.reserved_username_patterns,_.localUserHash=Object.create(null),_.reservedUsernames={},_.localPartialUsernames={},_.defaultWorkerOptions=n.getDefaultWorkerOptions(),_.workerOptionTypes=n.getWorkerOptionTypes(),_.control_overwrite=_.overwriteOptions[0],_.overwriteStates=d,_.accountFilterText="",_.acctTable={currentPage:1,pageSize:10,reverse:!1,order:"remote_user",advSearchOptions:{domain:"",user:"",owner:[],dedicated_ip:-1},activeAdvFilter:null},_.getDedicatedIPDomains=function(){return _.PAGE.domainsWithDedicatedIp},_.showDedicatedIPColumn=!0;var f=!!l.remote&&s.parsePerlBoolean(l.remote.supports_express_transfers),m=!!l.remote&&s.parsePerlBoolean(l.remote.supports_live_transfers),g=m&&!_.disableLiveTransfers;i.supportsLiveTransfers=m,i.liveTransfersNoticeIsDismissed=l.liveTransfersNoticeIsDismissed,i.liveTransfersPre90NoticeIsDismissed=l.liveTransfersPre90NoticeIsDismissed,i.isAcctTabActive=!0,_.disableLiveTransfers&&(i.liveTransfersNoticeIsDismissed=!0),i.dismissLiveTransfersNotice=function(){i.liveTransfersNoticeIsDismissed=!0,u.set("live_transfers_notice_is_dismissed",1)},i.dismissLiveTransfersPre90Notice=function(){i.liveTransfersPre90NoticeIsDismissed=!0,i.liveTransfersNoticeIsDismissed=!0,u.set("live_transfers_pre_90_notice_is_dismissed",1)},r.showTable=function(){return!i.isAcctTabActive||!i.supportsLiveTransfers||i.supportsLiveTransfers&&i.liveTransfersNoticeIsDismissed},r.setAcctTabActive=function(e){i.isAcctTabActive=e},_.createUser=function(e,t){e.initialindex=t,e.copy_homedir=a.copy_homedir,e.copy_databases=a.copy_databases,e.copy_bwdata=a.copy_bwdata,e.copy_reseller_privs=a.copy_reseller_privs,e.copy_proxy_option=g,e.proxyOption={id:"proxy_option",modelKey:"copy_proxy_option",value:g,default:g,supports_live_transfers:g,supports_express_transfers:f},e.selected=0,e.overwrite_type=_.overwriteOptions[0],e.overwrite_account=0,e.overwrite_with_delete=0,e.userCheckStates={duplicate:!1,reserved:!1,existing:!1},e.dedicated_ip=e.dedicated_ip||_.getDedicatedIPDomains()[e.domain]?1:0,e.existing_dedicated_ip=e.dedicated_ip,e.oldlocaluser=e.user,e.localuser=e.user,e.invalidDomain=_.PAGE.local.domains[e.domain]&&_.PAGE.local.domains[e.domain]!==e.user?1:0,e.is_reseller=_.PAGE.remote.resellers&&_.PAGE.remote.resellers[e.remote_user]?1:0,e.invalidUser=_.PAGE.local.users[e.remote_user]?1:0,e.isCustomized=!1,e.workerNodes=e.worker_nodes||{},n.resetAccountToDefaults(e)},_.expandedAccount=!1,_.PAGE.items.accounts.forEach(_.createUser);var v=o("accountFilter"),y=o("advanceAccountFilter"),k=o("startFrom"),b=o("orderBy"),A=o("cpLimitTo");_.filteredAccounts=v(y(this.PAGE.items.accounts,_.acctTable.activeAdvFilter),_.accountFilterText),_.viewableAccounts=A(k(b(_.filteredAccounts,_.acctTable.order,_.acctTable.reverse),(_.acctTable.currentPage-1)*_.acctTable.pageSize),_.acctTable.pageSize),_.updateFilteredAccounts=function(){_.filteredAccounts=v(y(this.PAGE.items.accounts,_.acctTable.activeAdvFilter),_.accountFilterText)},_.updateViewableAccounts=function(){var e=_.acctTable.pageSize,t=b(_.filteredAccounts,_.acctTable.order,_.acctTable.reverse);t=A(k(t,(_.acctTable.currentPage-1)*e),e),_.viewableAccounts=t},_.getUsernamePattern=function(e){return"TRIM_PATTERN"===e?new RegExp(_.PAGE.UN_TRIM_REG_EXP):"TRANSFER_USER_RESTRICT"===e?new RegExp(_.PAGE.USERNAME_TRANSFER_REGEXP):"NONTRANSFER_USER_RESTRICT"===e?new RegExp(_.PAGE.USERNAME_REGEXP):null},i.$on("recheckUsersCalled",(function(t,s){e.forEach(s.dataset,(function(e){_.updateOverwriteFlags(e,!1,!0),_.updateUserCheckStates(e),_.checkAccountForDuplicateLocals(e),_.updateAccountsControlRow()}))})),i.$on("selectedAccountsEmptied",(function(){_.acct_checkbox_control=!1,_.updateAccountsControlRow()})),i.$watch((function(){return _.acctTable}),(function(){_.updateViewableAccounts()}),!0),i.$watch((function(){return _.viewableAccounts}),(function(){_.updateAccountsControlRow()}),!0);for(var w=0;w<_.PAGE.local.reserved_usernames.length;w++){var E=_.PAGE.local.reserved_usernames[w].toLowerCase();_.reservedUsernames[E]=1}return e.forEach(_.PAGE.local.users,(function(e,t){this[_.makeUsernamePartial(t,!0)]=t}),_.localPartialUsernames),e.forEach(_.PAGE.items.accounts,(function(e,t){_.storeLocalUserHash(e.initialindex,e.oldlocaluser,e.localuser)})),_.numberOfColumns=9,["bytesused","owner","dedicated_ip"].forEach((function(e){_.showColumn(e)||_.numberOfColumns--})),_.skipOptions=[{id:"copy_homedir_for",label:t.maketext("Home Directory"),modelKey:"copy_homedir",default:a.copy_homedir},{id:"reseller_privs_for",label:t.maketext("Reseller Privileges"),modelKey:"copy_reseller_privs",default:a.copy_reseller_privs,disabled:_.isRestrictedRestore},{id:"copy_acctdb_for",label:t.maketext("Databases"),modelKey:"copy_databases",default:a.copy_databases},{id:"copy_bwdata_for",label:t.maketext("Bandwidth Data"),modelKey:"copy_bwdata",default:a.copy_bwdata}],_.openModal=c.open.bind(c),_.overwriteDescriptionTemplate=p,this._workerOptionAltered=n.checkWorkerOptionsAltered.bind(n),_};e.extend(l.prototype,{storeLocalUserHash:function(t,s,i){var r=this,n=this.makeUsernamePartial(i,!0),o=this.makeUsernamePartial(s,!0);r.localUserHash[o]=r.localUserHash[o]||[],e.forEach(r.localUserHash[o],(function(e,s){e===t&&r.localUserHash[o].splice(s,1)})),r.localUserHash[n]=r.localUserHash[n]||[],r.localUserHash[n].push(t)},updateAccounts:function(){this.updateFilteredAccounts(),this.updateViewableAccounts()},getGlyphClass:function(e){if(e.selected&&!e.domainConflict)return e.invalidUser?"glyphicon-exclamation-sign":"glyphicon-ok"},dedicatedIpClass:function(e){return e===this.acctTable.advSearchOptions.dedicated_ip?"btn-primary":"btn-default"},_getColumnControlState:function(e,t){if(!e.length)return!1;for(var s=0;s<e.length;s++){if(!e[s][t])return!1}return!0},_getOverwriteColumnControlState:function(e,t){if(!e.length)return this.overwriteOptions[0];for(var s,i=0;i<e.length;i++){var r=e[i];if(this.canNeedOverwrite(r)&&(s||(s=r[t]),r[t].value!==s.value))return}return s||this.overwriteOptions[0]},updateAccountsControlRow:function(){var t=[{param:"selected",controlModel:"acct_checkbox_control",checkFunction:this._getColumnControlState.bind(this)},{param:"dedicated_ip",controlModel:"control_dedicated_ip",onlySelected:!0,checkFunction:this._getColumnControlState.bind(this)},{param:"overwrite_type",controlModel:"control_overwrite",onlySelected:!0,checkFunction:this._getOverwriteColumnControlState.bind(this)}],s=this.viewableAccounts.filter((function(e){return!!e.selected}));e.forEach(t,(function(e){var t=e.onlySelected?s:this.viewableAccounts;this[e.controlModel]=e.checkFunction(t,e.param)}),this)},setAdvanceSearch:function(t){this.acctTable.activeAdvFilter=e.copy(t),this.updateAccounts(),t||(this.acctTable.advSearchOptions={domain:"",user:"",owner:[],dedicated_ip:-1})},handleDedicatedIpForArray:function(t){var s=this;e.forEach(t,(function(e){s.getDedicatedIPDomains()[e.domain]&&(e.dedicated_ip=1)}))},isDedicatedIpDisabled:function(e){return!!this.getDedicatedIPDomains()[e.domain]||!this.PAGE.local.available_ips.length},overwriteFilter:function(e){return this.PAGE.local.users[e.user]||this.PAGE.local.users[e.localuser]||this.PAGE.local.domains[e.domain]===e.localuser},validateAccount:function(e){this.storeLocalUserHash(e.initialindex,e.oldlocaluser,e.localuser),this.checkAccountForDuplicateLocals(e),e.oldlocaluser=e.localuser,this.updateUserCheckStates(e)},updateUserCheckStates:function(e){e.userCheckStates.reserved=this.isReservedUsername(e),e.userCheckStates.existing=this.isExistingLocalUser(e),e.userCheckStates.invalid=!this.isLocalUsernameValid(e),e.overwrite_type=e.selected?e.overwrite_type:this.overwriteOptions[0],this.updateLocalUserStatus(e)},updateLocalUserStatus:function(e){!1!==e.userCheckStates.existing&&e.overwrite_type.value===this.overwriteStates.NO_OVERWRITE||!1!==e.userCheckStates.duplicate||!1!==e.userCheckStates.invalid||!1!==e.userCheckStates.reserved?e.invalidUser=!0:e.invalidUser=!1},getInputClass:function(e){if(e.selected&&!e.domainConflict)return e.invalidUser?"has-error":"has-success"},getUserNameFromAcct:function(e){var t=e.localuser||"";return t.length||(t=e.remote_user),t},findAccountsByUsername:function(e,t,s){t=Number(t)||-1,s=Number(s)||0,-1!==t&&(e=e.substr(0,t));for(var i,r=[],n=s;n<this.PAGE.items.accounts.length;n++)if(0===(i=this.PAGE.items.accounts[n]).localuser.toLowerCase().indexOf(e)){if(e.length<t&&i.localuser.length>e.length)continue;if(-1===t&&e.length!==i.localuser.length)continue;r.push(n)}return r},findSelectedAccountsByUsername:function(){var e,t=this.findAccountsByUsername.apply(this,arguments),s=[];if(!1===t)return s;for(var i=0;i<t.length;i++)e=t[i],this.PAGE.items.accounts[e].selected&&s.push(e);return s},checkAccountForDuplicateLocals:function(e){e.userCheckStates.duplicate=!1;var t=this.makeUsernamePartial(e.oldlocaluser,!0);if(this.localUserHash[t]&&1===this.localUserHash[t].length){var s=this.localUserHash[t][0];this.PAGE.items.accounts[s].userCheckStates.duplicate=!1,this.updateLocalUserStatus(this.PAGE.items.accounts[s])}if(e.localuser){for(var i,r,n=e.localuser,o=this.makeUsernamePartial(n,!0),a=[],c=0;c<this.localUserHash[o].length;c++)r=this.localUserHash[o][c],(i=this.PAGE.items.accounts[r]).userCheckStates.duplicate=!1,this.updateLocalUserStatus(i),i.selected&&a.push(i);if(a.length>1)for(c=0;c<a.length;c++)(i=a[c]).userCheckStates.duplicate=!0,this.updateLocalUserStatus(i)}},checkForDuplicateLocals:function(){var e,t;for(e=0;e<this.PAGE.items.accounts.length;e++)(t=this.PAGE.items.accounts[e]).userCheckStates.duplicate=!1,this.updateLocalUserStatus(t);for(e=0;e<this.PAGE.items.accounts.length;e++)(t=this.PAGE.items.accounts[e]).userCheckStates.duplicate||this.checkAccountForDuplicateLocals(t)},isReservedUsername:function(e){var t,s,i=this.getUserNameFromAcct(e).replace(/^\s*(.+)\s*$/i,"$1");if(i in this.reservedUsernames)return!0;for(var r=0;r<this.reservedUsernamePatterns.length;r++)if(s=this.reservedUsernamePatterns[r],t=new RegExp(s,"gi"),null!==i.match(t))return!0;return!1},isExistingLocalUser:function(e){var t=this.getUserNameFromAcct(e),s=this.makeUsernamePartial(t,!0);return s in this.localPartialUsernames&&(e.similarLocalUser=this.localPartialUsernames[s],!0)},isLocalUsernameValid:function(e){var t=this.getUsernamePattern("TRANSFER_USER_RESTRICT");return!!this.makeUsernamePartial(e.localuser,!0).replace(/\-/gi,"").length&&t.test(e.localuser)},makeUsernamePartial:function(e,t){return t&&(e=e.replace(/[\_\.]/gi,"")),e.replace(this.getUsernamePattern("TRIM_PATTERN"),"$1").toLowerCase()},getAccountRowClasses:function(e){return e.selected?e.invalidUser||e.invalidDomain?"danger":"success":""},showColumn:function(e){switch(e){case"bytesused":return!!this.PAGE.remote.has_disk_used;case"owner":return!!this.PAGE.remote.has_owners;case"dedicated_ip":return!!this.showDedicatedIPColumn;default:return!0}},getChevronClasses:function(e){var t=this.isRTL?"fa-chevron-left":"fa-chevron-right";return this.isAccountExpanded(e)?"fa-chevron-down":t},updateCustomizedFlag:function(e){e.isCustomized=this._skipOptionsAltered(e)||this._workerOptionAltered(e)||this._proxyOptionAltered(e)},_skipOptionsAltered:function(e){for(var t=Object.keys(a),s=0;s<t.length;s++){var i=t[s];if(e[i]!==a[i])return!0}return!1},_proxyOptionAltered:function(e){return e.proxyOption.value!==e.proxyOption.default},isAccountExpanded:function(e){return this.expandedAccount===e},expandAccount:function(e){this.expandedAccount&&this.collapseAccount(this.expandedAccount),this.expandedAccount=e,this.accountSettingUpdated(e,!0)},collapseAccount:function(e){this.expandedAccount=!1},toggleAccountExpansion:function(e){this.isAccountExpanded(e)?this.collapseAccount(e):this.expandAccount(e)},getCustomizeLabel:function(e){return e.isCustomized?o:n},onExpandPanelOptionChanged:function(e,t,s){this.updateAccountSetting(e,t,s)},onExpandPanelApplyToAll:function(e,t,s,i,r){var n=s.map((function(e){return e.modelKey}),this),o=i&&Object.keys(i).map((function(e){return i[e].modelKey}),this)||[],a=["dedicated_ip","copy_proxy_option"].concat(n,o),c=this.canNeedOverwrite(e);t.filter((function(t){return t!==e})).forEach((function(t){var s=c&&this.canNeedOverwrite(t),i=a.slice();s&&i.push("overwrite_type"),i.forEach((function(s){this.updateAccountSetting(t,s,e[s],!1)}),this),s&&this.updateOverwriteFlags(t,!1),this.validateAccount(t)}),this)},updateAccountSetting:function(e,t,s,i){i||"copy_proxy_option"!==t||(e.proxyOption.value=s),e[t]=s,this.accountSettingUpdated(e,i)},accountSettingUpdated:function(e,t,s){var i;s||e.selected||(e.selected=1,i=!0),this.updateCustomizedFlag(e),t&&this.validateAccount(e),i&&this.updateSelectedAccounts()},setUpdateSelectedAccountsFunction:function(e){this._updateSelectedAccounts=e},updateSelectedAccounts:function(){this._updateSelectedAccounts&&this._updateSelectedAccounts()},accountSelectionUpdated:function(e){this.updateSelectedAccounts()},canNeedOverwrite:function(e){var t=this.PAGE.local.users,s=this.PAGE.local.domains;return t[e.user]||t[e.localuser]||s[e.domain]===e.localuser},updateOverwriteFlags:function(e,t,s){switch(e.overwrite_account=0,e.overwrite_with_delete=0,e.overwrite_type.value){case this.overwriteStates.OVERWRITE_WITH_DELETE:e.overwrite_with_delete=1;case this.overwriteStates.OVERWRITE:e.overwrite_account=1}this.accountSettingUpdated(e,t,s)},openOverwriteDescriptionModal:function(){var e=this;e.overwriteModal=this.openModal({templateUrl:this.overwriteDescriptionTemplate,controller:["$scope",function(t){t.close=function(){e.closeOverwriteDescriptionModal()}}]})},closeOverwriteDescriptionModal:function(){this.overwriteModal&&(this.overwriteModal.close(),this.overwriteModal=null)}});try{(r=e.module("App")).value("PAGE",PAGE)}catch(t){r=e.module("App",[])}return l.$inject=c,r.controller("AccountTableController",l)})),define("app/directives/boolToIntDirective",["angular"],(function(e){"use strict";var t;try{t=e.module("App")}catch(s){t=e.module("App",[])}t.directive("boolToInt",[function(){return{restrict:"A",require:"ngModel",priority:99,link:function(e,t,s,i){i.$formatters.push((function(e){return!!e})),i.$parsers.push((function(e){return e?1:0}))}}}])})),define("app/directives/ngDebounceDirective",["angular"],(function(e){"use strict";var t;try{t=e.module("App")}catch(s){t=e.module("App",[])}t.directive("ngDebounce",["$timeout",function(e){return{restrict:"A",require:"ngModel",priority:99,link:function(t,s,i,r){var n;"radio"!==i.type&&"checkbox"!==i.type&&(s.unbind("input"),s.bind("input",(function(){e.cancel(n),n=e((function(){t.$apply((function(){r.$setViewValue(s.val())}))}),250)})),s.bind("blur",(function(){e((function(){t.$apply((function(){r.$setViewValue(s.val())}))}))})))}}}])})),define("app/directives/preventBubblingDirective",["angular"],(function(e){"use strict";var t;try{t=e.module("App")}catch(s){t=e.module("App",[])}t.directive("preventBubbling",[function(){return{restrict:"A",link:function(e,t){t.bind("click",(function(e){e.preventDefault(),e.stopPropagation()}))}}}])})),define("app/directives/clickOnceDirective",["angular"],(function(e){"use strict";var t;try{t=e.module("App")}catch(s){t=e.module("App",[])}t.directive("clickOnce",["$timeout",function(e){return{restrict:"A",link:function(t,s,i){var r=i.clickOnce;s.bind("click",(function(){e((function(){r&&s.html(r),s.attr("disabled",!0)}),0)}))}}}])})),define("app/filters/overwriteFilter",["angular"],(function(e){"use strict";var t;try{t=e.module("App")}catch(s){t=e.module("App",[])}t.filter("overwriteFilter",(function(){var t=PAGE.local.users,s=PAGE.local.domains;return function(i){var r=[];return e.forEach(i,(function(e){(t[e.user]||t[e.localuser]||s[e.domain]===e.localuser)&&r.push(e)})),r}}))})),define("app/filters/bytesFilter",["angular"],(function(e){"use strict";var t;try{t=e.module("App")}catch(s){t=e.module("App",[])}t.filter("bytes",(function(){return function(e){return LOCALE.format_bytes(e)}}))})),function(e){"use strict";var t=function(){var t=CPANEL.Y.one("#reAnalyzeRemoteButton"),s=t.innerHTML;t.disabled=!0,t.innerHTML="<i class='glyphicon glyphicon-refresh animate-spin'></i> "+LOCALE.maketext("Performing Analysis …"),CPANEL.api({func:"analyze_transfer_session_remote",data:{transfer_session_id:PAGE.transfer_session_id},callback:CPANEL.ajax.build_page_callback((function(){e.location.href="transfer_selection?transfer_session_id="+encodeURIComponent(PAGE.transfer_session_id)}),{pagenotice_container:"callback_block",on_error:function(){t.disabled=!1,t.innerHTML=s}})})};EVENT.onDOMReady((function(){if(EVENT.on(CPANEL.Y.one("#reAnalyzeRemoteButton"),"click",t),CPANEL.api({func:"get_transfer_session_state",data:{transfer_session_id:PAGE.transfer_session_id},callback:{success:function(t){var s=t.cpanel_data.state_name;t.cpanel_error?alert(LOCALE.maketext("Failed to retrieve the session state: [_1]",t.cpanel_error)):s&&"PENDING"!==s&&(confirm(LOCALE.maketext("The session has already started and cannot accept additional inputs. Would you like to view the transfer session?"))?e.location.href="transfer_session?transfer_session_id="+encodeURIComponent(PAGE.transfer_session_id):e.history.go(-1))},failure:function(){alert(LOCALE.maketext("Failed to retrieve the session state."))}}}),PAGE.configuration_modules.Apache.analysis){PAGE.EABlockers=PAGE.configuration_modules.Apache.analysis["Blocker Data"];for(var s=PAGE.EABlockers.length-1;s>=0;s--)if("Cpanel"===PAGE.EABlockers[s].vendor_id&&PAGE.EABlockers[s].items)for(var i=PAGE.EABlockers[s].items.length-1;i>=0;i--)2===PAGE.EABlockers[s].items[i].status&&(PAGE.blockerExists=!0)}}))}(window),define("app/getacctlist",["angular","app/directives/accountExpandPanel","cjt/util/locale","app/overwriteStates","app/overwriteOptions","jquery","ngRoute","uiBootstrap","angular-chosen","ngSanitize","cjt/modules","cjt/directives/toggleLabelInfoDirective"],(function(e,t,s,i,r){"use strict";return function(){var s=e.module("App",["cjt2.config.whm.configProvider","cjt2.whm","ngSanitize","ui.bootstrap",t.namespace]);return s.value("OVERWRITE_DESCRIPTION_TEMPLATE","overwriteWithDeleteDescription.ptt"),s.value("OVERWRITE_STATES",i),s.value("OVERWRITE_OPTIONS",r),s.value("LOCAL_WORKER_NODES",PAGE.local.linked_nodes),s.value("REMOTE_WORKER_NODES",PAGE.remote.linked_nodes),require(["cjt/bootstrap","app/controllers/MainController","app/controllers/AccountTableController","app/directives/boolToIntDirective","app/directives/ngDebounceDirective","app/directives/preventBubblingDirective","cjt/directives/pageSizeDirective","app/directives/clickOnceDirective","app/filters/overwriteFilter","app/filters/bytesFilter"],(function(e){e(document)}))}}));