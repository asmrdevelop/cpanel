<div id="auth-error-view">
    <div ng-show="status === 'authorizing'">
        <h2>[% locale.maketext('Authorizing this server to open a support ticket for you …') %]</h2>
        <p>[% locale.maketext('We opened a dialog box for you to authorize [asis,cPanel amp() WHM] to make API calls on the [asis,cPanel Customer Portal] with your login.') %]</p>
        <h2>[% locale.maketext('What is the next step?') %]</h2>
        <p>[% locale.maketext('If you have already created a [asis, cPanel Manage 2] account, use that account’s login email and password. The login process automatically authorizes this server to make [asis,cPanel Customer Portal] [asis,API] calls.') %]</p>
        <p>[% locale.maketext('If you have not created a [asis,cPanel Manage 2] account, create one by selecting the [output,strong,Create Account] link in the dialog box.') %]</p>
        <p>[% locale.maketext('If you have already logged in to your [asis, cPanel Manage 2] account, the system will prompt you to allow this server to make [asis,cPanel Customer Portal] API calls via your [asis, cPanel Manage 2] account.') %]</p>
        <h2>[% locale.maketext('What permission am I granting?') %]</h2>
        <p>[% locale.maketext('If you log in to the [asis,cPanel Customer Portal] and authorize this server to perform actions on your behalf, the server may perform any of the following actions:') %]
        <ul>
            <li>[% locale.maketext('Retrieve the current Technical Support Agreement.') %]</li>
            <li>[% locale.maketext('Retrieve and record your acceptance of the Technical Support Agreement.') %]</li>
            <li>[% locale.maketext('Open a support ticket on your behalf.') %]</li>
            <li>[% locale.maketext('List support tickets related to this server.') %]</li>
            <li>[% locale.maketext('Test this server’s [asis,SSH] connection if you grant [asis,cPanel] support access to this server later in the process.') %]</li>
        </ul>
    </div>
    <div cp-loading-panel id="verifyingAuthorization" ng-show="status === 'verifying'">
        <strong>[% locale.maketext('Information:') %]</strong>
        [% locale.maketext('We are verifying that the authorization is established …') %]
    </div>
    <div ng-show="status === 'error'">
        <button id="retry" class="btn btn-primary"
            ng-click="retry()">
            [% locale.maketext('Try Again') %]
        </button>

        <button id="open-anyway"
                ng-hide="openAnyway"
                class="btn btn-default"
                ng-click="openAnyway = true">
            [% locale.maketext('Open a ticket in the [asis,cPanel Customer Portal]') %]
        </button>
        <div class="scary-warning" ng-show="openAnyway">
            <div class="alert alert-warning">
                <span class="glyphicon glyphicon-exclamation-sign"></span>
                <div class="alert-message">
                    <strong>[% locale.maketext('Warning:') %]</strong>
                    <p>[% locale.maketext('We [output,strong,strongly] recommend you use the Retry option above and log in with your [asis, cPanel Customer Portal] account. If you have not created a [asis, cPanel Customer Portal] account, we encourage you to create one. This system allows us to automate more steps for the ticket creation process and provide faster support. If you bypass this system, you must manually enter significantly more information about your server and your server may require manual configuration changes.') %]</p>
                    <a id="open-anyway-confirm"
                        class="btn btn-default"
                        target="tickets"
                        ng-click="openAnyway = false"
                        ng-href="{{ getTicketUrl('cpanel') }}">
                        [% locale.maketext('Open a Ticket') %]
                        <span class="fas fa-external-link-alt"></span>
                    </a>
                    <a id="open-anyway-cancel"
                        class="btn btn-cancel"
                        ng-click="openAnyway = false">
                        [% locale.maketext('Cancel') %]
                    </a>
                </div>
            </div>
        </div>

        <button id="cancel"
                class="btn btn-link"
                ng-click="cancel()">
            [% locale.maketext('Cancel') %]
        </button>
    </div>
</div>
