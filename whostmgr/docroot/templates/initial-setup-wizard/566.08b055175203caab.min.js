"use strict";(self.webpackChunkinitial_setup_wizard=self.webpackChunkinitial_setup_wizard||[]).push([[566],{6566:(j,v,o)=>{o.r(v),o.d(v,{ServerSetupModule:()=>w});var p=o(6895),x=o(269),c=o(2777),u=o(2502),m=o(6154),f=o(1059),C=o(4850),Z=o(537);const M=t=>{const{controls:{ns1:a,ns2:n}}=t;if((a.value||n.value)&&(!a.value||!n.value)&&(a.value||n.value))return{both_ns:!0}},g=t=>{if(t.value?.trim())return u.Xz.fqdn()(t)},S=t=>{if(t.value?.trim())return u.Tt.validateEmail()(t)};var O=o(3426),_=o(1221),e=o(6738),h=o(5419),i=o(4719);function P(t,a){if(1&t&&(e.TgZ(0,"div",19),e._UZ(1,"i",20),e._uU(2),e.qZA()),2&t){const n=e.oxw();e.xp6(2),e.hij(" ",n.locale.maketext("The email must contain a username and a domain.")," ")}}function T(t,a){if(1&t&&(e.TgZ(0,"div",19),e._UZ(1,"i",20)(2,"span",21),e.qZA()),2&t){const n=e.oxw();e.xp6(2),e.Q6J("innerHTML",n.getError(n.form.controls.ns1).message,e.oJD)}}function y(t,a){if(1&t&&(e.TgZ(0,"div",19),e._UZ(1,"i",20)(2,"span",21),e.qZA()),2&t){const n=e.oxw();e.xp6(2),e.Q6J("innerHTML",n.getError(n.form.controls.ns2).message,e.oJD)}}function b(t,a){if(1&t&&(e.TgZ(0,"div",19),e._UZ(1,"i",20)(2,"span",21),e.qZA()),2&t){const n=e.oxw();e.xp6(2),e.Q6J("innerHTML",n.locale.maketext("You must either specify [output,strong,both] nameservers, or specify none to configure your nameservers later."),e.oJD)}}function k(t,a){if(1&t&&(e.TgZ(0,"div",22),e._UZ(1,"i",23),e.TgZ(2,"div"),e._UZ(3,"span",21)(4,"br"),e.TgZ(5,"a",24),e._uU(6),e.qZA()()()),2&t){const n=e.oxw();e.xp6(3),e.Q6J("innerHTML",n.ns_warning,e.oJD),e.xp6(3),e.hij(" ",n.locale.maketext("Learn More")," ")}}let J=(()=>{class t extends c.h8{constructor(n,r,s,d,l){super(n),this.locale=n,this.page=r,this.whmapi=s,this.window=d,this.continueLabel=this.locale.maketext("Finish"),this.cancelLabel=this.locale.maketext("Skip"),this.canContinue=!0,this.loading=!1,u.uZ.locale=n,this.form=l.group({ns1:l.control(this.page.nameservers[0],[g]),ns2:l.control(this.page.nameservers[1],[g]),email:l.control(this.page.email,[S])},{validators:[M]}),this.suitable_ns$=(0,O.aj)([this.form.controls.ns1.valueChanges.pipe((0,f.O)(this.form.controls.ns1.value)),this.form.controls.ns2.valueChanges.pipe((0,f.O)(this.form.controls.ns2.value))]).pipe((0,C.U)((N=>N.every((Y=>!/.cprapid.com$/.test(Y)))))),this.ns_warning=this.locale.maketext("Default nameservers of the type [asis,_1] are not compatible with [asis,_2] domain registrations.","<code>.cprapid.com</code>","<code>.com</code>")}next(){if(this.loading||this.form.invalid)return;this.loading=!0;var n=this.page.email!==this.form.get("email").value,r=[this.form.get("ns1").value,this.form.get("ns2").value].some(((d,l)=>d!==this.page.nameservers[l]));if(!n&&!r)return void this.exit();const s=[];n&&s.push(this.whmapi.post(new m.r(m.N.JsonApi,{method:"update_contact_email",arguments:[{name:"contact_email",value:this.form.get("email").value}]}))),r&&s.push(this.whmapi.post(new m.r(m.N.JsonApi,{method:"update_nameservers_config",arguments:[{name:"nameserver",value:this.form.get("ns1").value},{name:"nameserver2",value:this.form.get("ns2").value}]}))),(0,_.z)(...s).pipe((0,Z.x)((()=>this.loading=!1))).subscribe((()=>this.exit()))}exit(){this.window.location.href=c.Ho}getError(n){if(Object.keys(n.errors).length)return n.errors[Object.keys(n.errors)[0]]}cancel(){this.exit()}}return t.ɵfac=function(n){return new(n||t)(e.Y36(x.g),e.Y36(c.qX),e.Y36(h.A4),e.Y36(Window),e.Y36(i.qu))},t.ɵcmp=e.Xpm({type:t,selectors:[["isw-server-setup"]],features:[e.qOj],decls:38,vars:20,consts:[[1,"initial-setup-content-container"],[1,"form","needs-validation",3,"formGroup","ngSubmit"],[1,"form-group","mb-5"],["for","email",1,"form-label"],[1,"optional"],["href","https://go.cpanel.net/datapolicy","target","privacyPolicy","rel","noopener noreferrer","id","privacy-policy-link",1,"external-link","pull-right"],[1,"help-text"],["formControlName","email","id","email","type","email",1,"form-control",3,"placeholder"],["class","invalid-feedback d-flex",4,"ngIf"],["for","ns1",1,"form-label"],["href","https://go.cpanel.net/PrivateNameservers","target","nameserversDocumentation","rel","noopener noreferrer","id","nameservers-documentation-link",1,"external-link","pull-right"],[1,"input-group","flex-nowrap","mb-2"],["formControlName","ns1","type","text","id","ns1",1,"form-control",3,"placeholder"],["id","reset-ns1-button","type","button",1,"btn","btn-outline-primary",3,"click"],["aria-hidden","true",1,"ri-arrow-go-back-line"],["formControlName","ns2","type","text","id","ns2",1,"form-control",3,"placeholder"],["id","reset-ns2-button","type","button",1,"btn","btn-outline-primary",3,"click"],["id","warning-ns","class","alert alert-warning d-flex",4,"ngIf"],["type","submit",1,"visually-hidden"],[1,"invalid-feedback","d-flex"],["aria-hidden","true",1,"ri-error-warning-line"],[3,"innerHTML"],["id","warning-ns",1,"alert","alert-warning","d-flex"],[1,"ri-error-warning-line","alert-icon"],["href","https://go.cpanel.net/PrivateNameservers","target","nameserversDocumentation","rel","noopener noreferrer","id","nameservers-warning-link",1,"external-link"]],template:function(n,r){1&n&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("ngSubmit",(function(){return r.next()})),e.TgZ(2,"div",2)(3,"label",3),e._uU(4),e.TgZ(5,"span",4),e._uU(6,"(optional)"),e.qZA()(),e.TgZ(7,"a",5),e._uU(8),e.qZA(),e.TgZ(9,"span",6),e._uU(10),e.qZA(),e._UZ(11,"input",7),e.YNc(12,P,3,1,"div",8),e.qZA(),e.TgZ(13,"div",2)(14,"label",9),e._uU(15),e.TgZ(16,"span",4),e._uU(17,"(optional)"),e.qZA()(),e.TgZ(18,"a",10),e._uU(19),e.qZA(),e.TgZ(20,"span",6),e._uU(21),e.qZA(),e.TgZ(22,"div",11),e._UZ(23,"input",12),e.TgZ(24,"button",13),e.NdJ("click",(function(){return r.form.controls.ns1.reset(r.page.nameservers[0])})),e._UZ(25,"i",14),e._uU(26),e.qZA()(),e.YNc(27,T,3,1,"div",8),e.TgZ(28,"div",11),e._UZ(29,"input",15),e.TgZ(30,"button",16),e.NdJ("click",(function(){return r.form.controls.ns2.reset(r.page.nameservers[1])})),e._UZ(31,"i",14),e._uU(32),e.qZA()(),e.YNc(33,y,3,1,"div",8),e.YNc(34,b,3,1,"div",8),e.YNc(35,k,7,2,"div",17),e.ALo(36,"async"),e.qZA(),e._UZ(37,"button",18),e.qZA()()),2&n&&(e.xp6(1),e.Q6J("formGroup",r.form),e.xp6(3),e.hij("",r.locale.maketext("Email Address")," "),e.xp6(4),e.hij(" ",r.locale.maketext("Privacy Policy")," "),e.xp6(2),e.Oqu(r.locale.maketext("Your server will send status and error notifications to this address.")),e.xp6(1),e.Q6J("placeholder",r.locale.maketext("Your contact email address. For example, [asis,user@example.com].")),e.xp6(1),e.Q6J("ngIf",r.form.controls.email.invalid),e.xp6(3),e.hij("",r.locale.maketext("Nameservers")," "),e.xp6(4),e.hij(" ",r.locale.maketext("Learn More")," "),e.xp6(2),e.AsE(" ",r.locale.maketext("Your server requires nameservers before you can create [asis,cPanel] or reseller accounts.")," ",r.locale.maketext("Nameservers convert domain names into server IP addresses so that visitors can access your websites.")," "),e.xp6(2),e.Q6J("placeholder",r.locale.maketext("Your primary nameserver. For example, [asis,ns1.example.com].")),e.xp6(3),e.hij(" ",r.locale.maketext("Reset")," "),e.xp6(1),e.Q6J("ngIf",r.form.controls.ns1.invalid),e.xp6(2),e.Q6J("placeholder",r.locale.maketext("Your secondary nameserver. For example, [asis,ns2.example.com].")),e.xp6(3),e.hij(" ",r.locale.maketext("Reset")," "),e.xp6(1),e.Q6J("ngIf",r.form.controls.ns2.invalid),e.xp6(1),e.Q6J("ngIf",null==r.form.errors?null:r.form.errors.both_ns),e.xp6(1),e.Q6J("ngIf",!e.lcZ(36,18,r.suitable_ns$)))},directives:[i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u,p.O5],pipes:[p.Ov],styles:[".form[_ngcontent-%COMP%]{display:inline-block;width:400px;max-width:100%}html[dir=ltr][_ngcontent-%COMP%]   .form[_ngcontent-%COMP%], [dir=ltr][_ngcontent-%COMP%]   .form[_ngcontent-%COMP%], [dir=ltr][_nghost-%COMP%]   .form[_ngcontent-%COMP%], html[dir=ltr][_nghost-%COMP%]   .form[_ngcontent-%COMP%], html[dir=ltr]   [_nghost-%COMP%]   .form[_ngcontent-%COMP%], [dir=ltr][_nghost-%COMP%]   .form[_ngcontent-%COMP%], [dir=ltr]   [_nghost-%COMP%]   .form[_ngcontent-%COMP%]{text-align:left}html[dir=rtl][_ngcontent-%COMP%]   .form[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .form[_ngcontent-%COMP%], [dir=rtl][_nghost-%COMP%]   .form[_ngcontent-%COMP%], html[dir=rtl][_nghost-%COMP%]   .form[_ngcontent-%COMP%], html[dir=rtl]   [_nghost-%COMP%]   .form[_ngcontent-%COMP%], [dir=rtl][_nghost-%COMP%]   .form[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .form[_ngcontent-%COMP%]{text-align:right}.invalid-feedback[_ngcontent-%COMP%]{display:block}"]}),t})();var U=o(208);const A=[{path:"",component:J,data:{animation:"ServerSetup"}}];let w=(()=>{class t{}return t.ɵfac=function(n){return new(n||t)},t.ɵmod=e.oAB({type:t}),t.ɵinj=e.cJS({providers:[h.A4],imports:[[p.ez,i.UX,U.Bz.forChild(A)]]}),t})()}}]);
