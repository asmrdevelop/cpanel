"use strict";(self.webpackChunkmultiphp_manager_ng7=self.webpackChunkmultiphp_manager_ng7||[]).push([[179],{2908:(H,X,m)=>{var A=m(1481),t=m(5062),N=m(9241),w=m(3358),h=m(6895),C=m(269),Y=m(591);class K{constructor(s=0,e=[],n=!1){this.status=s,this.packages=e,this.hasFPMInstalled=n}}var c=m(5397),P=m(7709),D=m(5419);let E=(()=>{class i{constructor(e){this.apiClient=e}getSystemDefault(){const e=new c.r(c.N.JsonApi,{method:"php_get_system_default_version"});return this.apiClient.get(e)}setSystemDefault(e){const n=new c.r(c.N.JsonApi,{method:"php_set_system_default_version",arguments:[new P.h("version",e)]});return this.apiClient.post(n)}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(D.A4))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var a=m(8989);let O=(()=>{class i{constructor(e,n){this.alertService=e,this.router=n}error(e){e.errors.forEach(n=>{this.alertService.error(n.message)})}routeTo(e){this.router.navigate([e])}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(a.c9),t.LFG(w.F0))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var pt=m(567);class L{constructor(s="",e=!1){this.version=s,this.isDeprecated=e,this.phpVersionRegex=/^\D+-php(\d{2,3})$/i}get formattedVersion(){return this.transformPHPFormat(this.version)}friendlyPHPFormat(s){let e=s||"";return e=`PHP ${s}`,e}transformPHPFormat(s){let e=s||"";const n=s.match(this.phpVersionRegex);if(n){const o=n[1].replace(/(\d)$/,".$1");e=this.friendlyPHPFormat(o),e=`${e} ( ${s} )`}return e}}var g=m(7489),S=m(4850);let U=(()=>{class i{constructor(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),b=(()=>{class i{constructor(e,n,o){this.appDataService=e,this.phpHelper=n,this.apiClient=o,this.fetchPhpListSubject=new Y.X({done:!1,result:null}),this._fetchFpmPackagesSubject=new Y.X({done:!1,result:null}),this.fpmPackagesReady$=this._fetchFpmPackagesSubject.asObservable()}fetchInstalledPhpVersionList(){null!=this.appDataService.installedPhpVersions?this.fetchPhpListSubject.next({done:!0,result:this.appDataService.installedPhpVersions}):(0,pt.D)({versionResponse:this.getPHPversions(),recommendedVersionsResponse:this.getEA4Recommendations()}).subscribe(e=>{if(e.versionResponse.success&&e.recommendedVersionsResponse.success)this.appDataService.installedPhpVersions=this.processPhpVersionInfo(e);else{this.appDataService.installedPhpVersions=null;let n="";e.versionResponse.hasErrors&&(this.phpHelper.error(e.versionResponse),n="'php_get_installed_versions' threw error."),e.recommendedVersionsResponse.hasErrors&&(this.phpHelper.error(e.recommendedVersionsResponse),n="'ea4_recommendations' threw error.")}this.fetchPhpListSubject.next({done:!0,result:this.appDataService.installedPhpVersions})})}processPhpVersionInfo(e){let n=[];const o=e.recommendedVersionsResponse.data;return n=e.versionResponse.data.map(p=>new L(p,o.includes(p))),n}getPHPversions(){const e=new c.r(c.N.JsonApi,{method:"php_get_installed_versions"});return this.apiClient.get(e)}getEA4Recommendations(){const e=new c.r(c.N.JsonApi,{method:"ea4_recommendations"});return this.apiClient.get(e).pipe((0,S.U)(n=>{if(null!==n.data)return n.data=(0,g.filter)((0,g.keys)(n.data),o=>/^ea-php\d{2}$/.test(o)),n}))}getPhpVersionDataByPackage(e){return(0,g.find)(this.appDataService.installedPhpVersions,["version",e])}reloadFpmPackages(){this.appDataService.installedPhpFpmPackages=null,this.fetchInstalledPhpFpmPackages()}fetchInstalledPhpFpmPackages(){null!=this.appDataService.installedPhpFpmPackages?this._fetchFpmPackagesSubject.next({done:!0,result:this.appDataService.installedPhpFpmPackages}):this._fetchEA4Packages().subscribe(e=>{e.hasErrors?(this.appDataService.installedPhpFpmPackages=null,this._fetchFpmPackagesSubject.next({done:!0,result:null}),e.hasErrors&&this.phpHelper.error(e)):(this.appDataService.installedPhpFpmPackages=this.filterFpmPackages(e.data),this._fetchFpmPackagesSubject.next({done:!0,result:this.appDataService.installedPhpFpmPackages}))})}filterFpmPackages(e){return(0,g.filter)(e,n=>/-php-fpm$/.test(n))}isPhpFpmInstalled(e){let n=!1;return this.appDataService.installedPhpFpmPackages&&null!==this.appDataService.installedPhpFpmPackages&&(n=this.appDataService.installedPhpFpmPackages.includes(e)),n}_fetchEA4Packages(){const e=new c.r(c.N.JsonApi,{method:"package_manager_list_packages",arguments:[new P.h("state","installed")]});return this.apiClient.get(e).pipe((0,S.U)(n=>(n.data&&(n.data=n.data.map(o=>o.package)),n)))}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(U),t.LFG(O),t.LFG(D.A4))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var y=(()=>{return(i=y||(y={})).button="button",i.dropdown="dropdown",y;var i})(),v=m(3044);function ct(i,s){if(1&i&&(t.TgZ(0,"span",5)(1,"span",6),t._uU(2),t.qZA()()),2&i){const e=t.oxw();t.MGl("id","",e.id,"-deprecated-pill"),t.xp6(2),t.Oqu(e.locale.maketext("Deprecated"))}}function ht(i,s){1&i&&t._UZ(0,"i",12)}function dt(i,s){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"li",9)(2,"a",10),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).selectPhpVersion(r)}),t.YNc(3,ht,1,0,"i",11),t._uU(4),t.qZA()(),t.BQk()}if(2&i){const e=s.$implicit,n=t.oxw(2);t.xp6(1),t.hYB("id","",n.id,"-",e.version,"-drop-menu-item"),t.xp6(2),t.Q6J("ngIf",n.checkSelectedVersion(e)),t.xp6(1),t.Oqu(e.formattedVersion)}}function gt(i,s){if(1&i&&(t.TgZ(0,"ul",7),t.YNc(1,dt,5,4,"ng-container",8),t.qZA()),2&i){const e=t.oxw();t.MGl("id","",e.id,"-drop-menu"),t.Q2q("aria-labelledby","",e.id,"-drop-button"),t.xp6(1),t.Q6J("ngForOf",e.phpVersionList)}}let J=(()=>{class i{constructor(e,n,o){this.locale=e,this.phpVersionService=n,this.appDataService=o,this.mode=y.button,this.buttonText="",this.disabled=!1,this.phpVersionChanged=new t.vpe,this.phpVersionList=[]}get dropdownText(){return this.mode===y.button?this.buttonText:this.selectedPhpVersion?this.selectedPhpVersion.formattedVersion:""}get showDeprecatedPill(){return!(this.mode===y.button||!this.selectedPhpVersion)&&this.selectedPhpVersion.isDeprecated}selectPhpVersion(e){this.phpVersionChanged.emit(e)}ngOnInit(){this.phpVersionService.fetchPhpListSubject?this.phpVersionService.fetchPhpListSubject.subscribe(e=>{e.done&&(this.phpVersionList=e.result)}):this.phpVersionList=this.appDataService.installedPhpVersions}checkSelectedVersion(e){let n=!1;return void 0!==this.selectedPhpVersion&&e.version===this.selectedPhpVersion.version&&(n=!0),n}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(C.g),t.Y36(b),t.Y36(U))},i.\u0275cmp=t.Xpm({type:i,selectors:[["multiphp-mgr-php-dropdown"]],inputs:{id:"id",mode:"mode",buttonText:"buttonText",selectedPhpVersion:"selectedPhpVersion",disabled:"disabled"},outputs:{phpVersionChanged:"phpVersionChanged"},decls:6,vars:4,consts:[["dropdown","",1,"btn-group","phpDropdownButton",3,"isDisabled"],["dropdownToggle","","type","button",1,"btn","dropdown-toggle",3,"id"],["class","deprecatedPillContainer",3,"id",4,"ngIf"],[1,"caret"],["class","dropdown-menu","role","menu",3,"id",4,"dropdownMenu"],[1,"deprecatedPillContainer",3,"id"],[1,"label","label-warning","deprecatedPill"],["role","menu",1,"dropdown-menu",3,"id"],[4,"ngFor","ngForOf"],["role","menuitem",3,"id"],[1,"dropdown-item",3,"click"],["class","fas fa-check versionIndicator","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"fas","fa-check","versionIndicator"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"button",1),t._uU(2),t.YNc(3,ct,3,2,"span",2),t._UZ(4,"span",3),t.qZA(),t.YNc(5,gt,2,3,"ul",4),t.qZA()),2&e&&(t.Q6J("isDisabled",n.disabled),t.xp6(1),t.MGl("id","",n.id,"-drop-button"),t.xp6(1),t.hij(" ",n.dropdownText," "),t.xp6(1),t.Q6J("ngIf",n.showDeprecatedPill))},directives:[v.TO,v.Mq,h.O5,v.Hz,h.sg],styles:["html[dir=ltr][_ngcontent-%COMP%]   .caret[_ngcontent-%COMP%], [dir=ltr][_ngcontent-%COMP%]   .caret[_ngcontent-%COMP%], [dir=ltr][_nghost-%COMP%]   .caret[_ngcontent-%COMP%], html[dir=ltr][_nghost-%COMP%]   .caret[_ngcontent-%COMP%], html[dir=ltr]   [_nghost-%COMP%]   .caret[_ngcontent-%COMP%], [dir=ltr][_nghost-%COMP%]   .caret[_ngcontent-%COMP%], [dir=ltr]   [_nghost-%COMP%]   .caret[_ngcontent-%COMP%]{margin-left:4px}html[dir=rtl][_ngcontent-%COMP%]   .caret[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .caret[_ngcontent-%COMP%], [dir=rtl][_nghost-%COMP%]   .caret[_ngcontent-%COMP%], html[dir=rtl][_nghost-%COMP%]   .caret[_ngcontent-%COMP%], html[dir=rtl]   [_nghost-%COMP%]   .caret[_ngcontent-%COMP%], [dir=rtl][_nghost-%COMP%]   .caret[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .caret[_ngcontent-%COMP%]{margin-right:4px}.btn[_ngcontent-%COMP%]{text-transform:none;border:1px solid #ccc;background-color:#fff}.btn[disabled][_ngcontent-%COMP%]{border:1px solid #ddd}html[dir=ltr][_ngcontent-%COMP%]   .versionIndicator[_ngcontent-%COMP%], [dir=ltr][_ngcontent-%COMP%]   .versionIndicator[_ngcontent-%COMP%], [dir=ltr][_nghost-%COMP%]   .versionIndicator[_ngcontent-%COMP%], html[dir=ltr][_nghost-%COMP%]   .versionIndicator[_ngcontent-%COMP%], html[dir=ltr]   [_nghost-%COMP%]   .versionIndicator[_ngcontent-%COMP%], [dir=ltr][_nghost-%COMP%]   .versionIndicator[_ngcontent-%COMP%], [dir=ltr]   [_nghost-%COMP%]   .versionIndicator[_ngcontent-%COMP%]{margin-left:-15px;padding-right:4px}html[dir=rtl][_ngcontent-%COMP%]   .versionIndicator[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .versionIndicator[_ngcontent-%COMP%], [dir=rtl][_nghost-%COMP%]   .versionIndicator[_ngcontent-%COMP%], html[dir=rtl][_nghost-%COMP%]   .versionIndicator[_ngcontent-%COMP%], html[dir=rtl]   [_nghost-%COMP%]   .versionIndicator[_ngcontent-%COMP%], [dir=rtl][_nghost-%COMP%]   .versionIndicator[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .versionIndicator[_ngcontent-%COMP%]{margin-right:-15px;padding-left:4px}.dropdown-menu[_ngcontent-%COMP%]{width:100%}"]}),i})();function mt(i,s){1&i&&(t.TgZ(0,"div",14),t._UZ(1,"i",15),t.qZA())}function _t(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"section",11)(1,"multiphp-mgr-php-dropdown",12),t.NdJ("phpVersionChanged",function(o){return t.CHM(e),t.oxw().selectVersion(o)}),t.qZA(),t.YNc(2,mt,2,0,"div",13),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("selectedPhpVersion",e.selectedVersion),t.xp6(1),t.Q6J("ngIf",e.changingVersion&&!e.deprecatedChanging)}}function ut(i,s){if(1&i&&(t.TgZ(0,"section",16)(1,"div",14),t._UZ(2,"i",15)(3,"span",17),t.qZA()()),2&i){const e=t.oxw();t.xp6(3),t.Q6J("innerHtml",e.locale.maketext("Loading [asis,PHP] versions \u2026"),t.oJD)}}function ft(i,s){if(1&i&&(t.TgZ(0,"div",18)(1,"a",19),t._UZ(2,"span",20),t._uU(3),t.qZA()()),2&i){const e=t.oxw();t.xp6(3),t.Oqu(e.locale.maketext("Supported Versions"))}}function Pt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",21)(1,"cp-callout",22)(2,"div",23)(3,"strong"),t._uU(4),t.qZA(),t.TgZ(5,"p"),t._uU(6),t.TgZ(7,"a",24),t._uU(8),t.qZA()()(),t.TgZ(9,"div",25)(10,"div",1)(11,"div",7)(12,"cp-action-button",26),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return o.applyAction(o.selectedVersion)}),t._uU(13),t.qZA(),t.TgZ(14,"a",27),t.NdJ("click",function(){return t.CHM(e),t.oxw().cancelWarning()}),t._uU(15),t.qZA()()()()()()}if(2&i){const e=t.oxw();t.xp6(4),t.Oqu(e.locale.maketext("Warning:")),t.xp6(2),t.hij(" ",e.locale.maketext("You are trying to switch to a PHP version that has reached EOL. We recommend that you update to a supported version of PHP.")," "),t.xp6(2),t.Oqu(e.locale.maketext("Learn more about supported versions.")),t.xp6(4),t.Q6J("buttonClass",e.applyPHPVersion.buttonClass)("buttonState",e.applyPHPVersion.buttonState),t.xp6(1),t.Oqu(e.locale.maketext("Apply Deprecated Version")),t.xp6(2),t.Oqu(e.locale.maketext("Cancel"))}}let Ct=(()=>{class i{constructor(e,n,o,r,p,u){this.locale=e,this.phpService=n,this.phpHelper=o,this.alertService=r,this.appDataService=p,this.phpVersionService=u,this.systemDefaultChange=new t.vpe,this.changingVersion=!1,this.loadingSystemPhp=!0,this.deprecatedChanging=!1,this.applyPHPVersion={id:"applyPHPVersionBtn",buttonClass:"btn btn-primary",buttonState:a.FP.enabled}}get showSupportedVersionLink(){return!!this.systemDefaultPhp&&this.systemDefaultPhp.isDeprecated}get showDeprecationWarning(){return!!this.selectedVersion&&this.selectedVersion.isDeprecated&&this.changingVersion}ngOnInit(){this.phpVersionService.fetchPhpListSubject&&this.fetchSystemPhpSubject&&this.phpVersionService.fetchPhpListSubject.subscribe(e=>{e.done&&this.fetchSystemPhpSubject.subscribe(n=>{n.done&&(this.systemDefaultPhp=this.phpVersionService.getPhpVersionDataByPackage(n.result),this.setupSystemPhpDropdown(),this.loadingSystemPhp=!1)})})}selectVersion(e){this.changingVersion=!0,this.applyPHPVersion.buttonState=a.FP.enabled,this.selectedVersion=e,this.deprecatedChanging=!0,e.isDeprecated||(this.applyAction(e),this.deprecatedChanging=!1)}applyAction(e){this.phpService.setSystemDefault(e.version).subscribe(n=>{n.hasErrors?(this.changingVersion=!1,this.phpHelper.error(n),this.selectedVersion=this.systemDefaultPhp):(this.changingVersion=!1,this.systemDefaultChange.emit(e.version),this.alertService.success(this.locale.maketext("The system default [asis,PHP] version has been set to \u201c[_1]\u201d.",e.formattedVersion)),this.systemDefaultPhp=this.selectedVersion)}),this.deprecatedChanging=!1,this.applyPHPVersion.buttonState=a.FP.loading}cancelWarning(){this.changingVersion=!1,this.selectedVersion=this.systemDefaultPhp}setupSystemPhpDropdown(){this.selectedVersion=this.systemDefaultPhp}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(C.g),t.Y36(E),t.Y36(O),t.Y36(a.c9),t.Y36(U),t.Y36(b))},i.\u0275cmp=t.Xpm({type:i,selectors:[["multiphp-mgr-system-php-settings"]],inputs:{fetchSystemPhpSubject:"fetchSystemPhpSubject"},outputs:{systemDefaultChange:"systemDefaultChange"},decls:13,vars:6,consts:[[1,"phpVersions"],[1,"row"],[1,"col-xs-12","col-sm-8","col-md-7"],[1,"col-xs-12","col-sm-4"],[1,"col-xs-12","col-sm-8"],["id","selectorSection",4,"ngIf"],["id","loadingSection","class","notifyLoading",4,"ngIf"],[1,"col-xs-12"],[1,"help-block",3,"innerHtml"],["class","supportedVersions col-xs-12 col-sm-4 col-md-5",4,"ngIf"],["class","deprecationWarning",4,"ngIf"],["id","selectorSection"],["id","system-php","mode","PhpDropdownMode.dropdown",3,"selectedPhpVersion","phpVersionChanged"],["class","processing-spinner",4,"ngIf"],[1,"processing-spinner"],["aria-hidden","true",1,"fas","fa-spinner","fa-spin","spinner"],["id","loadingSection",1,"notifyLoading"],[3,"innerHtml"],[1,"supportedVersions","col-xs-12","col-sm-4","col-md-5"],["href","https://go.cpanel.net/PHPSupportedVersions","target","_blank",1,"float-right","flip"],["aria-hidden","true",1,"fas","fa-external-link-alt"],[1,"deprecationWarning"],["id","deprecationWarning","calloutType","warning"],[1,"warningText"],["href","https://go.cpanel.net/PHPSupportedVersions","target","_blank"],[1,"warningButtons"],["id","applyPHPVersion.id",1,"deprecatedButton",3,"buttonClass","buttonState","click"],["id","cancelWarning",1,"cancelWarning",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",1)(4,"h3",3),t._uU(5),t.qZA(),t.TgZ(6,"div",4),t.YNc(7,_t,3,2,"section",5),t.YNc(8,ut,4,1,"section",6),t.qZA(),t.TgZ(9,"div",7),t._UZ(10,"span",8),t.qZA()()(),t.YNc(11,ft,4,1,"div",9),t.qZA()(),t.YNc(12,Pt,16,7,"div",10)),2&e&&(t.xp6(5),t.hij(" ",n.locale.maketext("[asis,PHP] Version")," "),t.xp6(2),t.Q6J("ngIf",!n.loadingSystemPhp),t.xp6(1),t.Q6J("ngIf",n.loadingSystemPhp),t.xp6(2),t.Q6J("innerHtml",n.locale.maketext("This setting applies to new account creations and domains set to inherit the System [asis,PHP] Version."),t.oJD),t.xp6(1),t.Q6J("ngIf",n.showSupportedVersionLink),t.xp6(1),t.Q6J("ngIf",n.showDeprecationWarning))},directives:[h.O5,J,a.Oc,a.xV],styles:[".phpVersions[_ngcontent-%COMP%]{border:1px solid #eaeaea;padding:20px}.phpVersions[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;padding-top:10px}.phpDropdown[_ngcontent-%COMP%]{display:inline-flex;width:50%}.supportedVersions[_ngcontent-%COMP%]{text-decoration:underline;padding-top:10px}html[dir=ltr][_ngcontent-%COMP%]   .supportedVersions[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], [dir=ltr][_ngcontent-%COMP%]   .supportedVersions[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], [dir=ltr][_nghost-%COMP%]   .supportedVersions[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], html[dir=ltr][_nghost-%COMP%]   .supportedVersions[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], html[dir=ltr]   [_nghost-%COMP%]   .supportedVersions[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], [dir=ltr][_nghost-%COMP%]   .supportedVersions[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], [dir=ltr]   [_nghost-%COMP%]   .supportedVersions[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-right:3px}html[dir=rtl][_ngcontent-%COMP%]   .supportedVersions[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .supportedVersions[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], [dir=rtl][_nghost-%COMP%]   .supportedVersions[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], html[dir=rtl][_nghost-%COMP%]   .supportedVersions[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], html[dir=rtl]   [_nghost-%COMP%]   .supportedVersions[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], [dir=rtl][_nghost-%COMP%]   .supportedVersions[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .supportedVersions[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:3px}.deprecationWarning[_ngcontent-%COMP%]{margin-top:-15px}.warningText[_ngcontent-%COMP%]{display:inline-flex}.warningText[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding-top:3px;color:#f1c40f}.warningText[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{padding-left:5px;padding-right:5px}.warningButtons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:15px}.deprecationWarning[_ngcontent-%COMP%]     .callout{margin-bottom:0}.cancelWarning[_ngcontent-%COMP%]{text-decoration:underline}html[dir=ltr][_ngcontent-%COMP%]   .cancelWarning[_ngcontent-%COMP%], [dir=ltr][_ngcontent-%COMP%]   .cancelWarning[_ngcontent-%COMP%], [dir=ltr][_nghost-%COMP%]   .cancelWarning[_ngcontent-%COMP%], html[dir=ltr][_nghost-%COMP%]   .cancelWarning[_ngcontent-%COMP%], html[dir=ltr]   [_nghost-%COMP%]   .cancelWarning[_ngcontent-%COMP%], [dir=ltr][_nghost-%COMP%]   .cancelWarning[_ngcontent-%COMP%], [dir=ltr]   [_nghost-%COMP%]   .cancelWarning[_ngcontent-%COMP%]{padding-left:15px}html[dir=rtl][_ngcontent-%COMP%]   .cancelWarning[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .cancelWarning[_ngcontent-%COMP%], [dir=rtl][_nghost-%COMP%]   .cancelWarning[_ngcontent-%COMP%], html[dir=rtl][_nghost-%COMP%]   .cancelWarning[_ngcontent-%COMP%], html[dir=rtl]   [_nghost-%COMP%]   .cancelWarning[_ngcontent-%COMP%], [dir=rtl][_nghost-%COMP%]   .cancelWarning[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .cancelWarning[_ngcontent-%COMP%]{padding-right:15px}.switchGrowler[_ngcontent-%COMP%]{position:absolute}.deprecatedPillContainer[_ngcontent-%COMP%]{display:inline-flex}html[dir=ltr][_ngcontent-%COMP%]   .deprecatedPillContainer[_ngcontent-%COMP%], [dir=ltr][_ngcontent-%COMP%]   .deprecatedPillContainer[_ngcontent-%COMP%], [dir=ltr][_nghost-%COMP%]   .deprecatedPillContainer[_ngcontent-%COMP%], html[dir=ltr][_nghost-%COMP%]   .deprecatedPillContainer[_ngcontent-%COMP%], html[dir=ltr]   [_nghost-%COMP%]   .deprecatedPillContainer[_ngcontent-%COMP%], [dir=ltr][_nghost-%COMP%]   .deprecatedPillContainer[_ngcontent-%COMP%], [dir=ltr]   [_nghost-%COMP%]   .deprecatedPillContainer[_ngcontent-%COMP%]{padding-left:8px}html[dir=rtl][_ngcontent-%COMP%]   .deprecatedPillContainer[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .deprecatedPillContainer[_ngcontent-%COMP%], [dir=rtl][_nghost-%COMP%]   .deprecatedPillContainer[_ngcontent-%COMP%], html[dir=rtl][_nghost-%COMP%]   .deprecatedPillContainer[_ngcontent-%COMP%], html[dir=rtl]   [_nghost-%COMP%]   .deprecatedPillContainer[_ngcontent-%COMP%], [dir=rtl][_nghost-%COMP%]   .deprecatedPillContainer[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .deprecatedPillContainer[_ngcontent-%COMP%]{padding-right:8px}.deprecatedPill[_ngcontent-%COMP%]{font-size:12px;padding:4px}.deprecatedButton[_ngcontent-%COMP%]     button{white-space:normal;margin-top:0}html[dir=ltr][_ngcontent-%COMP%]   #selectorSection[_ngcontent-%COMP%] > .processing-spinner[_ngcontent-%COMP%], [dir=ltr][_ngcontent-%COMP%]   #selectorSection[_ngcontent-%COMP%] > .processing-spinner[_ngcontent-%COMP%], [dir=ltr][_nghost-%COMP%]   #selectorSection[_ngcontent-%COMP%] > .processing-spinner[_ngcontent-%COMP%], html[dir=ltr][_nghost-%COMP%]   #selectorSection[_ngcontent-%COMP%] > .processing-spinner[_ngcontent-%COMP%], html[dir=ltr]   [_nghost-%COMP%]   #selectorSection[_ngcontent-%COMP%] > .processing-spinner[_ngcontent-%COMP%], [dir=ltr][_nghost-%COMP%]   #selectorSection[_ngcontent-%COMP%] > .processing-spinner[_ngcontent-%COMP%], [dir=ltr]   [_nghost-%COMP%]   #selectorSection[_ngcontent-%COMP%] > .processing-spinner[_ngcontent-%COMP%]{padding-left:5px}html[dir=rtl][_ngcontent-%COMP%]   #selectorSection[_ngcontent-%COMP%] > .processing-spinner[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   #selectorSection[_ngcontent-%COMP%] > .processing-spinner[_ngcontent-%COMP%], [dir=rtl][_nghost-%COMP%]   #selectorSection[_ngcontent-%COMP%] > .processing-spinner[_ngcontent-%COMP%], html[dir=rtl][_nghost-%COMP%]   #selectorSection[_ngcontent-%COMP%] > .processing-spinner[_ngcontent-%COMP%], html[dir=rtl]   [_nghost-%COMP%]   #selectorSection[_ngcontent-%COMP%] > .processing-spinner[_ngcontent-%COMP%], [dir=rtl][_nghost-%COMP%]   #selectorSection[_ngcontent-%COMP%] > .processing-spinner[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   #selectorSection[_ngcontent-%COMP%] > .processing-spinner[_ngcontent-%COMP%]{padding-right:5px}"]}),i})();var _=(()=>{return(i=_||(_={}))[i.disabled=0]="disabled",i[i.enabled=1]="enabled",_;var i})(),xt=m(1715),R=m(537);class Mt{constructor(s,e,n,o,r,p){this.totalDomains=s,this.domainsUsingFpm=e,this.domainToBeEnabled=n,this.domainsToEnableWithoutOverload=o,this.memoryNeeded=r,this.showWarning=p}}let bt=(()=>{class i{constructor(e){this.apiClient=e}fetchFPMStatus(){const e=new c.r(c.N.JsonApi,{method:"php_get_default_accounts_to_fpm"});return this.apiClient.get(e)}setSystemFPMDefault(e){const n=new c.r(c.N.JsonApi,{method:"php_set_default_accounts_to_fpm",arguments:[new P.h("default_accounts_to_fpm",e)]});return this.apiClient.post(n)}enablePhpFpmOnAllDomains(){const e=new c.r(c.N.JsonApi,{method:"convert_all_domains_to_fpm"});return this.apiClient.post(e).pipe((0,S.U)(n=>{if(n.hasErrors)throw n;return n.success?n.data=n.data.build:n.data}))}phpFpmConversionInProgress(){const e=new c.r(c.N.JsonApi,{method:"is_conversion_in_progress"});return this.apiClient.post(e).pipe((0,S.U)(n=>{if(n.hasErrors)throw n;return n.success?n.data=!(!n.data||1!==n.data.inProgress):n.data}))}reviewPhpFpmConversion(){const e=new c.r(c.N.JsonApi,{method:"get_fpm_count_and_utilization"});return this.apiClient.post(e).pipe((0,S.U)(n=>{if(n.hasErrors)throw n;if(n.success){const o=n.data;return n.data=new Mt(o.total_domains,o.domains_using_fpm,o.domains_to_be_enabled,o.number_of_new_fpm_accounts_we_can_handle,o.memory_needed,o.show_warning),n.data}return n.data}))}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(D.A4))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),j=(()=>{class i{get nativeWindow(){return window}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function wt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"cp-toggle-switch",18),t.NdJ("toggleStatus",function(){return t.CHM(e),t.oxw(2).toggleFpm()}),t.qZA()}if(2&i){const e=t.oxw(2);t.s9C("onText",e.locale.maketext("Enabled")),t.s9C("offText",e.locale.maketext("Disabled")),t.Q6J("toggleState",e.systemFPMToggle.toggleState)("labelPosition",e.systemFPMToggle.labelPosition)}}function Ot(i,s){if(1&i&&(t.TgZ(0,"div",19),t._UZ(1,"span",20),t._uU(2),t.qZA()),2&i){const e=t.oxw(2);t.xp6(2),t.hij(" ",e.locale.maketext("Unavailable")," ")}}function St(i,s){if(1&i&&(t.TgZ(0,"section",15),t.YNc(1,wt,1,4,"cp-toggle-switch",16),t.YNc(2,Ot,3,1,"ng-template",null,17,t.W1O),t.qZA()),2&i){const e=t.MAs(3),n=t.oxw();t.xp6(1),t.Q6J("ngIf",!0===n.systemFPMInfo.hasFPMInstalled)("ngIfElse",e)}}function kt(i,s){if(1&i&&(t.TgZ(0,"section",21)(1,"div",22),t._UZ(2,"i",23)(3,"span",24),t.qZA()()),2&i){const e=t.oxw();t.xp6(3),t.Q6J("innerHtml",e.locale.maketext("Loading system setting for [asis,PHP-FPM] \u2026"),t.oJD)}}function Ft(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"cp-action-button",25),t.NdJ("click",function(){return t.CHM(e),t.oxw().enablePhpFpmOnAllDomains()}),t._uU(1),t.qZA()}if(2&i){const e=t.oxw();t.s9C("title",e.locale.maketext("Click here to enable [asis,PHP-FPM] on all domains.")),t.Q6J("buttonClass",e.phpFpmAllButton.buttonClass)("buttonState",e.phpFpmAllButton.buttonState),t.xp6(1),t.hij(" ",e.locale.maketext("Enable on all domains[comment,button title]")," ")}}function Tt(i,s){if(1&i&&t._UZ(0,"p",24),2&i){const e=t.oxw(2);t.Q6J("innerHtml",e.phpFpmConversion.memoryWarningText,t.oJD)}}function Dt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",7)(2,"cp-callout",26)(3,"span",27),t._uU(4),t.qZA(),t._UZ(5,"p",28),t.YNc(6,Tt,1,1,"p",29),t._UZ(7,"p",24),t.TgZ(8,"cp-action-button",30),t.NdJ("click",function(){return t.CHM(e),t.oxw().confirmEnablePhpFpmOnAllDomains()}),t._uU(9),t.qZA(),t.TgZ(10,"button",31),t.NdJ("click",function(){return t.CHM(e),t.oxw().cancelPhpFpmAllDomains()}),t._uU(11),t.qZA()()()()}if(2&i){const e=t.oxw();t.xp6(2),t.Q6J("calloutType",e.phpFpmConversion.calloutType),t.xp6(2),t.Oqu(e.phpFpmConversion.reviewHeading),t.xp6(1),t.Q6J("innerHtml",e.phpFpmConversion.reviewSubHeading,t.oJD),t.xp6(1),t.Q6J("ngIf",e.phpFpmConversion.showMemoryWarning),t.xp6(1),t.Q6J("innerHtml",e.locale.maketext("For more information, read our [output,url,_1,PHP-FPM documentation,target,blank].","https://go.cpanel.net/phpfpm"),t.oJD),t.xp6(1),t.s9C("title",e.locale.maketext("Click here to confirm.")),t.Q6J("buttonClass",e.confirmPhpFpmAllButton.buttonClass)("buttonState",e.confirmPhpFpmAllButton.buttonState),t.xp6(1),t.hij(" ",e.locale.maketext("Enable")," "),t.xp6(1),t.Q6J("title",e.locale.maketext("Cancel enabling [asis,PHP-FPM] on all domains")),t.xp6(1),t.hij(" ",e.locale.maketext("Cancel")," ")}}function yt(i,s){if(1&i&&(t.TgZ(0,"div",1)(1,"div",7)(2,"cp-callout",32),t._UZ(3,"span",24),t.qZA()()()),2&i){const e=t.oxw();t.xp6(3),t.Q6J("innerHtml",e.phpFpmConversionInProgressMessage,t.oJD)}}function It(i,s){1&i&&t._UZ(0,"i",43)}function Zt(i,s){1&i&&t._UZ(0,"i",44)}function Ht(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",33)(1,"cp-callout",34)(2,"div",35)(3,"strong"),t._uU(4),t.qZA(),t._UZ(5,"p",36),t.qZA(),t.TgZ(6,"div",37)(7,"a",38),t._UZ(8,"span",39),t._uU(9),t.qZA(),t.TgZ(10,"button",40),t.NdJ("click",function(){return t.CHM(e),t.oxw().refreshPackages()}),t.YNc(11,It,1,0,"i",41),t.YNc(12,Zt,1,0,"ng-template",null,42,t.W1O),t._uU(14),t.qZA()()()()}if(2&i){const e=t.MAs(13),n=t.oxw();t.xp6(4),t.Oqu(n.locale.maketext("Warning:")),t.xp6(1),t.Q6J("innerHTML",n.locale.maketext("You [output,strong,cannot] set the system default to use [asis,PHP-FPM]. You do [output,strong,not] have the [asis,PHP-FPM] package for your system\u2019s default [asis,PHP] version installed."),t.oJD),t.xp6(2),t.s9C("href",n.installPhpFpmUrl,t.LSH),t.xp6(2),t.hij(" ",n.locale.maketext("Install")," "),t.xp6(1),t.Q6J("disabled",n.refreshPhpFpm),t.xp6(1),t.Q6J("ngIf",n.refreshPhpFpm)("ngIfElse",e),t.xp6(3),t.hij(" ",n.locale.maketext("Refresh")," ")}}let At=(()=>{class i{constructor(e,n,o,r,p,u,x){this.fpmService=e,this.alertService=n,this.locale=o,this.location=r,this.phpHelper=p,this.phpVersionService=u,this._window=x,this.systemFPMInfo=new K,this.systemFPMToggle={toggleState:a.Yg.toggleOff,labelPosition:a.Gy.right,isDisabled:!1},this.refreshPhpFpm=!1,this.loadingSystemFpm=!0,this.liteSpeedRunning=!1,this.fpmPackageForSystemPhp="",this.phpFpmConversionLog=`${this._window.nativeWindow.PAGE.base}/php-fpm-conversion`,this.phpFpmAllButton={buttonClass:"btn btn-outline-primary btn-sm float-right flip",buttonState:a.FP.enabled},this.confirmPhpFpmAllButton={buttonClass:"btn btn-sm btn-primary button-bar",buttonState:a.FP.enabled},this.phpFpmConversion={localStorageKey:"fpmConversionBuildId",showReview:!1,timerHandle:null,timerInterval:3e3,buildId:null,isRunning:!1,reviewHeading:"",reviewSubHeading:"",memoryWarningText:"",showMemoryWarning:!1,calloutType:""},this.showEnableAllDomainsPrompt=!1}get showEnableAllButton(){return this.systemFPMInfo.hasFPMInstalled&&!this.loadingSystemFpm&&this.systemFPMToggle.toggleState===a.Yg.toggleOn&&!this.liteSpeedRunning&&!this.showEnableAllDomainsPrompt}get phpFpmConversionInProgressMessage(){let e="";return this.phpFpmConversion.isRunning&&(e=this.locale.maketext("[asis,PHP-FPM] conversion has started. Click here to view the progress: [output,url,_1,conversion log,target,blank,id,viewConversionLink].",`${this.phpFpmConversionLog}/${this.phpFpmConversion.buildId}`)),e}get installPhpFpmUrl(){const e="install="+encodeURIComponent(this.fpmPackageForSystemPhp);return this.location.prepareExternalUrl(this.location.path()).split("multiphp-manager/system")[0]+"EasyApache4/review?"+e}showFpmWarning(){return!this.systemFPMInfo.hasFPMInstalled&&!this.loadingSystemFpm&&!this.liteSpeedRunning}toggleFpm(){this.systemFPMToggle.toggleState=a.Yg.toggleUpdating,this.systemFPMInfo.status===_.disabled?this.fpmService.setSystemFPMDefault(_.enabled).subscribe(e=>{e.hasErrors?this.phpHelper.error(e):this.showEnableAllFpmPrompt()}):(this.cancelPhpFpmAllDomains(),this.fpmService.setSystemFPMDefault(_.disabled).subscribe(e=>{e.hasErrors?this.phpHelper.error(e):(this.systemFPMToggle.toggleState=a.Yg.toggleOff,this.systemFPMInfo.status=_.disabled,this.alertService.success(this.locale.maketext("You have disabled [asis,PHP-FPM] as a default for your system.")))}))}gotoPhpFpmSettings(){this.phpHelper.routeTo("system/fpm-settings")}refreshPackages(){this.refreshPhpFpm=!0,this.phpVersionService.reloadFpmPackages()}ngOnInit(){this.liteSpeedRunning=1===this._window.nativeWindow.PAGE.litespeed_running,this.loadSystemFpmData(),this.checkPhpFpmConversionProgress()}checkPhpFpmConversionProgress(){this.phpFpmConversion.isRunning=this._window.nativeWindow.PAGE.fpmConversion_in_progress,this.phpFpmConversion.isRunning&&(this.phpFpmAllButton.buttonState=a.FP.loading,this.phpFpmConversion.buildId=localStorage.getItem(this.phpFpmConversion.localStorageKey),this.monitorPhpFpmConversions())}loadSystemFpmData(){this.fetchSystemPhpSubject&&this.fetchSystemPhpSubject.subscribe(e=>{e.done&&(this.systemPhpVersion=e.result,this.fpmPackageForSystemPhp=this.systemPhpVersion+"-php-fpm",this.phpVersionService.fpmPackagesReady$.subscribe(n=>{n.done&&(this.systemFPMInfo.hasFPMInstalled=this.phpVersionService.isPhpFpmInstalled(this.fpmPackageForSystemPhp),this.fpmService.fetchFPMStatus().subscribe(o=>{o.hasErrors?this.phpHelper.error(o):this.populateSystemFpm(o.data),this.loadingSystemFpm=!1,this.refreshPhpFpm=!1}))}))})}populateSystemFpm(e){e.default_accounts_to_fpm&&this.systemFPMInfo.hasFPMInstalled&&(this.systemFPMInfo.status=_.enabled,this.systemFPMToggle.toggleState=a.Yg.toggleOn)}enablePhpFpmOnAllDomains(){this.phpFpmAllButton.buttonState=a.FP.loading,this.fpmService.reviewPhpFpmConversion().subscribe(e=>{this.phpFpmConversion.showReview=e.showWarning,e.showWarning?(this.phpFpmConversion.calloutType="warning",this.phpFpmConversion.reviewHeading=this.locale.maketext("Review information before you enable [asis,PHP-FPM] on all domains[comment,header title]"),this.phpFpmConversion.reviewSubHeading=this.locale.maketext("You are attempting to enable [asis,PHP-FPM] on \u201c[output,strong,_1]\u201d domains.",e.domainToBeEnabled),this.phpFpmConversion.showMemoryWarning=!0,this.phpFpmConversion.memoryWarningText=this.locale.maketext("Enabling these domains may use more memory than your server had configured. If your server runs out of memory, you may experience severe data loss."),this.phpFpmAllButton.buttonState=a.FP.disabled):this.confirmEnablePhpFpmOnAllDomains()},e=>{this.phpHelper.error(e),this.phpFpmAllButton.buttonState=a.FP.enabled})}confirmEnablePhpFpmOnAllDomains(){this.phpFpmConversion.showReview=!1,this.fpmService.enablePhpFpmOnAllDomains().subscribe(e=>{this.phpFpmConversion.isRunning=!0,this.phpFpmConversion.buildId=e,localStorage.setItem(this.phpFpmConversion.localStorageKey,e.toString()),this.monitorPhpFpmConversions()},e=>{this.phpHelper.error(e),this.phpFpmAllButton.buttonState=a.FP.enabled})}cancelPhpFpmAllDomains(){this.phpFpmConversion.showReview=!1,this.showEnableAllDomainsPrompt=!1,this.phpFpmAllButton.buttonState=a.FP.enabled,this.confirmPhpFpmAllButton.buttonState=a.FP.enabled}showEnableAllFpmPrompt(){this.fpmService.reviewPhpFpmConversion().subscribe(e=>{this.systemFPMToggle.toggleState=a.Yg.toggleOn,this.systemFPMInfo.status=_.enabled,this.alertService.success(this.locale.maketext("You have enabled [asis,PHP-FPM] as a default for your system.")),this.phpFpmConversion.showReview=!e.showWarning&&e.domainToBeEnabled>0,this.phpFpmConversion.showReview&&(this.phpFpmConversion.calloutType="info",this.showEnableAllDomainsPrompt=!0,this.phpFpmConversion.reviewHeading=this.locale.maketext("You have enabled [asis,PHP-FPM] as a system default[comment,header title]"),this.phpFpmConversion.reviewSubHeading=this.locale.maketext("Would you also like to enable [asis,PHP-FPM] on all domains?"),this.phpFpmConversion.showMemoryWarning=!1,this.phpFpmConversion.memoryWarningText="")})}monitorPhpFpmConversions(){this.phpFpmConversion.timerHandle=(0,xt.F)(this.phpFpmConversion.timerInterval).subscribe(()=>{this.fpmService.phpFpmConversionInProgress().pipe((0,R.x)(()=>{this.phpFpmConversion.isRunning||this.phpFpmConversion.timerHandle.unsubscribe()})).subscribe(e=>{this.phpFpmConversion.isRunning=e||!1,e||(localStorage.removeItem(this.phpFpmConversion.localStorageKey),this.alertService.success(this.locale.maketext("[asis,PHP-FPM] is applied to all domains whose [asis,PHP] versions have [asis,PHP-FPM] extension installed.")),this.showEnableAllDomainsPrompt=!1,this.phpFpmAllButton.buttonState=a.FP.enabled,this.confirmPhpFpmAllButton.buttonState=a.FP.enabled)},e=>{this.phpHelper.error(e),this.phpFpmConversion.isRunning=!1,this.phpFpmAllButton.buttonState=a.FP.enabled})})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(bt),t.Y36(a.c9),t.Y36(C.g),t.Y36(h.Ye),t.Y36(O),t.Y36(b),t.Y36(j))},i.\u0275cmp=t.Xpm({type:i,selectors:[["multiphp-mgr-system-fpm"]],inputs:{fetchSystemPhpSubject:"fetchSystemPhpSubject"},decls:19,vars:8,consts:[[1,"phpFPM"],[1,"row"],[1,"col-xs-12","col-sm-8","col-md-7"],[1,"col-xs-12","col-sm-4"],[1,"col-xs-12","col-sm-8"],["id","fpmSettingSection",4,"ngIf"],["id","loadingSection","class","notifyLoading",4,"ngIf"],[1,"col-xs-12"],[1,"help-block",3,"innerHtml"],[1,"manageFPMSettings","col-xs-12","col-sm-4","col-md-5"],["href","javascript:void(0)","id","manageSystemFpmSettings",1,"btn","btn-outline-primary","btn-sm","float-right","flip",3,"click"],["id","btn-enable-fpm-all-domains",3,"buttonClass","buttonState","title","click",4,"ngIf"],["id","php-fpm-conversion-messages"],["class","row",4,"ngIf"],["class","fpmWarning",4,"ngIf"],["id","fpmSettingSection"],["id","systemFPM","class","fpmToggle",3,"onText","offText","toggleState","labelPosition","toggleStatus",4,"ngIf","ngIfElse"],["unavailable",""],["id","systemFPM",1,"fpmToggle",3,"onText","offText","toggleState","labelPosition","toggleStatus"],[1,"fpmUnsupported"],["aria-hidden","true",1,"fas","fa-ban"],["id","loadingSection",1,"notifyLoading"],[1,"processing-spinner"],["aria-hidden","true",1,"fas","fa-spinner","fa-spin","spinner"],[3,"innerHtml"],["id","btn-enable-fpm-all-domains",3,"buttonClass","buttonState","title","click"],["id","fpm-convert-review",3,"calloutType"],["callout-heading",""],[1,"fpmPromptSubheading",3,"innerHtml"],[3,"innerHtml",4,"ngIf"],["id","btn-confirm-enable-fpm-all-domains",3,"buttonClass","buttonState","title","click"],["id","cancel-enable-fpm-all-domains","type","button",1,"btn","btn-sm","btn-link",3,"title","click"],["id","fpm-convert-review","calloutType","info"],[1,"fpmWarning"],["id","fpmWarning","calloutType","warning"],[1,"warningText"],[3,"innerHTML"],[1,"warningButtons"],["id","installPHPFPM-button","target","_blank",1,"btn","btn-primary",3,"href"],["aria-hidden","true",1,"fas","fa-external-link-alt","fpmInstallLink"],["id","refreshFPM",1,"btn","btn-default","button-bar",3,"disabled","click"],["class","fas fa-sync fa-spin","aria-hidden","true",4,"ngIf","ngIfElse"],["noSpin",""],["aria-hidden","true",1,"fas","fa-sync","fa-spin"],["aria-hidden","true",1,"fas","fa-sync"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",1)(4,"h3",3),t._uU(5,"PHP-FPM"),t.qZA(),t.TgZ(6,"div",4),t.YNc(7,St,4,2,"section",5),t.YNc(8,kt,4,1,"section",6),t.qZA(),t.TgZ(9,"div",7),t._UZ(10,"span",8),t.qZA()()(),t.TgZ(11,"div",9)(12,"a",10),t.NdJ("click",function(){return n.gotoPhpFpmSettings()}),t._uU(13),t.qZA(),t.YNc(14,Ft,2,4,"cp-action-button",11),t.qZA()(),t.TgZ(15,"section",12),t.YNc(16,Dt,12,11,"div",13),t.YNc(17,yt,4,1,"div",13),t.qZA()(),t.YNc(18,Ht,15,8,"div",14)),2&e&&(t.xp6(7),t.Q6J("ngIf",!n.loadingSystemFpm),t.xp6(1),t.Q6J("ngIf",n.loadingSystemFpm),t.xp6(2),t.Q6J("innerHtml",n.locale.maketext("System [asis,PHP-FPM] setting applies to only new account creations."),t.oJD),t.xp6(3),t.hij(" ",n.locale.maketext("Manage Settings")," "),t.xp6(1),t.Q6J("ngIf",n.showEnableAllButton),t.xp6(2),t.Q6J("ngIf",n.phpFpmConversion.showReview),t.xp6(1),t.Q6J("ngIf",n.phpFpmConversion.isRunning),t.xp6(1),t.Q6J("ngIf",n.showFpmWarning()))},directives:[h.O5,a.MF,a.xV,a.Oc],styles:[".phpFPM[_ngcontent-%COMP%]{border-right:1px solid #eaeaea;border-bottom:1px solid #eaeaea;border-left:1px solid #eaeaea;padding:25px 20px}.phpFPM[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;padding-top:10px}.phpFPM[_ngcontent-%COMP%]     .toggle-switch-wrapper{margin-top:5px}.fpmUnsupported[_ngcontent-%COMP%]{margin-top:10px}.fpmWarning[_ngcontent-%COMP%]{margin-top:-15px}.warningButtons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}html[dir=ltr][_ngcontent-%COMP%]   .warningButtons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], [dir=ltr][_ngcontent-%COMP%]   .warningButtons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], [dir=ltr][_nghost-%COMP%]   .warningButtons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], html[dir=ltr][_nghost-%COMP%]   .warningButtons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], html[dir=ltr]   [_nghost-%COMP%]   .warningButtons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], [dir=ltr][_nghost-%COMP%]   .warningButtons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], [dir=ltr]   [_nghost-%COMP%]   .warningButtons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding-right:10px}html[dir=rtl][_ngcontent-%COMP%]   .warningButtons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .warningButtons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], [dir=rtl][_nghost-%COMP%]   .warningButtons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], html[dir=rtl][_nghost-%COMP%]   .warningButtons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], html[dir=rtl]   [_nghost-%COMP%]   .warningButtons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], [dir=rtl][_nghost-%COMP%]   .warningButtons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .warningButtons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding-left:10px}.warningText[_ngcontent-%COMP%]{display:inline-flex}.warningText[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding-top:3px;color:#f1c40f}.warningText[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{padding-left:5px;padding-right:5px}html[dir=ltr][_ngcontent-%COMP%]   .fpmInstallLink[_ngcontent-%COMP%], [dir=ltr][_ngcontent-%COMP%]   .fpmInstallLink[_ngcontent-%COMP%], [dir=ltr][_nghost-%COMP%]   .fpmInstallLink[_ngcontent-%COMP%], html[dir=ltr][_nghost-%COMP%]   .fpmInstallLink[_ngcontent-%COMP%], html[dir=ltr]   [_nghost-%COMP%]   .fpmInstallLink[_ngcontent-%COMP%], [dir=ltr][_nghost-%COMP%]   .fpmInstallLink[_ngcontent-%COMP%], [dir=ltr]   [_nghost-%COMP%]   .fpmInstallLink[_ngcontent-%COMP%]{padding-right:4px}html[dir=rtl][_ngcontent-%COMP%]   .fpmInstallLink[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .fpmInstallLink[_ngcontent-%COMP%], [dir=rtl][_nghost-%COMP%]   .fpmInstallLink[_ngcontent-%COMP%], html[dir=rtl][_nghost-%COMP%]   .fpmInstallLink[_ngcontent-%COMP%], html[dir=rtl]   [_nghost-%COMP%]   .fpmInstallLink[_ngcontent-%COMP%], [dir=rtl][_nghost-%COMP%]   .fpmInstallLink[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .fpmInstallLink[_ngcontent-%COMP%]{padding-left:4px}.fpmPromptSubheading[_ngcontent-%COMP%]{margin-bottom:5px}#manageSystemFpmSettings[_ngcontent-%COMP%]{padding:6px 26px}"]}),i})();class Jt{constructor(s=!1,e="",n="",o="",r={}){this.showBanner=s,this.purchaseLink=e,this.actionText=n,this.linkTarget=o,this.data=r}}function Vt(i,s){if(1&i&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.locale.maketext("Contact your provider for more information on upgrading to [asis,CloudLinux].")," ")}}function Lt(i,s){if(1&i&&(t.TgZ(0,"div",7)(1,"a",8),t._UZ(2,"span",9),t._uU(3),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(1),t.s9C("href",e.cloudlinuxLinkData.purchaseLink,t.LSH),t.s9C("target",e.cloudlinuxLinkData.linkTarget),t.Q6J("id",e.upgradeButtonId),t.xp6(1),t.Q6J("ngClass",e.cloudlinuxLinkIcon),t.xp6(1),t.hij("",e.cloudlinuxLinkData.actionText," ")}}function Ut(i,s){if(1&i&&(t.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div"),t._UZ(4,"p",4),t.qZA(),t.YNc(5,Vt,2,1,"p",5),t.YNc(6,Lt,4,5,"ng-template",null,6,t.W1O),t.qZA()()()),2&i){const e=t.MAs(7),n=t.oxw();t.xp6(4),t.Q6J("innerHtml",n.bannerText,t.oJD),t.xp6(1),t.Q6J("ngIf",n.hideUpgradeOption)("ngIfElse",e)}}let tt=(()=>{class i{constructor(e,n){this.locale=e,this._window=n,this.cloudlinuxLinkData=new Jt}get hideUpgradeOption(){const e=this.cloudlinuxLinkData.data.purchase_cl_data;return!!(e.server_timeout||e.error_msg&&""!==e.error_msg)}get cloudlinuxLinkIcon(){return this.cloudlinuxLinkData.data.purchase_cl_data.is_url?"fa-external-link-alt":"fa-envelope"}get bannerText(){return this.lsapiInstalled?this.locale.maketext("To utilize the [asis,LSAPI] handler\u2019s full functionality and performance benefits, upgrade your system to [asis,CloudLinux]. To learn more about this feature, please read [output,url,_1,CloudLinux - Mod_lsapi Feature,target,_2].","https://go.cpanel.net/CL-lsapi","blank"):this.locale.maketext("[output,strong,cPanel] provides the most recent stable versions of PHP. If you require legacy versions of PHP, such as PHP [list_and,_3], [asis,CloudLinux] provides hardened and secured [asis,PHP] versions that are patched against all known vulnerabilities. To learn more about [asis,CloudLinux] Advanced PHP Features, please read [output,url,_1,Hardened PHP versions on CloudLinux,target,_2].","https://go.cpanel.net/cloudlinuxhardenedphp","_blank",[4.4,5.1,5.2,5.3])}get upgradeButtonId(){return this.lsapiInstalled?"lsapiUpgradeButton":"clUpgradeButton"}ngOnInit(){this.setCloudLinuxInfo(this._window.nativeWindow.PAGE.cl_data)}setCloudLinuxInfo(e){if(e){const n=e.purchase_cl_data;if(e.cl_is_supported&&!e.cl_is_installed&&!n.disable_upgrade&&(this.cloudlinuxLinkData.showBanner=!0,!n.server_timeout))if(n.is_url)this.cloudlinuxLinkData.purchaseLink=n.url,this.cloudlinuxLinkData.actionText=this.locale.maketext("Upgrade to [asis,CloudLinux]"),this.cloudlinuxLinkData.linkTarget=n.target||"_blank";else{const o="Upgrade to Cloud Linux",r="I am interested in more information on how I can benefit from CloudLinux on my cPanel server.",p="mailto:"+encodeURIComponent(n.email||"")+"?subject="+encodeURIComponent(o)+"&body="+encodeURIComponent(r);this.cloudlinuxLinkData.purchaseLink=p,this.cloudlinuxLinkData.linkTarget="_top",this.cloudlinuxLinkData.actionText=this.locale.maketext("Email Provider")}this.cloudlinuxLinkData.data=e}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(C.g),t.Y36(j))},i.\u0275cmp=t.Xpm({type:i,selectors:[["multiphp-mgr-cloudlinux-banner"]],inputs:{lsapiInstalled:"lsapiInstalled"},decls:1,vars:1,consts:[["id","cloudlinuxBanner","class","promotion",4,"ngIf"],["id","cloudlinuxBanner",1,"promotion"],[1,"row"],[1,"col-xs-12"],[3,"innerHtml"],[4,"ngIf","ngIfElse"],["upgrade",""],[1,"actions"],[1,"btn","btn-sm","btn-warning",3,"href","id","target"],["aria-hidden","true",1,"fas","linkIcon",3,"ngClass"]],template:function(e,n){1&e&&t.YNc(0,Ut,8,3,"div",0),2&e&&t.Q6J("ngIf",n.cloudlinuxLinkData.showBanner)},directives:[h.O5,h.mk],styles:[".promotion[_ngcontent-%COMP%]{background-color:#f5f5f5;margin:20px 0;padding:20px;position:relative}html[dir=ltr][_ngcontent-%COMP%]   .promotion[_ngcontent-%COMP%], [dir=ltr][_ngcontent-%COMP%]   .promotion[_ngcontent-%COMP%], [dir=ltr][_nghost-%COMP%]   .promotion[_ngcontent-%COMP%], html[dir=ltr][_nghost-%COMP%]   .promotion[_ngcontent-%COMP%], html[dir=ltr]   [_nghost-%COMP%]   .promotion[_ngcontent-%COMP%], [dir=ltr][_nghost-%COMP%]   .promotion[_ngcontent-%COMP%], [dir=ltr]   [_nghost-%COMP%]   .promotion[_ngcontent-%COMP%]{border-left-width:3px;border-left-style:solid;border-left-color:#f78e1e}html[dir=rtl][_ngcontent-%COMP%]   .promotion[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .promotion[_ngcontent-%COMP%], [dir=rtl][_nghost-%COMP%]   .promotion[_ngcontent-%COMP%], html[dir=rtl][_nghost-%COMP%]   .promotion[_ngcontent-%COMP%], html[dir=rtl]   [_nghost-%COMP%]   .promotion[_ngcontent-%COMP%], [dir=rtl][_nghost-%COMP%]   .promotion[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .promotion[_ngcontent-%COMP%]{border-right-width:3px;border-right-style:solid;border-right-color:#f78e1e}.promotion[_ngcontent-%COMP%]   div.actions[_ngcontent-%COMP%]{margin-top:15px}html[dir=ltr][_ngcontent-%COMP%]   .linkIcon[_ngcontent-%COMP%], [dir=ltr][_ngcontent-%COMP%]   .linkIcon[_ngcontent-%COMP%], [dir=ltr][_nghost-%COMP%]   .linkIcon[_ngcontent-%COMP%], html[dir=ltr][_nghost-%COMP%]   .linkIcon[_ngcontent-%COMP%], html[dir=ltr]   [_nghost-%COMP%]   .linkIcon[_ngcontent-%COMP%], [dir=ltr][_nghost-%COMP%]   .linkIcon[_ngcontent-%COMP%], [dir=ltr]   [_nghost-%COMP%]   .linkIcon[_ngcontent-%COMP%]{padding-right:5px}html[dir=rtl][_ngcontent-%COMP%]   .linkIcon[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .linkIcon[_ngcontent-%COMP%], [dir=rtl][_nghost-%COMP%]   .linkIcon[_ngcontent-%COMP%], html[dir=rtl][_nghost-%COMP%]   .linkIcon[_ngcontent-%COMP%], html[dir=rtl]   [_nghost-%COMP%]   .linkIcon[_ngcontent-%COMP%], [dir=rtl][_nghost-%COMP%]   .linkIcon[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .linkIcon[_ngcontent-%COMP%]{padding-left:5px}"]}),i})();class qt extends L{constructor(s="",e=!1,n="",o=[],r=!1){super(s,e),this.version=s,this.isDeprecated=e,this.currentHandler=n,this.availableHandlers=o,this.handlerIsChanging=r}}var M=(()=>{return(i=M||(M={})).ascending="asc",i.descending="desc",M;var i})();let Bt=(()=>{class i{constructor(e){this.apiClient=e}fetchVersionHandlerList(){const e=new c.r(c.N.JsonApi,{method:"php_get_handlers"});return this.apiClient.get(e)}applyVersionHandler(e,n){const o=new c.r(c.N.JsonApi,{method:"php_set_handler",arguments:[new P.h("version",e),new P.h("handler",n)]});return this.apiClient.post(o)}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(D.A4))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var d=m(4006);function Qt(i,s){if(1&i&&t._UZ(0,"i",7),2&i){const e=t.oxw();t.Q6J("ngClass",e.sortDirectionClass())}}function Nt(i,s){if(1&i&&t._UZ(0,"i",7),2&i){const e=t.oxw();t.Q6J("ngClass",e.sortDirectionClass())}}function Yt(i,s){if(1&i&&(t.TgZ(0,"option",14),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("ngValue",e),t.xp6(1),t.hij(" ",e," ")}}function Et(i,s){1&i&&(t.TgZ(0,"div",15),t._UZ(1,"i",16),t.qZA())}function Rt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"tr",9)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",10)(4,"select",11),t.NdJ("ngModelChange",function(o){return t.CHM(e).$implicit.currentHandler=o})("change",function(){const r=t.CHM(e).$implicit;return t.oxw(2).applyHandler(r.version,r.currentHandler)}),t.YNc(5,Yt,2,2,"option",12),t.qZA(),t.YNc(6,Et,2,0,"div",13),t.qZA()()}if(2&i){const e=s.$implicit;t.xp6(2),t.Oqu(e.formattedVersion),t.xp6(2),t.MGl("id","handlerDropdown_",e.version,""),t.Q2q("aria-label","handlerDropdown_",e.version,""),t.Q6J("ngModel",e.currentHandler)("disabled",e.handlerIsChanging),t.xp6(1),t.Q6J("ngForOf",e.availableHandlers),t.xp6(1),t.Q6J("ngIf",e.handlerIsChanging)}}function jt(i,s){if(1&i&&(t.ynx(0),t.YNc(1,Rt,7,7,"tr",8),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.installedPHPVersions)}}function Wt(i,s){if(1&i&&(t.TgZ(0,"tr",17)(1,"td",18),t._UZ(2,"span",19),t.TgZ(3,"span",20),t._uU(4),t.qZA()()()),2&i){const e=t.oxw();t.xp6(4),t.Oqu(e.locale.maketext("Loading [asis,PHP] Handlers \u2026"))}}let zt=(()=>{class i{constructor(e,n,o,r,p,u){this.locale=e,this.handlerService=n,this.alertService=o,this.phpHelper=r,this.phpVersionService=p,this.appDataService=u,this.lsapiInstalled=new t.vpe,this.sortDirection=M.ascending,this.installedPHPVersions=[],this.loadingPhpList=!0,this.columnToSort=""}ngOnInit(){this.fetchHandlers()}fetchHandlers(){this.handlerService.fetchVersionHandlerList().subscribe(e=>{if(e.hasErrors)this.phpHelper.error(e);else if(this.phpVersionService.fetchPhpListSubject){this.phpVersionService.fetchPhpListSubject.subscribe(o=>{o.done&&(this.installedPHPVersions=this.convertToSystemVersions(o.result),this.populateHandlers(e.data))});const n=(0,g.includes)((0,g.uniq)((0,g.flatten)((0,g.map)(e.data,"available_handlers"))),"lsapi");this.lsapiInstalled.emit(n)}else this.installedPHPVersions=this.convertToSystemVersions(this.appDataService.installedPhpVersions),this.populateHandlers(e.data);this.loadingPhpList=!1})}populateHandlers(e){e.forEach(n=>{this.installedPHPVersions.forEach(o=>{o.version===n.version&&(o.availableHandlers=n.available_handlers,o.currentHandler=n.current_handler)})})}convertToSystemVersions(e){let n=[];return e&&null!==e&&(n=e.map(o=>new qt(o.version,o.isDeprecated))),n}applyHandler(e,n){const o=(0,g.find)(this.installedPHPVersions,["version",e]);o&&(o.handlerIsChanging=!0,this.handlerService.applyVersionHandler(e,n).subscribe(r=>{r.hasErrors?this.phpHelper.error(r):(o.currentHandler=n,this.alertService.success(this.locale.maketext("Successfully applied the \u201c[_1]\u201d [asis,PHP] handler to the \u201c[_2]\u201d package.",n,e))),o.handlerIsChanging=!1}))}sort(e){this.columnToSort=e,this.installedPHPVersions=(0,g.orderBy)(this.installedPHPVersions,"version"===e?"version":"currentHandler",this.sortDirection=this.sortDirection===M.ascending?M.descending:M.ascending)}sortDirectionClass(){return this.sortDirection===M.ascending?"icon-arrow-down":"icon-arrow-up"}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(C.g),t.Y36(Bt),t.Y36(a.c9),t.Y36(O),t.Y36(b),t.Y36(U))},i.\u0275cmp=t.Xpm({type:i,selectors:[["multiphp-mgr-system-handlers"]],outputs:{lsapiInstalled:"lsapiInstalled"},decls:14,vars:6,consts:[[1,"table","table-striped"],[1,"tableHeaders"],["id","versionSort",1,"headerBtn",3,"click"],["aria-hidden","true",3,"ngClass",4,"ngIf"],["id","handlerSort",1,"headerBtn",3,"click"],[4,"ngIf"],["class","info empty-row",4,"ngIf"],["aria-hidden","true",3,"ngClass"],["class","form-inline",4,"ngFor","ngForOf"],[1,"form-inline"],[1,"handlerDropdownColumn"],[1,"form-control","handlerDropdown",3,"id","ngModel","disabled","ngModelChange","change"],[3,"ngValue",4,"ngFor","ngForOf"],["class","processing-spinner",4,"ngIf"],[3,"ngValue"],[1,"processing-spinner"],["aria-hidden","true",1,"fas","fa-spinner","fa-spin","spinner"],[1,"info","empty-row"],["colspan","2","id","loadingRow"],[1,"fas","fa-spinner","fa-spin"],[1,"loading-text"]],template:function(e,n){1&e&&(t.TgZ(0,"table",0)(1,"thead",1)(2,"tr")(3,"th",2),t.NdJ("click",function(){return n.sort("version")}),t.TgZ(4,"a"),t._uU(5),t.qZA(),t.YNc(6,Qt,1,1,"i",3),t.qZA(),t.TgZ(7,"th",4),t.NdJ("click",function(){return n.sort("handler")}),t.TgZ(8,"a"),t._uU(9),t.qZA(),t.YNc(10,Nt,1,1,"i",3),t.qZA()()(),t.TgZ(11,"tbody"),t.YNc(12,jt,2,1,"ng-container",5),t.YNc(13,Wt,5,1,"tr",6),t.qZA()()),2&e&&(t.xp6(5),t.Oqu(n.locale.maketext("[asis,PHP] Version")),t.xp6(1),t.Q6J("ngIf","version"===n.columnToSort),t.xp6(3),t.Oqu(n.locale.maketext("[asis,PHP] Handler")),t.xp6(1),t.Q6J("ngIf","handler"===n.columnToSort),t.xp6(2),t.Q6J("ngIf",!n.loadingPhpList),t.xp6(1),t.Q6J("ngIf",n.loadingPhpList))},directives:[h.O5,h.mk,h.sg,d.EJ,d.JJ,d.On,d.YN,d.Kr],styles:[".table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]{border-top:none!important}.tableHeaders[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#428bca;font-weight:600}.handlerDropdown[_ngcontent-%COMP%]{width:60%}.handlerDropdownColumn[_ngcontent-%COMP%]{width:40%}.headerBtn[_ngcontent-%COMP%]:hover{cursor:pointer}html[dir=ltr][_ngcontent-%COMP%]   .headerBtn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], [dir=ltr][_ngcontent-%COMP%]   .headerBtn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], [dir=ltr][_nghost-%COMP%]   .headerBtn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], html[dir=ltr][_nghost-%COMP%]   .headerBtn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], html[dir=ltr]   [_nghost-%COMP%]   .headerBtn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], [dir=ltr][_nghost-%COMP%]   .headerBtn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], [dir=ltr]   [_nghost-%COMP%]   .headerBtn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding-left:2px}html[dir=rtl][_ngcontent-%COMP%]   .headerBtn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .headerBtn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], [dir=rtl][_nghost-%COMP%]   .headerBtn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], html[dir=rtl][_nghost-%COMP%]   .headerBtn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], html[dir=rtl]   [_nghost-%COMP%]   .headerBtn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], [dir=rtl][_nghost-%COMP%]   .headerBtn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .headerBtn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding-right:2px}html[dir=ltr][_ngcontent-%COMP%]   .handlerDropdownColumn[_ngcontent-%COMP%] > .processing-spinner[_ngcontent-%COMP%], [dir=ltr][_ngcontent-%COMP%]   .handlerDropdownColumn[_ngcontent-%COMP%] > .processing-spinner[_ngcontent-%COMP%], [dir=ltr][_nghost-%COMP%]   .handlerDropdownColumn[_ngcontent-%COMP%] > .processing-spinner[_ngcontent-%COMP%], html[dir=ltr][_nghost-%COMP%]   .handlerDropdownColumn[_ngcontent-%COMP%] > .processing-spinner[_ngcontent-%COMP%], html[dir=ltr]   [_nghost-%COMP%]   .handlerDropdownColumn[_ngcontent-%COMP%] > .processing-spinner[_ngcontent-%COMP%], [dir=ltr][_nghost-%COMP%]   .handlerDropdownColumn[_ngcontent-%COMP%] > .processing-spinner[_ngcontent-%COMP%], [dir=ltr]   [_nghost-%COMP%]   .handlerDropdownColumn[_ngcontent-%COMP%] > .processing-spinner[_ngcontent-%COMP%]{padding-left:5px}html[dir=rtl][_ngcontent-%COMP%]   .handlerDropdownColumn[_ngcontent-%COMP%] > .processing-spinner[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .handlerDropdownColumn[_ngcontent-%COMP%] > .processing-spinner[_ngcontent-%COMP%], [dir=rtl][_nghost-%COMP%]   .handlerDropdownColumn[_ngcontent-%COMP%] > .processing-spinner[_ngcontent-%COMP%], html[dir=rtl][_nghost-%COMP%]   .handlerDropdownColumn[_ngcontent-%COMP%] > .processing-spinner[_ngcontent-%COMP%], html[dir=rtl]   [_nghost-%COMP%]   .handlerDropdownColumn[_ngcontent-%COMP%] > .processing-spinner[_ngcontent-%COMP%], [dir=rtl][_nghost-%COMP%]   .handlerDropdownColumn[_ngcontent-%COMP%] > .processing-spinner[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .handlerDropdownColumn[_ngcontent-%COMP%] > .processing-spinner[_ngcontent-%COMP%]{padding-right:5px}"]}),i})();function Gt(i,s){if(1&i&&t._UZ(0,"multiphp-mgr-cloudlinux-banner",8),2&i){const e=t.oxw();t.Q6J("lsapiInstalled",e.lsapiInstalled)}}let et=(()=>{class i{constructor(e,n,o){this.locale=e,this.phpService=n,this.phpHelper=o,this.systemFPMChange=new t.vpe,this.phpList=[],this.systemFPMInfo=new K,this.fetchSystemPhpSubject=new Y.X({done:!1,result:null}),this.deprecatedVersions=[],this.lsapiInstalled=!1}onSystemDefaultChange(e){this.fetchSystemPhpSubject.next({done:!0,result:e})}lsapiInstalledCheck(e){this.lsapiInstalled=e}ngOnInit(){this.fetchSystemPhp()}fetchSystemPhp(){this.phpService.getSystemDefault().subscribe(e=>{let n;e.hasErrors?this.phpHelper.error(e):n=e.data.version,this.fetchSystemPhpSubject.next({done:!0,result:n})})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(C.g),t.Y36(E),t.Y36(O))},i.\u0275cmp=t.Xpm({type:i,selectors:[["multiphp-mgr-system-settings"]],outputs:{systemFPMChange:"systemFPMChange"},decls:15,vars:4,consts:[[1,"systemSettingsSection"],[1,"row"],[1,"col-xs-12","col-md-10","col-lg-9"],[3,"fetchSystemPhpSubject","systemDefaultChange"],[3,"fetchSystemPhpSubject"],[1,"heading"],[1,"handlersSection"],[3,"lsapiInstalled",4,"ngIf"],[3,"lsapiInstalled"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"multiphp-mgr-system-php-settings",3),t.NdJ("systemDefaultChange",function(r){return n.onSystemDefaultChange(r)}),t.qZA()()(),t.TgZ(4,"div",1)(5,"div",2),t._UZ(6,"multiphp-mgr-system-fpm",4),t.qZA()(),t.TgZ(7,"div",5)(8,"h3"),t._uU(9),t.qZA()(),t.TgZ(10,"div",6)(11,"div",1)(12,"div",2),t.YNc(13,Gt,1,1,"multiphp-mgr-cloudlinux-banner",7),t.TgZ(14,"multiphp-mgr-system-handlers",8),t.NdJ("lsapiInstalled",function(r){return n.lsapiInstalledCheck(r)}),t.qZA()()()()()),2&e&&(t.xp6(3),t.Q6J("fetchSystemPhpSubject",n.fetchSystemPhpSubject),t.xp6(3),t.Q6J("fetchSystemPhpSubject",n.fetchSystemPhpSubject),t.xp6(3),t.Oqu(n.locale.maketext("[asis,PHP] Handlers")),t.xp6(4),t.Q6J("ngIf",n.lsapiInstalled))},directives:[Ct,At,h.O5,tt,zt],styles:[".heading[_ngcontent-%COMP%]{border-bottom:1px solid #eaeaea;margin-top:40px}.handlersSection[_ngcontent-%COMP%]{margin-top:20px}"]}),i})();var k=m(755),$t=m(5380),q=m(3357);class nt{constructor(s="",e="",n="",o="",r=!1,p=!1,u=_.disabled,x={},T="",I,Z){this.account=s,this.accountOwner=e,this.documentRoot=n,this.homeDirectory=o,this.isSuspended=r,this.isMainDomain=p,this.fpmStatus=u,this.phpFpmPoolParams=x,this.phpVersionSource=T,this.phpVersion=I,this.vhost=Z}}class Xt{constructor(s="",e){this.domain=s,this.model=e,this.phpVersionChangeInProcess=!1,this.displayDetails=!1,this.selected=!1,this.applyInheritButton={buttonClass:"btn btn-sm btn-primary",buttonState:a.FP.enabled},this.isInherit=!1,this.domainFpmToggle={toggleState:a.Yg.toggleOff,labelPosition:a.Gy.right,isDisabled:!1},this.showInheritPromptMessage="",this.showInheritPrompt=!1,this.inheritInProcess=!1,this.wantToInherit=!1}}let W=(()=>{class i{constructor(e,n){this.apiClient=e,this.phpVersionService=n}getPhpDataForDomains(e){return this._getDomainPhpVersions(e)}getPhpDataForDomain(e){return this._getDomainPhpVersions({filters:[new q.w("vhost",q.p.Equal,e)]}).pipe((0,S.U)(n=>{if(n.success){const o=n.data[0];let r=this.phpVersionService.getPhpVersionDataByPackage(o.version);r=r||new L(o.version),n.data=new nt(o.account,o.account_owner,o.documentroot,o.homedir,1===o.is_suspended,1===o.main_domain,1===o.php_fpm?_.enabled:_.disabled,o.php_fpm_pool_params,this.getInheritSource(o.phpversion_source,o.vhost),r,o.vhost)}return n}))}_getDomainPhpVersions(e){const n=new c.r(c.N.JsonApi,{method:"php_get_vhost_versions",...e});return this.apiClient.get(n)}getImpactedDomainsForDomain(e){return this._getImpactedDomains("domain",e)}getImpactedDomainsForSystem(){return this._getImpactedDomains("system_default",1)}applyPhpVersionToDomains(e,n){const o=e.map(p=>new P.h("vhost",p));o.push(new P.h("version",n));const r=new c.r(c.N.JsonApi,{method:"php_set_vhost_versions",arguments:o});return this.apiClient.post(r)}applyFPMToDomain(e,n){const o=new c.r(c.N.JsonApi,{method:"php_set_vhost_versions",arguments:[new P.h("php_fpm",n),new P.h("vhost",e)]});return this.apiClient.post(o)}bulkToggleFPMToDomains(e,n){const o=e.map(p=>new P.h("vhost",p));o.push(new P.h("php_fpm",n));const r=new c.r(c.N.JsonApi,{method:"php_set_vhost_versions",arguments:o});return this.apiClient.post(r)}setInheritToDomains(e){return this.applyPhpVersionToDomains(e,"inherit")}getInheritSource(e,n){let o="";if(e){const r=(0,g.keys)(e)[0];if((0,g.includes)(["system_default","domain"],r))switch(r){case"system_default":o="system_default";break;case"domain":n!==e.domain&&(o=e.domain)}}return o}_getImpactedDomains(e,n){const o=new c.r(c.N.JsonApi,{method:"php_get_impacted_domains",arguments:[new P.h(e,n)]});return this.apiClient.get(o)}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(D.A4),t.LFG(b))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Kt(i,s){if(1&i&&(t.TgZ(0,"div",2)(1,"div",3)(2,"cp-callout",4)(3,"pre",5),t._uU(4),t.qZA()()()()),2&i){const e=t.oxw();t.xp6(4),t.Oqu(e.loadFailureMessage)}}function te(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",31)(1,"pagination",32),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw(2).pagination.currentPage=o})("pageChanged",function(o){return t.CHM(e),t.oxw(2).pageChanged(o)}),t.qZA(),t.TgZ(2,"p",33),t._uU(3),t.qZA()()}if(2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("boundaryLinks",e.pagination.showBoundaryLinks)("ngModel",e.pagination.currentPage)("totalItems",e.pagination.totalItems)("maxSize",e.pagination.maxSize)("itemsPerPage",e.pagination.pageSize),t.xp6(2),t.Oqu(e.paginationDetailsText)}}function ee(i,s){1&i&&(t.TgZ(0,"span",34),t._UZ(1,"i",35),t.qZA())}function ne(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",45),t.NdJ("click",function(){return t.CHM(e),t.oxw(4).changePageSize()}),t._uU(1),t.qZA()}if(2&i){const e=s.$implicit;t.s9C("btnRadio",e),t.xp6(1),t.hij(" ",e," ")}}function ie(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"li",39)(1,"div",42),t._uU(2),t.qZA(),t.TgZ(3,"div",43),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw(3).pagination.pageSize=o}),t.YNc(4,ne,2,2,"button",44),t.qZA()()}if(2&i){const e=t.oxw(3);t.xp6(2),t.hij(" ",e.locale.maketext("Entries Per Page")," "),t.xp6(1),t.Q6J("ngModel",e.pagination.pageSize),t.xp6(1),t.Q6J("ngForOf",e.pagination.pageSizes)}}function oe(i,s){1&i&&t._UZ(0,"li",46)}function se(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"ul",36),t.YNc(1,ie,5,3,"li",37),t.YNc(2,oe,1,0,"li",38),t.TgZ(3,"li",39)(4,"a",40),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).loadDomainList()}),t._UZ(5,"i",41),t._uU(6),t.qZA()()()}if(2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.showPageSizeSelector),t.xp6(1),t.Q6J("ngIf",e.showPageSizeSelector),t.xp6(4),t.hij(" ",e.locale.maketext("Refresh")," ")}}function re(i,s){if(1&i&&t._UZ(0,"i"),2&i){const e=t.oxw(2).$implicit,n=t.oxw(2);t.Tol(n.sortDirClass),t.uIk("title",e.title)}}function ae(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"a",50),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw(2).changeSort(o.key)}),t._UZ(1,"span",51),t._uU(2," \xa0 "),t.YNc(3,re,1,3,"i",52),t.qZA()}if(2&i){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("innerHtml",e.title,t.oJD),t.xp6(2),t.Q6J("ngIf",e.key===n.tableMetaData.sorts[0].column)}}function le(i,s){if(1&i&&t._UZ(0,"span",51),2&i){const e=t.oxw().$implicit;t.Q6J("innerHtml",e.title,t.oJD)}}function pe(i,s){if(1&i&&(t.TgZ(0,"th",47),t.YNc(1,ae,4,2,"a",48),t.YNc(2,le,1,1,"span",49),t.qZA()),2&i){const e=s.$implicit;t.Q6J("ngClass",e.cssClasses),t.xp6(1),t.Q6J("ngIf",e.isSortable),t.xp6(1),t.Q6J("ngIf",!e.isSortable&&""!==e.title)}}function ce(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"tr",57)(1,"td",58),t.NdJ("inheritStateChanged",function(o){return t.CHM(e),t.oxw(4).onInheritStateChanged(o)})("rowPhpVersionChanged",function(o){return t.CHM(e),t.oxw(4).onRowPhpVersionChanged(o)})("confirmInheritStateChanged",function(o){return t.CHM(e),t.oxw(4).performInheritPhp(o)})("cancelInheritStateChange",function(o){return t.CHM(e),t.oxw(4).cancelPerformInheritPhp(o)}),t.qZA()()}if(2&i){const e=t.oxw().$implicit,n=t.oxw(3);t.MGl("id","",e.model.vhost,"-domain-details-row"),t.xp6(1),t.Q6J("rowData",e),t.uIk("colspan",n.emptyRowColSpan)}}function he(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"tr",59)(1,"td")(2,"multiphp-mgr-inherit-warning",60),t.NdJ("confirmInheritStateChanged",function(o){return t.CHM(e),t.oxw(4).performInheritPhp(o)})("cancelInheritStateChange",function(o){return t.CHM(e),t.oxw(4).cancelPerformInheritPhp(o)}),t.qZA()()()}if(2&i){const e=t.oxw().$implicit,n=t.oxw(3);t.MGl("id","",e.model.vhost,"-domain-inherit-prompt-row"),t.xp6(1),t.uIk("colspan",n.emptyRowColSpan),t.xp6(1),t.Q6J("rowData",e)}}function de(i,s){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"tr",54),t.NdJ("rowSelectionChanged",function(o){return t.CHM(e),t.oxw(3).onRowSelectionChanged(o)})("rowPhpVersionChanged",function(o){return t.CHM(e),t.oxw(3).onRowPhpVersionChanged(o)})("inheritStateChanged",function(o){return t.CHM(e),t.oxw(3).onInheritStateChanged(o)}),t.qZA(),t.YNc(2,ce,2,3,"tr",55),t.YNc(3,he,3,3,"tr",56),t.BQk()}if(2&i){const e=s.$implicit;t.xp6(1),t.MGl("id","",e.model.vhost,"-domain-list-row"),t.Q6J("rowData",e),t.xp6(1),t.Q6J("ngIf",e.displayDetails),t.xp6(1),t.Q6J("ngIf",e.showInheritPrompt&&!e.displayDetails)}}function ge(i,s){if(1&i&&(t.TgZ(0,"tbody"),t.YNc(1,de,4,4,"ng-container",53),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.displayRows)}}function me(i,s){if(1&i&&(t.TgZ(0,"tbody")(1,"tr",61)(2,"td"),t._uU(3),t.qZA()()()),2&i){const e=t.oxw(2);t.xp6(2),t.uIk("colspan",e.emptyRowColSpan),t.xp6(1),t.hij(" ",e.locale.maketext("The account list is empty.")," ")}}function _e(i,s){if(1&i&&(t.TgZ(0,"tbody")(1,"tr",62)(2,"td"),t._uU(3),t.qZA()()()),2&i){const e=t.oxw(2);t.xp6(2),t.uIk("colspan",e.emptyRowColSpan),t.xp6(1),t.hij(" ",e.locale.maketext("No results match your query.")," ")}}function ue(i,s){if(1&i&&(t.TgZ(0,"tbody")(1,"tr",63)(2,"td"),t._UZ(3,"span",64),t.TgZ(4,"span",65),t._uU(5),t.qZA()()()()),2&i){const e=t.oxw(2);t.xp6(2),t.uIk("colspan",e.emptyRowColSpan),t.xp6(3),t.Oqu(e.locale.maketext("Loading domains with [asis,PHP] versions \u2026"))}}function fe(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",66)(1,"p",33),t._uU(2),t.qZA(),t.TgZ(3,"pagination",67),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw(2).pagination.currentPage=o})("pageChanged",function(o){return t.CHM(e),t.oxw(2).pageChanged(o)}),t.qZA()()}if(2&i){const e=t.oxw(2);t.xp6(2),t.Oqu(e.paginationDetailsText),t.xp6(1),t.Q6J("boundaryLinks",e.pagination.showBoundaryLinks)("ngModel",e.pagination.currentPage)("totalItems",e.pagination.totalItems)("maxSize",e.pagination.maxSize)("itemsPerPage",e.pagination.pageSize)}}function Pe(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",3)(2,"div",2)(3,"div",6)(4,"cp-search",7),t.NdJ("valueChange",function(o){return t.CHM(e),t.oxw().changeFilter(o)}),t.qZA()(),t.TgZ(5,"div",8),t.YNc(6,te,4,6,"div",9),t.qZA()(),t.TgZ(7,"div",10)(8,"div",3)(9,"div",11)(10,"div",12)(11,"label",13)(12,"input",14),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().selectAllState=o})("change",function(){return t.CHM(e),t.oxw().toggleSelectAll()}),t.qZA()()(),t.TgZ(13,"multiphp-mgr-php-dropdown",15),t.NdJ("phpVersionChanged",function(o){return t.CHM(e),t.oxw().changePhpVersion(o)}),t.qZA(),t.YNc(14,ee,2,0,"span",16),t.TgZ(15,"cp-action-button",17),t.NdJ("click",function(){return t.CHM(e),t.oxw().bulkApplyInherit()}),t._uU(16),t.qZA(),t.TgZ(17,"cp-action-button",18),t.NdJ("click",function(){return t.CHM(e),t.oxw().bulkDisablePhpFpm()}),t._uU(18),t.qZA()(),t.TgZ(19,"div",19)(20,"div",20)(21,"button",21),t._UZ(22,"i",22)(23,"span",23),t.qZA(),t.YNc(24,se,7,3,"ul",24),t.qZA()()()(),t.TgZ(25,"section",25)(26,"table",26)(27,"thead")(28,"tr"),t.YNc(29,pe,3,3,"th",27),t.qZA()(),t.YNc(30,ge,2,1,"tbody",28),t.YNc(31,me,4,2,"tbody",28),t.YNc(32,_e,4,2,"tbody",28),t.YNc(33,ue,6,2,"tbody",28),t.qZA()(),t.TgZ(34,"div",29)(35,"div",3),t.YNc(36,fe,4,6,"div",30),t.qZA()()()()}if(2&i){const e=t.oxw();t.xp6(4),t.s9C("label",e.searchHelpText),t.s9C("placeholder",e.searchHelpText),t.xp6(2),t.Q6J("ngIf",e.pagination.show),t.xp6(6),t.Q6J("ngModel",e.selectAllState),t.uIk("aria-label",e.locale.maketext("Select all rows.")),t.xp6(1),t.Q6J("buttonText",e.locale.maketext("Set [asis,PHP] Version"))("disabled",e.disableBulkPhpDropdown),t.xp6(1),t.Q6J("ngIf",e.processingBulkPhpDropdown),t.xp6(1),t.Q6J("buttonClass",e.bulkInheritPhpButton.buttonClass)("buttonState",e.bulkInheritButtonState),t.xp6(1),t.hij(" ",e.locale.maketext("Set Inherit")," "),t.xp6(1),t.Q6J("buttonClass",e.bulkDisablePhpFpmButton.buttonClass)("buttonState",e.bulkDisablePhpFpmButtonState),t.xp6(1),t.hij(" ",e.locale.maketext("Disable [asis,PHP-FPM]")," "),t.xp6(3),t.uIk("aria-label",e.locale.maketext("Table Settings")),t.xp6(8),t.Q6J("ngForOf",e.tableHeaders),t.xp6(1),t.Q6J("ngIf",e.showList),t.xp6(1),t.Q6J("ngIf",e.showWhenListIsEmpty),t.xp6(1),t.Q6J("ngIf",e.showWhenSearchIsEmpty),t.xp6(1),t.Q6J("ngIf",e.showLoadingMessage),t.xp6(3),t.Q6J("ngIf",e.pagination.show)}}let V=(()=>{class i{constructor(e,n,o,r,p){this.locale=e,this.domainPhpService=n,this.phpHelper=o,this.alertService=r,this.phpVersionService=p,this.displayRows=[],this.domainList=[],this.loadingData=!0,this.loadFailureMessage="",this.searchHelpText="",this.pagination={pageSizes:[20,50,100,500,1e3],currentPage:1,pageSize:20,showBoundaryLinks:!0,maxSize:5,start:1,limit:1,show:!1,totalItems:0},this.tableMetaData={sorts:[new k.PE("vhost",k.Sr.Ascending)],pager:new $t.uE(this.pagination.currentPage,this.pagination.pageSize)},this.selectAllState=!1,this.checkedCount=0,this.processingBulkPhpDropdown=!1,this.bulkInheritPhpButton={buttonClass:"btn btn-sm btn-default button-bar",buttonState:a.FP.disabled},this.bulkDisablePhpFpmButton={buttonClass:"btn btn-sm btn-default button-bar",buttonState:a.FP.disabled}}get sortDirClass(){return this.tableMetaData.sorts[0].direction===k.Sr.Ascending?"icon-arrow-up":"icon-arrow-down"}get showLoadingMessage(){return this.loadingData&&""===this.loadFailureMessage}get showFailureMessageOnLoad(){return!this.loadingData&&""!==this.loadFailureMessage}get showContent(){return!this.loadingData&&""===this.loadFailureMessage}get showWhenSearchIsEmpty(){return!this.loadingData&&0===this.domainList.length&&0!==this.tableMetaData.filters?.length}get showWhenListIsEmpty(){return!this.loadingData&&0===this.domainList.length&&0===this.tableMetaData.filters?.length}get emptyRowColSpan(){return this.tableHeaders.length+1}get showList(){return!this.loadingData&&this.displayRows.length>0}get showPageSizeSelector(){return this.pagination.totalItems>(0,g.min)(this.pagination.pageSizes)}get disableBulkPhpDropdown(){return 0===this.checkedCount||this.processingBulkPhpDropdown}get bulkInheritButtonState(){return this.bulkInheritPhpButton.buttonState===a.FP.loading?this.bulkInheritPhpButton.buttonState:0===this.checkedCount?a.FP.disabled:a.FP.enabled}get bulkDisablePhpFpmButtonState(){return this.bulkDisablePhpFpmButton.buttonState===a.FP.loading?this.bulkDisablePhpFpmButton.buttonState:this._activateDisablePhpFpmButtonState()?a.FP.enabled:a.FP.disabled}get paginationDetailsText(){return this.locale.maketext("[_1] - [_2] of [_3][comment,Table pagination details. Example: 1 - 20 of 300]",this.pagination.start,this.pagination.limit,this.pagination.totalItems)}ngOnInit(){this.tableHeaders=[{key:"checkbox",title:"",cssClasses:["bulkAction","hidden-xs"],isSortable:!1},{key:"vhost",title:this.locale.maketext("Domain"),cssClasses:["domain-column-header"],isSortable:!0},{key:"account",title:this.locale.maketext("Account"),cssClasses:["hidden-xs","account"],isSortable:!0},{key:"version",title:this.locale.maketext("PHP Version"),cssClasses:["hidden-xs","phpVersion"],isSortable:!0},{key:"fpmStatus",title:this.locale.maketext("[asis,PHP-FPM][comment,This is title.]"),cssClasses:["hidden-xs","phpFpm"],isSortable:!1},{key:"actions",title:"",cssClasses:[],isSortable:!1}],this.searchHelpText=this.locale.maketext("Search for domain or user"),this.loadDomainList()}changeFilter(e){this.tableMetaData.filters=[new q.w("*",q.p.Contains,e)],1!==this.pagination.currentPage?(this.pagination.currentPage=1,this.tableMetaData.pager.page=this.pagination.currentPage):this.loadDomainList()}loadDomainList(){this.loadingData=!0,this.domainPhpService.getPhpDataForDomains(this.tableMetaData).subscribe(e=>{e.success?(this.domainList=e.data.map(o=>{let r=this.phpVersionService.getPhpVersionDataByPackage(o.version);return r=r||new L(o.version),new nt(o.account,o.account_owner,o.documentroot,o.homedir,1===o.is_suspended,1===o.main_domain,1===o.php_fpm?_.enabled:_.disabled,o.php_fpm_pool_params,this.domainPhpService.getInheritSource(o.phpversion_source,o.vhost),r,o.vhost)}),this.displayRows=this.domainList.map(o=>new Xt(o.vhost,o)),this._updatePaginationMetadata(e.meta),this.checkedCount=0,this.selectAllState=!1):e.hasErrors&&e.errors.length>0&&this.phpHelper.error(e),this.loadingData=!1},e=>{this.loadFailureMessage=e,this.loadingData=!1},()=>{this.loadingData=!1})}changeSort(e){if(this.tableMetaData.sorts){const n=this.tableMetaData.sorts.findIndex(o=>o.column===e);if(-1!==n)return this.tableMetaData.sorts[n].direction=this.tableMetaData.sorts[n].direction===k.Sr.Ascending?k.Sr.Descending:k.Sr.Ascending,void this.loadDomainList()}this.tableMetaData.sorts=[new k.PE(e,k.Sr.Descending)],this.loadDomainList()}toggleSelectAll(){0!==this.domainList.length&&(this.checkedCount=this.selectAllState?this.domainList.length:0,(0,g.each)(this.displayRows,e=>{e.selected=this.selectAllState}))}onRowSelectionChanged(e){e.selected?this.checkedCount++:this.checkedCount--,this.selectAllState=this.checkedCount===this.domainList.length}onRowPhpVersionChanged(e){e.phpVersionChangeInProcess=!0,this.domainPhpService.applyPhpVersionToDomains([e.domain],e.model.phpVersion.version).subscribe(n=>{n.success?this.domainPhpService.getImpactedDomainsForDomain(e.domain).subscribe(o=>{o.success?(this.updatePhpVersionForImpactedDomains(o.data,e.model.phpVersion),this.alertService.success(this.locale.maketext("The default [asis,PHP] version for \u201c[_1]\u201d has been set to \u201c[_2]\u201d.",e.domain,e.model.phpVersion.version))):this.phpHelper.error(o)}):this.phpHelper.error(n),e.phpVersionChangeInProcess=!1})}updatePhpVersionForImpactedDomains(e,n){if(e)for(let o=0;o<=e.length;o++){const r=(0,g.find)(this.displayRows,["model.vhost",e[o]]);!r||(r.model.phpVersion=n)}}onInheritStateChanged(e){e.showInheritPrompt=!0,e.wantToInherit?e.showInheritPromptMessage=this.locale.maketext("You are setting the domain \u201c[output,strong,_1]\u201d to \u201c[output,strong,Inherit]\u201d its [asis,PHP] version.",e.model.vhost):(e.showInheritPromptMessage=this.locale.maketext("You are attempting to move from inheriting the [asis,PHP] version \u201c[output,strong,_1]\u201d from \u201c[output,strong,_2]\u201d. Your [asis,PHP] version will no longer be in sync with \u201c[output,strong,_2]\u201d once you move.",e.model.phpVersion.formattedVersion,e.model.phpVersionSource),e.newPhpVersionToMoveFromInherit=e.model.phpVersion)}performInheritPhp(e){if(e.applyInheritButton.buttonState=a.FP.loading,e.wantToInherit)this.domainPhpService.setInheritToDomains([e.model.vhost]).pipe((0,R.x)(()=>{e.applyInheritButton.buttonState=a.FP.enabled})).subscribe(n=>{n.success?(e.isInherit=e.wantToInherit,this.domainPhpService.getPhpDataForDomain(e.model.vhost).subscribe(o=>{o.success?(e.model=o.data,this.domainPhpService.getImpactedDomainsForDomain(e.model.vhost).subscribe(r=>{r.success?this.updatePhpVersionForImpactedDomains(r.data,e.model.phpVersion):this.phpHelper.error(r)}),this.alertService.success(this.locale.maketext("The domain \u201c[_1]\u201d now inherits the \u201c[_2]\u201d [asis,PHP] version from \u201c[_3]\u201d.",e.model.vhost,e.model.phpVersion.formattedVersion,e.model.phpVersionSource))):o.hasErrors&&o.errors.length>0&&(this.phpHelper.error(o),this.alertService.error("Could not retrieve updated domain data. Try to refresh the table to get updated information.")),this._resetInheritPhp(e)})):(this.phpHelper.error(n),this.cancelPerformInheritPhp(e))},()=>{this.cancelPerformInheritPhp(e)});else{const n=e.model.vhost,o=e.newPhpVersionToMoveFromInherit;this.domainPhpService.applyPhpVersionToDomains([n],o.version).pipe((0,R.x)(()=>{e.applyInheritButton.buttonState=a.FP.enabled})).subscribe(r=>{r.success?(this.domainPhpService.getImpactedDomainsForDomain(n).subscribe(p=>{p.success?this.updatePhpVersionForImpactedDomains(p.data,o):this.phpHelper.error(p)}),this.alertService.success(this.locale.maketext("The domain \u201c[_1]\u201d no longer inherits the [asis,PHP] version. It is now set to \u201c[_2]\u201d.",n,o.formattedVersion)),e.model.phpVersion=o,e.isInherit=e.wantToInherit,e.domainFpmToggle.toggleState=e.model.fpmStatus===_.enabled?a.Yg.toggleOn:a.Yg.toggleOff,this._resetInheritPhp(e)):(this.phpHelper.error(r),this.cancelPerformInheritPhp(e))},()=>{this.cancelPerformInheritPhp(e)})}}cancelPerformInheritPhp(e){e.isInherit=e.wantToInherit=!e.wantToInherit,this._resetInheritPhp(e)}changePageSize(){this.pagination.pageSize=Number(this.pagination.pageSize),this.pagination.currentPage=1,this.tableMetaData.pager.pageSize=this.pagination.pageSize,this.tableMetaData.pager.page=this.pagination.currentPage,this.loadDomainList()}pageChanged(e){this.pagination.currentPage=e.page,this.tableMetaData.pager.page=this.pagination.currentPage,this.loadDomainList()}changePhpVersion(e){this.processingBulkPhpDropdown=!0;const n=(0,g.map)((0,g.filter)(this.displayRows,["selected",!0]),o=>o.model.vhost);this.domainPhpService.applyPhpVersionToDomains(n,e.version).subscribe(o=>{o.hasErrors?this.phpHelper.error(o):(this.alertService.success(this.locale.maketext("The [asis,PHP] version \u201c[_1]\u201d has been applied to all selected domains.",e.formattedVersion)),this.loadDomainList(),this.selectAllState=!1),this.processingBulkPhpDropdown=!1})}bulkApplyInherit(){const e=(0,g.map)((0,g.filter)(this.displayRows,["selected",!0]),n=>n.model.vhost);e?.length>0&&(this.bulkInheritPhpButton.buttonState=a.FP.loading,this.domainPhpService.setInheritToDomains(e).subscribe(n=>{n.success?(this.alertService.success(this.locale.maketext("The selected domains now inherit a [asis,PHP] version. You can see the inherited [asis,PHP] version in each domain\u2019s row in the table.")),this.loadDomainList()):this.phpHelper.error(n),this.bulkInheritPhpButton.buttonState=a.FP.enabled}))}bulkDisablePhpFpm(){const e=(0,g.filter)(this.displayRows,["selected",!0]);if(e?.length>0&&this._activateDisablePhpFpmButtonState(e)){const n=(0,g.map)(e,o=>o.model.vhost);this.bulkDisablePhpFpmButton.buttonState=a.FP.loading,this.domainPhpService.bulkToggleFPMToDomains(n,_.disabled).subscribe(o=>{o.success?(this.alertService.success(this.locale.maketext("[asis,PHP-FPM] is disabled on the selected domains.")),this.loadDomainList()):this.phpHelper.error(o),this.bulkDisablePhpFpmButton.buttonState=a.FP.enabled})}}updateNewPhpVersionInDomainRow(e,n){n.newPhpVersionToMoveFromInherit=e}gotoPhpFpmSettings(){this.phpHelper.routeTo("system/fpm-settings")}_activateDisablePhpFpmButtonState(e){e||(e=(0,g.filter)(this.displayRows,["selected",!0]));let n=!1;return n=(0,g.some)(e,o=>!o.isInherit&&this.phpVersionService.isPhpFpmInstalled(`${o.model.phpVersion.version}-php-fpm`)&&o.model.fpmStatus===_.enabled),n}_resetInheritPhp(e){e.showInheritPrompt=!1,e.showInheritPromptMessage="",e.inheritInProcess=!1,e.applyInheritButton.buttonState=a.FP.enabled}_updatePaginationMetadata(e){this.pagination.totalItems=e.totalRecords,this.pagination.totalItems>(0,g.min)(this.pagination.pageSizes)?(this.pagination.show=!0,this.pagination.start=e.record,this.pagination.limit=Math.min(this.pagination.totalItems,this.pagination.start-1+this.pagination.pageSize)):(this.pagination.show=!1,this.pagination.start=0===this.pagination.totalItems?0:1,this.pagination.limit=this.pagination.totalItems)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(C.g),t.Y36(W),t.Y36(O),t.Y36(a.c9),t.Y36(b))},i.\u0275cmp=t.Xpm({type:i,selectors:[["multiphp-mgr-domain-list"]],decls:3,vars:2,consts:[["id","user-domain-list"],["class","row",4,"ngIf"],[1,"row"],[1,"col-xs-12"],["id","loadFailureMessage","calloutType","danger"],[1,"unlink-error-pre"],[1,"col-xs-12","col-sm-6","col-md-4","padding-bottom-20"],["id","searchDomainList","autofocus","true",3,"label","placeholder","valueChange"],[1,"col-xs-12","col-sm-6","col-md-8","padding-bottom-20"],["class","pagination-container hidden-xs hidden-sm",4,"ngIf"],[1,"row","action-bar"],[1,"pull-left","flip","hidden-xs"],[1,"table-action-button-container"],[1,"table-action-button-label","table-action-button-sm"],["type","checkbox","name","checkAllInList","id","checkAllInList",3,"ngModel","ngModelChange","change"],["id","bulk-domain-php",3,"buttonText","disabled","phpVersionChanged"],["id","bulk-domain-php-processing-spinner","class","processing-spinner",4,"ngIf"],["id","bulk-inherit-php","title","[% locale.maketext('Set multiple selected domains to Inherit their [asis,PHP] version.') %]",3,"buttonClass","buttonState","click"],["id","bulk-disable-php-fpm","title","[% locale.maketext('Disable [asis,PHP-FPM] on multiple selected domains.') %]",3,"buttonClass","buttonState","click"],[1,"pull-right","flip"],["dropdown","","auto-close","outsideClick",1,"btn-group","pull-right"],["id","table-settings-dropdown","type","button","dropdownToggle","",1,"btn","btn-default","btn-sm","dropdown-toggle","button-bar"],[1,"fas","fa-cog"],[1,"caret"],["id","table-settings-menu","class","dropdown-menu dropdown-menu-right","role","menu","aria-labelledby","table-settings-dropdown",4,"dropdownMenu"],[1,"list-section"],["id","user-domain-table",1,"table","table-striped","responsive-table","details-table"],[3,"ngClass",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"row","visible-sm-block","visible-xs-block","hidden-lg","hidden-md"],["class","pagination-container pull-right flip",4,"ngIf"],[1,"pagination-container","hidden-xs","hidden-sm"],["firstText","\u2039\u2039","lastText","\u203a\u203a","previousText","\u2039","nextText","\u203a","id","user-domain-pagination",3,"boundaryLinks","ngModel","totalItems","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"text-small"],["id","bulk-domain-php-processing-spinner",1,"processing-spinner"],["aria-hidden","true",1,"fas","fa-spinner","fa-spin","spinner"],["id","table-settings-menu","role","menu","aria-labelledby","table-settings-dropdown",1,"dropdown-menu","dropdown-menu-right"],["role","menuitem",4,"ngIf"],["class","divider",4,"ngIf"],["role","menuitem"],[3,"click"],[1,"fas","fa-sync-alt"],[1,"text-small","text-uppercase"],["btnRadioGroup","","role","group",1,"btn-group","pageSizeButtons",3,"ngModel","ngModelChange"],["type","button","class","btn btn-default btn-sm",3,"btnRadio","click",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-default","btn-sm",3,"btnRadio","click"],[1,"divider"],[3,"ngClass"],["class","sort-link","href","javascript:void(0)",3,"click",4,"ngIf"],[3,"innerHtml",4,"ngIf"],["href","javascript:void(0)",1,"sort-link",3,"click"],[3,"innerHtml"],[3,"class",4,"ngIf"],[4,"ngFor","ngForOf"],["multiphp-mgr-user-domain","",1,"data-row",3,"id","rowData","rowSelectionChanged","rowPhpVersionChanged","inheritStateChanged"],["class","expand-panel-data",3,"id",4,"ngIf"],["class","empty-row",3,"id",4,"ngIf"],[1,"expand-panel-data",3,"id"],["multiphp-mgr-user-domain-details","",3,"rowData","inheritStateChanged","rowPhpVersionChanged","confirmInheritStateChanged","cancelInheritStateChange"],[1,"empty-row",3,"id"],["calloutCss","rowCalloutCss",3,"rowData","confirmInheritStateChanged","cancelInheritStateChange"],["id","emptyListRow",1,"info","empty-row"],["id","emptySearchRow",1,"info","empty-row"],["id","loadingRow",1,"info","empty-row"],[1,"fas","fa-spinner","fa-spin"],[1,"loading-text"],[1,"pagination-container","pull-right","flip"],["firstText","\u2039\u2039","lastText","\u203a\u203a","previousText","\u2039","nextText","\u203a","id","user-domain-pagination-bottom",3,"boundaryLinks","ngModel","totalItems","maxSize","itemsPerPage","ngModelChange","pageChanged"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,Kt,5,1,"div",1),t.YNc(2,Pe,37,21,"div",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",n.showFailureMessageOnLoad),t.xp6(1),t.Q6J("ngIf",!n.showFailureMessageOnLoad))},styles:["html[dir=ltr][_ngcontent-%COMP%]   .domain-column-header[_ngcontent-%COMP%], [dir=ltr][_ngcontent-%COMP%]   .domain-column-header[_ngcontent-%COMP%], [dir=ltr][_nghost-%COMP%]   .domain-column-header[_ngcontent-%COMP%], html[dir=ltr][_nghost-%COMP%]   .domain-column-header[_ngcontent-%COMP%], html[dir=ltr]   [_nghost-%COMP%]   .domain-column-header[_ngcontent-%COMP%], [dir=ltr][_nghost-%COMP%]   .domain-column-header[_ngcontent-%COMP%], [dir=ltr]   [_nghost-%COMP%]   .domain-column-header[_ngcontent-%COMP%]{padding-left:44px}html[dir=rtl][_ngcontent-%COMP%]   .domain-column-header[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .domain-column-header[_ngcontent-%COMP%], [dir=rtl][_nghost-%COMP%]   .domain-column-header[_ngcontent-%COMP%], html[dir=rtl][_nghost-%COMP%]   .domain-column-header[_ngcontent-%COMP%], html[dir=rtl]   [_nghost-%COMP%]   .domain-column-header[_ngcontent-%COMP%], [dir=rtl][_nghost-%COMP%]   .domain-column-header[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .domain-column-header[_ngcontent-%COMP%]{padding-right:44px}.actionButton[_ngcontent-%COMP%]{text-align:center}.processing-spinner[_ngcontent-%COMP%]{padding:0 5px}.padding-bottom-20[_ngcontent-%COMP%]{padding-bottom:20px}"]}),i})(),it=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["multiphp-mgr-domain-settings"]],decls:1,vars:0,template:function(e,n){1&e&&t._UZ(0,"multiphp-mgr-domain-list")},directives:[V],styles:[""]}),i})();var B=m(835),f=(()=>{return(i=f||(f={}))[i.system=0]="system",i[i.domain=1]="domain",f;var i})(),l=(()=>{return(i=l||(l={})).maxRequests="pm_max_requests",i.maxChildren="pm_max_children",i.processIdleTimeout="pm_process_idle_timeout",i.allowUrlFopen="allow_url_fopen",i.logErrors="log_errors",i.shortOpenTag="short_open_tag",i.docroot="doc_root",i.errorLog="error_log",i.disableFunctions="disable_functions",i.errorReporting="error_reporting",l;var i})();class Ce{constructor(s=f.system,e="",n=0,o=0,r=0,p={value:!1,canOverride:!1},u={value:!1,canOverride:!1},x={value:!1,canOverride:!1},T={value:"",canOverride:!1,helpText:""},I={value:"",canOverride:!1,helpText:""},Z={value:[],canOverride:!1},Pn={value:"",canOverride:!1}){this.type=s,this.domain=e,this.maxRequests=n,this.maxChildren=o,this.processIdleTimeout=r,this.allowUrlFopen=p,this.shortOpenTag=u,this.logErrors=x,this.errorLog=T,this.docroot=I,this.disableFunctions=Z,this.errorReporting=Pn}}let xe=(()=>{class i{constructor(e,n){this.apiClient=e,this.phpVersionService=n}getSystemPhpFpmSettings(){return this.getPhpFpmSettings("").pipe((0,S.U)(e=>{if(e.success){const n=this._buildPhpFpmSettingsModel(f.system,this._parsePhpFpmData(f.system,e.data.config,""));e.data=n}return e}))}getDomainPhpFpmSettings(e){return this.getPhpFpmSettings(e.vhost).pipe((0,S.U)(n=>{if(n.success){const o=this._buildPhpFpmSettingsModel(f.domain,this._parsePhpFpmData(f.domain,n.data.config,e.vhost),e);n.data=o}return n}))}getPhpFpmSettings(e){const n={method:"php_fpm_config_get",arguments:[new P.h("domain",e)],config:{json:!0}},o=new c.r(c.N.JsonApi,n);return this.apiClient.post(o)}updatePhpFpmSettings(e){return this.callFpmConfigApi(e,!1)}validatePhpFpmSettings(e){return this.callFpmConfigApi(e,!0)}callFpmConfigApi(e,n){const o=new c.r(c.N.JsonApi,{method:"php_fpm_config_set",arguments:[new P.h("domain",e.domain),new P.h("validate_only",n),new P.h("config",this._encodePhpFpmConfig(e))],config:{json:!0}});return this.apiClient.post(o)}_encodePhpFpmConfig(e){const n=[];return n.push(this._encodePoolOption(l.maxRequests,e.maxRequests)),n.push(this._encodePoolOption(l.maxChildren,e.maxChildren)),n.push(this._encodePoolOption(l.processIdleTimeout,e.processIdleTimeout)),n.push(this._encodePoolOption(l.allowUrlFopen,e.allowUrlFopen)),n.push(this._encodePoolOption(l.logErrors,e.logErrors)),n.push(this._encodePoolOption(l.shortOpenTag,e.shortOpenTag)),n.push(this._encodePoolOption(l.docroot,e.docroot)),n.push(this._encodePoolOption(l.errorLog,e.errorLog)),n.push(this._encodePoolOption(l.disableFunctions,e.disableFunctions)),n.push(this._encodePoolOption(l.errorReporting,e.errorReporting)),n}_encodePoolOption(e,n){const o={};switch(o.base_flag_name=e,e){case l.maxRequests:case l.maxChildren:case l.processIdleTimeout:o.value=n,o.trinary_admin_value=0;break;case l.allowUrlFopen:case l.logErrors:case l.shortOpenTag:const r=n;o.value=r.value?"on":"off",o.trinary_admin_value=this._encodeTrinaryAdminValue(r.canOverride);break;case l.docroot:const p=n;o.value=p.value,o.trinary_admin_value=this._encodeTrinaryAdminValue(p.canOverride);break;case l.errorLog:const u=n,x="[% homedir %]/logs",T="[% scrubbed_domain %].php.error.log";o.value=""===u.value?`${x}/${T}`:`${x}/${u.value}`,o.trinary_admin_value=this._encodeTrinaryAdminValue(u.canOverride);break;case l.disableFunctions:const I=n.value?n:{value:[],canOverride:!1};o.value=I.value.join(","),o.trinary_admin_value=this._encodeTrinaryAdminValue(I.canOverride);break;case l.errorReporting:const Z=n;o.value=Z.value,o.trinary_admin_value=this._encodeTrinaryAdminValue(Z.canOverride)}return o}_encodeTrinaryAdminValue(e){let n=0;return n=e?1:2,n}_parsePhpFpmData(e,n,o){const r={};return n.forEach(p=>{r[p.base_flag_name]=this._parseOption(e,p,o)}),r}_parseOption(e,n,o){let r={};if(n.base_flag_name===l.maxChildren||n.base_flag_name===l.processIdleTimeout||n.base_flag_name===l.maxRequests){const p=parseInt(n.value,10);isNaN(p)?console.error(`Invalid number ${n.value} is returned for ${n.base_flag_name}.`):r={value:p}}else if(n.base_flag_name===l.allowUrlFopen||n.base_flag_name===l.logErrors||n.base_flag_name===l.shortOpenTag){let p=!1;"on"===n.value?p=!0:"off"===n.value?p=!1:console.error(`Invalid value \u2018${n.value}\u2019 is returned for \u2018${n.base_flag_name}\u2019.`),r={value:p,admin:this._convertTrinaryAdminValueToBinary(n.trinary_admin_value)}}else if(n.base_flag_name===l.docroot)e===f.domain&&(r={value:n.value,admin:this._convertTrinaryAdminValueToBinary(n.trinary_admin_value)});else if(n.base_flag_name===l.errorLog){if(e===f.domain){let p=n.value;if("string"!=typeof p)p="";else{const u=o.replace(/\./,"_");p=p.replace(/^\[% homedir %\]\/logs\//,""),p=p.replace(/^\[% scrubbed_domain %\]/,u)}r={value:p,admin:this._convertTrinaryAdminValueToBinary(n.trinary_admin_value)}}}else if(n.base_flag_name===l.disableFunctions){const p=n.value;let u=[];"string"==typeof p&&""!==p&&(u=p.split(",").map(x=>x.trim()),r={value:u,admin:this._convertTrinaryAdminValueToBinary(n.trinary_admin_value)})}else n.base_flag_name===l.errorReporting&&(r={value:n.value,admin:this._convertTrinaryAdminValueToBinary(n.trinary_admin_value)});return r}_convertTrinaryAdminValueToBinary(e){let n=!1;return 1===e?n=!0:2===e&&(n=!1),n}_buildPhpFpmSettingsModel(e,n,o){const r=new Ce(e);return r.maxRequests=n[l.maxRequests]?n[l.maxRequests].value:0,r.maxChildren=n[l.maxChildren]?n[l.maxChildren].value:0,r.processIdleTimeout=n[l.processIdleTimeout]?n[l.processIdleTimeout].value:0,n[l.allowUrlFopen]&&(r.allowUrlFopen.value=n[l.allowUrlFopen].value,r.allowUrlFopen.canOverride=n[l.allowUrlFopen].admin),n[l.logErrors]&&(r.logErrors.value=n[l.logErrors].value,r.logErrors.canOverride=n[l.logErrors].admin),n[l.shortOpenTag]&&(r.shortOpenTag.value=n[l.shortOpenTag].value,r.shortOpenTag.canOverride=n[l.shortOpenTag].admin),n[l.disableFunctions]&&(r.disableFunctions.value=n[l.disableFunctions].value,r.disableFunctions.canOverride=n[l.disableFunctions].admin),n[l.errorReporting]&&(r.errorReporting.value=n[l.errorReporting].value,r.errorReporting.canOverride=n[l.errorReporting].admin),e===f.domain&&(r.domain=o.vhost,n[l.errorLog]&&(r.errorLog.value=n[l.errorLog].value,r.errorLog.canOverride=n[l.errorLog].admin,r.errorLog.helpText=`${o.homeDirectory}/logs`),n[l.docroot]&&(r.docroot.value=n[l.docroot].value,r.docroot.canOverride=n[l.docroot].admin)),r}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(D.A4),t.LFG(b))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Me=[[["","form-field-label",""]],[["","form-field-control",""]],[["","form-field-validator",""]]],be=["[form-field-label]","[form-field-control]","[form-field-validator]"];let ve=(()=>{class i{constructor(){this.showAllHelp=!1}ngOnInit(){this.id=`formField_${this.for}`,this.labelID=`${this.id}_formLabel`}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["multiphp-mgr-form-field"]],inputs:{for:"for",label:"label",showAllHelp:"showAllHelp"},ngContentSelectors:be,decls:11,vars:5,consts:[[1,"form-group"],[1,"row"],[1,"col-xs-12"],[3,"id","for","labelText","showInfoBlock"]],template:function(e,n){1&e&&(t.F$t(Me),t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"cp-form-label",3),t.Hsn(4),t.qZA()()(),t.TgZ(5,"div",1)(6,"div",2),t.Hsn(7,1),t.qZA()(),t.TgZ(8,"div",1)(9,"div",2),t.Hsn(10,2),t.qZA()()()),2&e&&(t.uIk("id",n.id),t.xp6(3),t.Q6J("id",n.labelID)("for",n.for)("labelText",n.label)("showInfoBlock",n.showAllHelp))},directives:[a._P],styles:[""]}),i})(),ot=(()=>{class i{constructor(e){this.locale=e}performRangeValidation(e,n,o){let r=null;return r={invalid:!1,message:"error"},n<=e&&e<=o?null:{invalid:!0,message:this.locale.maketext("The input must be a number between \u201c[_1]\u201d and \u201c[_2]\u201d.",n,o)}}performErrorReportingValidation(e){return/^[0-9a-z_\|~\!\^&\s]*$/i.test(e)?null:{invalid:!0,message:this.locale.maketext("The input must be an integer or a combination of [output,url,_1,named constants,target,blank] using these bitwise operators: [list_and,_2].","https://go.cpanel.net/php-ini-errorfunc",["|","~","!","^","&"])}}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(C.g))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),we=(()=>{class i{constructor(e){this.validatorHelper=e}validate(e){const n=this.rangeValidator(e,this.rangeMin,this.rangeMax);return n?{range:{message:n.message}}:null}rangeValidator(e,n,o){return""===e.value||null===e.value?null:this.validatorHelper.performRangeValidation(e.value,n,o)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(ot))},i.\u0275dir=t.lG2({type:i,selectors:[["","multiphpMgrRangeValidator",""]],inputs:{rangeMin:"rangeMin",rangeMax:"rangeMax"},features:[t._Bn([{provide:d.Cf,useExisting:i,multi:!0}])]}),i})(),Oe=(()=>{class i{validate(e){return d.kI.required(e)?{required:{message:this.message}}:null}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=t.lG2({type:i,selectors:[["","multiphpMgrRequireValidator",""]],inputs:{message:["multiphpMgrRequireValidator","message"]},features:[t._Bn([{provide:d.Cf,useExisting:i,multi:!0}])]}),i})();var z=m(1765);let Se=(()=>{class i{constructor(e){this.validatorHelper=e}validate(e){const n=this.errorReportingValidator(e);return n?{errorReporting:{message:n.message}}:null}errorReportingValidator(e){return""===e.value?null:this.validatorHelper.performErrorReportingValidation(e.value)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(ot))},i.\u0275dir=t.lG2({type:i,selectors:[["","multiphpMgrErrorReportingValidator",""]],features:[t._Bn([{provide:d.Cf,useExisting:i,multi:!0}])]}),i})();const ke=["settingsForm"];function Fe(i,s){if(1&i&&(t.TgZ(0,"div",3)(1,"div",4)(2,"cp-callout",5),t._UZ(3,"span",6),t.qZA()()()),2&i){const e=t.oxw();t.xp6(3),t.Q6J("innerHTML",e.failureMessage,t.oJD)}}function Te(i,s){if(1&i&&t._UZ(0,"span",10),2&i){const e=t.oxw(2);t.Q6J("innerHtml",e.locale.maketext("Loading [asis,PHP-FPM] settings for \u201c[_1]\u201d \u2026",e.currentDomainName),t.oJD)}}function De(i,s){if(1&i&&(t.TgZ(0,"div",7)(1,"div",4),t.YNc(2,Te,1,1,"ng-template",null,8,t.W1O),t._UZ(4,"cp-loading-spinner",9),t.qZA()()),2&i){const e=t.MAs(3);t.xp6(4),t.Q6J("loadingTemplate",e)}}function ye(i,s){if(1&i&&(t.TgZ(0,"span",93),t._UZ(1,"span",10),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("innerHtml",e.allowOverrideHelpTextForPhpFlag,t.oJD)}}function Ie(i,s){if(1&i&&(t.TgZ(0,"span",94),t._UZ(1,"span",10),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("innerHtml",e.allowOverrideHelpTextForPhpFlag,t.oJD)}}function Ze(i,s){if(1&i&&(t.TgZ(0,"span",93),t._UZ(1,"span",10),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("innerHtml",e.allowOverrideHelpTextForPhpFlag,t.oJD)}}function He(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"section")(1,"multiphp-mgr-form-field",95)(2,"div",67)(3,"div",42),t._UZ(4,"span",96)(5,"span",97),t.qZA()(),t.TgZ(6,"div",26)(7,"div",42)(8,"input",98),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw(2).fpmSettingsModel.errorLog.value=o}),t.qZA(),t._UZ(9,"span",99),t.qZA(),t.TgZ(10,"div",50)(11,"label",100)(12,"input",101),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw(2).fpmSettingsModel.errorLog.canOverride=o}),t.qZA(),t._UZ(13,"span",53),t.qZA()()(),t.TgZ(14,"div",30),t._UZ(15,"cp-validation-container",102),t.qZA()()()}if(2&i){t.oxw();const e=t.MAs(4),n=t.oxw();t.xp6(1),t.Q6J("showAllHelp",n.showAllHelp)("label",n.locale.maketext("Error Log")),t.xp6(3),t.Q6J("innerHtml",n.locale.maketext("Name of the file where script errors should be logged."),t.oJD),t.xp6(1),t.Q6J("innerHtml",n.allowOverrideHelpTextForPhpValue,t.oJD),t.xp6(3),t.s9C("placeholder",n.locale.maketext("path/to/error_log/file [comment,example file path]")),t.Q6J("ngModel",n.fpmSettingsModel.errorLog.value),t.xp6(1),t.Q6J("innerHtml",n.locale.maketext("Path relative to: [_1]",n.fpmSettingsModel.errorLog.helpText),t.oJD),t.xp6(3),t.Q6J("ngModel",n.fpmSettingsModel.errorLog.canOverride),t.xp6(1),t.Q6J("innerHtml",n.locale.maketext("Block domain from changing the setting[comment,checkbox label text]"),t.oJD),t.xp6(2),t.Q6J("control",e.controls.errorLog)}}function Ae(i,s){if(1&i&&(t._UZ(0,"span",10),t._uU(1)),2&i){const e=s.searchTerm,n=t.oxw(2);t.Q6J("innerHtml",n.locale.maketext("[output,strong,Add to the list]:"),t.oJD),t.xp6(1),t.hij("",e," ")}}function Je(i,s){if(1&i&&(t.TgZ(0,"li")(1,"a",103),t._UZ(2,"i",104),t._uU(3),t.qZA()()),2&i){const e=s.$implicit;t.xp6(1),t.MGl("id","additionalResource-",e.id,""),t.Q6J("href",e.link,t.LSH),t.xp6(2),t.hij(" ",e.text," ")}}const Ve=function(i,s){return{"fa-arrow-left":i,"fa-arrow-right":s}};function Le(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"section",11)(1,"div",12)(2,"div",13)(3,"form",null,14)(5,"div",15)(6,"div",16),t._UZ(7,"div",17),t.TgZ(8,"div",18)(9,"button",19),t.NdJ("click",function(){return t.CHM(e),t.oxw().toggleHelp()}),t._uU(10),t._UZ(11,"i",20),t.qZA()(),t._UZ(12,"div",21),t.qZA(),t.TgZ(13,"div",22)(14,"h4",23),t._uU(15),t.qZA(),t.TgZ(16,"multiphp-mgr-form-field",24)(17,"div",25),t._uU(18),t.qZA(),t.TgZ(19,"div",26)(20,"div",27)(21,"input",28),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().fpmSettingsModel.maxRequests=o}),t.qZA(),t._UZ(22,"span",29),t.qZA()(),t.TgZ(23,"div",30),t._UZ(24,"cp-validation-container",31),t.qZA()(),t.TgZ(25,"multiphp-mgr-form-field",32)(26,"div",25),t._uU(27),t.qZA(),t.TgZ(28,"div",26)(29,"div",27)(30,"input",33),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().fpmSettingsModel.maxChildren=o}),t.qZA(),t._UZ(31,"span",34),t.qZA()(),t.TgZ(32,"div",30),t._UZ(33,"cp-validation-container",35),t.qZA()(),t.TgZ(34,"multiphp-mgr-form-field",36)(35,"div",25),t._uU(36),t.qZA(),t.TgZ(37,"div",26)(38,"div",27)(39,"input",37),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().fpmSettingsModel.processIdleTimeout=o}),t.qZA(),t._UZ(40,"span",38),t.qZA()(),t.TgZ(41,"div",30),t._UZ(42,"cp-validation-container",39),t.qZA()(),t.TgZ(43,"h4",23),t._uU(44),t.qZA(),t.TgZ(45,"div",40)(46,"div",12)(47,"div",4)(48,"div",41)(49,"div",42)(50,"label",43)(51,"input",44),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().fpmSettingsModel.allowUrlFopen.value=o}),t.qZA(),t._UZ(52,"span",45),t.TgZ(53,"a",46),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return o.toggleIniFlagInfoBlock(o.phpFpmPoolParams.Allow_Url_Fopen)}),t._UZ(54,"span",47)(55,"span",48),t.qZA()(),t.YNc(56,ye,2,1,"span",49),t.qZA(),t.TgZ(57,"div",50)(58,"label",51)(59,"input",52),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().fpmSettingsModel.allowUrlFopen.canOverride=o}),t.qZA(),t._UZ(60,"span",53),t.qZA()()(),t.TgZ(61,"div",41)(62,"div",42)(63,"label",54)(64,"input",55),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().fpmSettingsModel.logErrors.value=o}),t.qZA(),t._UZ(65,"span",45),t.TgZ(66,"a",56),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return o.toggleIniFlagInfoBlock(o.phpFpmPoolParams.Log_Errors)}),t._UZ(67,"span",47)(68,"span",48),t.qZA()(),t.YNc(69,Ie,2,1,"span",57),t.qZA(),t.TgZ(70,"div",50)(71,"label",58)(72,"input",59),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().fpmSettingsModel.logErrors.canOverride=o}),t.qZA(),t._UZ(73,"span",53),t.qZA()()(),t.TgZ(74,"div",41)(75,"div",42)(76,"label",60)(77,"input",61),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().fpmSettingsModel.shortOpenTag.value=o}),t.qZA(),t._UZ(78,"span",45),t.TgZ(79,"a",62),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return o.toggleIniFlagInfoBlock(o.phpFpmPoolParams.Short_Open_Tag)}),t._UZ(80,"span",47)(81,"span",48),t.qZA()(),t.YNc(82,Ze,2,1,"span",49),t.qZA(),t.TgZ(83,"div",50)(84,"label",63)(85,"input",64),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().fpmSettingsModel.shortOpenTag.canOverride=o}),t.qZA(),t._UZ(86,"span",53),t.qZA()()()()(),t.YNc(87,He,16,10,"section",65),t.TgZ(88,"multiphp-mgr-form-field",66)(89,"div",67)(90,"div",42),t._UZ(91,"span",68)(92,"span",69),t.qZA()(),t.TgZ(93,"div",26)(94,"div",42)(95,"ng-select",70),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().selectedFunctionsToDisable=o})("add",function(){return t.CHM(e),t.oxw().updateDisableFunctionsInFpmSettingsModel()})("remove",function(){return t.CHM(e),t.oxw().updateDisableFunctionsInFpmSettingsModel()}),t.YNc(96,Ae,2,2,"ng-template",71),t.qZA()(),t.TgZ(97,"div",50)(98,"label",72)(99,"input",73),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().fpmSettingsModel.disableFunctions.canOverride=o}),t.qZA(),t._UZ(100,"span",53),t.qZA()()(),t.TgZ(101,"div",30),t._UZ(102,"cp-validation-container",74),t.qZA()(),t.TgZ(103,"multiphp-mgr-form-field",75)(104,"div",67)(105,"div",42),t._UZ(106,"span",76)(107,"span",77),t.qZA()(),t.TgZ(108,"div",26)(109,"div",42)(110,"input",78),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().fpmSettingsModel.errorReporting.value=o}),t.qZA(),t._UZ(111,"span",79),t.qZA(),t.TgZ(112,"div",50)(113,"label",80)(114,"input",81),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().fpmSettingsModel.errorReporting.canOverride=o}),t.qZA(),t._UZ(115,"span",53),t.qZA()()(),t.TgZ(116,"div",30),t._UZ(117,"cp-validation-container",82),t.qZA()()()(),t.TgZ(118,"div",83)(119,"div",12)(120,"div",13)(121,"cp-action-button",84),t.NdJ("click",function(){return t.CHM(e),t.oxw().submitForm()}),t._uU(122),t.qZA(),t.TgZ(123,"cp-action-button",85),t.NdJ("click",function(){return t.CHM(e),t.oxw().validateFpmSettings()}),t._uU(124),t.qZA(),t.TgZ(125,"button",86),t.NdJ("click",function(){return t.CHM(e),t.oxw().resetSettings()}),t._uU(126),t.qZA()(),t.TgZ(127,"div",87)(128,"button",88),t.NdJ("click",function(){return t.CHM(e),t.oxw().goBackClicked()}),t._UZ(129,"i",89)(130,"span",10),t.qZA()()()()()()(),t.TgZ(131,"div",87)(132,"section",90)(133,"h3",91),t._uU(134),t.qZA(),t.TgZ(135,"ul"),t.YNc(136,Je,4,3,"li",92),t.qZA()()()()()}if(2&i){const e=t.MAs(4),n=t.oxw();t.xp6(7),t.Q6J("innerHtml",n.settingsTitle,t.oJD),t.xp6(3),t.hij(" ",n.toggleHelpLabel," "),t.xp6(5),t.hij(" ",n.locale.maketext("[asis,PHP-FPM] Pool options")," "),t.xp6(1),t.Q6J("showAllHelp",n.showAllHelp)("label",n.locale.maketext("Max Requests")),t.xp6(2),t.hij(" ",n.locale.maketext("Controls how many requests are served by a process (Max Children) before killing and spawning a new process.")," "),t.xp6(3),t.s9C("placeholder",n.locale.maketext("Max Requests")),t.Q6J("ngModel",n.fpmSettingsModel.maxRequests)("multiphpMgrRequireValidator",n.locale.maketext("The input must be a positive integer between \u201c[_1]\u201d and \u201c[_2]\u201d.","1","10000000"))("rangeMin",1)("rangeMax",1e7),t.xp6(1),t.Q6J("innerHtml",n.locale.maketext("[asis,cPanel] Default: [output,class,_1,defaultValue]",20),t.oJD),t.xp6(2),t.Q6J("control",e.controls.maxRequests),t.xp6(1),t.Q6J("showAllHelp",n.showAllHelp)("label",n.locale.maketext("Max Children")),t.xp6(2),t.hij(" ",n.locale.maketext("The number of [asis,PHP-FPM] processes to spawn to process [asis,PHP] code for web server requests.")," "),t.xp6(3),t.s9C("placeholder",n.locale.maketext("Max Children")),t.Q6J("ngModel",n.fpmSettingsModel.maxChildren)("multiphpMgrRequireValidator",n.locale.maketext("The input must be a positive integer between \u201c[_1]\u201d and \u201c[_2]\u201d.","1","10000"))("rangeMin",1)("rangeMax",1e4),t.xp6(1),t.Q6J("innerHtml",n.locale.maketext("[asis,cPanel] Default: [output,class,_1,defaultValue]",5),t.oJD),t.xp6(2),t.Q6J("control",e.controls.maxChildren),t.xp6(1),t.Q6J("showAllHelp",n.showAllHelp)("label",n.locale.maketext("Process Idle Timeout")),t.xp6(2),t.hij(" ",n.locale.maketext("The number of seconds after which an idle process is set to be killed so it releases CPU time and RAM.")," "),t.xp6(3),t.s9C("placeholder",n.locale.maketext("Process Idle Timeout")),t.Q6J("ngModel",n.fpmSettingsModel.processIdleTimeout)("multiphpMgrRequireValidator",n.locale.maketext("The input must be a positive integer between \u201c[_1]\u201d and \u201c[_2]\u201d.","1","10000000"))("rangeMin",1)("rangeMax",1e7),t.xp6(1),t.Q6J("innerHtml",n.locale.maketext("[asis,cPanel] Default: [output,class,_1,defaultValue]",10),t.oJD),t.xp6(2),t.Q6J("control",e.controls.processIdleTimeout),t.xp6(2),t.hij(" ",n.locale.maketext("[asis,PHP-FPM] [asis,INI] Settings")," "),t.xp6(7),t.Q6J("ngModel",n.fpmSettingsModel.allowUrlFopen.value),t.xp6(1),t.Q6J("innerHtml",n.locale.maketext("Treat URLs as files ([asis,allow_url_fopen])[comment,checkbox label text]"),t.oJD),t.xp6(1),t.uIk("title",n.toggleActionTitle),t.xp6(2),t.Q6J("innerHtml",n.toggleActionTitle,t.oJD),t.xp6(1),t.Q6J("ngIf",n.helpBlocksForIniFlags[n.phpFpmPoolParams.Allow_Url_Fopen]),t.xp6(3),t.Q6J("ngModel",n.fpmSettingsModel.allowUrlFopen.canOverride),t.xp6(1),t.Q6J("innerHtml",n.locale.maketext("Block domain from changing the setting[comment,checkbox label text]"),t.oJD),t.xp6(4),t.Q6J("ngModel",n.fpmSettingsModel.logErrors.value),t.xp6(1),t.Q6J("innerHtml",n.locale.maketext("Log errors ([asis,log_errors])[comment,checkbox label text]"),t.oJD),t.xp6(1),t.uIk("title",n.toggleActionTitle),t.xp6(2),t.Q6J("innerHtml",n.toggleActionTitle,t.oJD),t.xp6(1),t.Q6J("ngIf",n.helpBlocksForIniFlags[n.phpFpmPoolParams.Log_Errors]),t.xp6(3),t.Q6J("ngModel",n.fpmSettingsModel.logErrors.canOverride),t.xp6(1),t.Q6J("innerHtml",n.locale.maketext("Block domain from changing the setting[comment,checkbox label text]"),t.oJD),t.xp6(4),t.Q6J("ngModel",n.fpmSettingsModel.shortOpenTag.value),t.xp6(1),t.Q6J("innerHtml",n.locale.maketext("Recognize code between tags as PHP source ([asis,short_open_tag])[comment,checkbox label text]"),t.oJD),t.xp6(1),t.uIk("title",n.toggleActionTitle),t.xp6(2),t.Q6J("innerHtml",n.toggleActionTitle,t.oJD),t.xp6(1),t.Q6J("ngIf",n.helpBlocksForIniFlags[n.phpFpmPoolParams.Short_Open_Tag]),t.xp6(3),t.Q6J("ngModel",n.fpmSettingsModel.shortOpenTag.canOverride),t.xp6(1),t.Q6J("innerHtml",n.locale.maketext("Block domain from changing the setting[comment,checkbox label text]"),t.oJD),t.xp6(1),t.Q6J("ngIf",n.showDomainSettings),t.xp6(1),t.Q6J("showAllHelp",n.showAllHelp)("label",n.locale.maketext("Disable Functions")),t.xp6(3),t.Q6J("innerHtml",n.locale.maketext("Enter [asis,PHP] functions you intend to disable when [asis,PHP-FPM] is running."),t.oJD),t.xp6(1),t.Q6J("innerHtml",n.allowOverrideHelpTextForPhpValue,t.oJD),t.xp6(3),t.s9C("loadingText",n.locale.maketext("Validating \u2026")),t.Q6J("items",n.fpmSettingsModel.disableFunctions.value)("ngModel",n.selectedFunctionsToDisable)("addTag",n.addDisableFunctionRef)("loading",n.addingDisableFunction)("clearable",!1),t.xp6(4),t.Q6J("ngModel",n.fpmSettingsModel.disableFunctions.canOverride),t.xp6(1),t.Q6J("innerHtml",n.locale.maketext("Block domain from changing the setting[comment,checkbox label text]"),t.oJD),t.xp6(2),t.Q6J("control",e.controls.disableFunctions),t.xp6(1),t.Q6J("showAllHelp",n.showAllHelp)("label",n.locale.maketext("Error Reporting")),t.xp6(3),t.Q6J("innerHtml",n.locale.maketext("Error reporting can either be an integer representing a bit field, or named constants. [output,url,_1,Learn more,target,blank].","https://go.cpanel.net/php-ini-errorfunc"),t.oJD),t.xp6(1),t.Q6J("innerHtml",n.allowOverrideHelpTextForPhpValue,t.oJD),t.xp6(3),t.s9C("placeholder",n.locale.maketext("Integer or bit field")),t.Q6J("ngModel",n.fpmSettingsModel.errorReporting.value),t.xp6(1),t.Q6J("innerHtml",n.locale.maketext("Example: [output,class,_1,defaultValue]","E_ALL & ~E_NOTICE"),t.oJD),t.xp6(3),t.Q6J("ngModel",n.fpmSettingsModel.errorReporting.canOverride),t.xp6(1),t.Q6J("innerHtml",n.locale.maketext("Block domain from changing the setting[comment,checkbox label text]"),t.oJD),t.xp6(2),t.Q6J("control",e.controls.errorReporting),t.xp6(4),t.s9C("title",n.locale.maketext("Click here to update [asis,PHP-FPM] settings.")),t.Q6J("buttonClass",n.fpmSettingsUpdateButton.buttonClass)("buttonState",n.updateButtonDisabled),t.xp6(1),t.hij(" ",n.locale.maketext("Update")," "),t.xp6(1),t.s9C("title",n.locale.maketext("Click here to validate if changed [asis,PHP-FPM] settings are valid.")),t.Q6J("buttonClass",n.fpmSettingsValidateButton.buttonClass)("buttonState",n.fpmSettingsValidateButton.buttonState),t.xp6(1),t.hij(" ",n.locale.maketext("Validate Settings")," "),t.xp6(1),t.s9C("title",n.locale.maketext("Reset changes back to previously saved settings.")),t.xp6(1),t.hij(" ",n.locale.maketext("Reset Settings")," "),t.xp6(2),t.Q6J("title",n.goBackLinkText),t.xp6(1),t.Q6J("ngClass",t.WLB(94,Ve,!n.isRTL,n.isRTL)),t.xp6(1),t.Q6J("innerHtml",n.goBackLinkText,t.oJD),t.xp6(4),t.hij(" ",n.locale.maketext("Need Help?")," "),t.xp6(2),t.Q6J("ngForOf",n.additionalResourceList)}}let G=(()=>{class i{constructor(e,n,o,r,p,u){this._activeRoute=e,this.locale=n,this.phpHelper=o,this.phpFpmService=r,this.alertService=p,this.domainPhpService=u,this.showAllHelp=!1,this.loadingData=!0,this.failureOccurred=!1,this.failureMessage="",this.fpmSettingsUpdateButton={buttonClass:"btn btn-sm btn-primary button-bar",buttonState:a.FP.disabled},this.fpmSettingsValidateButton={buttonClass:"btn btn-sm btn-default button-bar",buttonState:a.FP.enabled},this.helpBlocksForIniFlags={},this.addingDisableFunction=!1,this.addDisableFunctionRef=this.addDisableFunction.bind(this),this.helpBlocksForIniFlags[l.allowUrlFopen]=!1,this.helpBlocksForIniFlags[l.logErrors]=!1,this.helpBlocksForIniFlags[l.shortOpenTag]=!1}get phpFpmPoolParams(){return l}get manageFpmSettingsForm(){return this._manageFpmSettingsForm}get toggleHelpLabel(){return this.locale.maketext(this.showAllHelp?"Hide Help Text":"Show Help Text")}get currentDomainName(){return this.type===f.domain?this._currentDomain:"System"}get goBackLinkText(){return this.locale.maketext(this.type===f.domain?"Go back to user domain settings[comment,link text]":"Go back to system settings[comment,link text]")}get additionalResourceList(){return[{id:"phpFpmConfig",text:this.locale.maketext("Official [asis,PHP-FPM] Configuration Documentation"),link:"https://go.cpanel.net/php-fpm-config"},{id:"bottleneck-child-processes",text:this.locale.maketext("Bottleneck with Child Processes"),link:"https://go.cpanel.net/ApachevsPHP-FPMBottleneckwithChildProcesses"},{id:"error-reporting-docs",text:this.locale.maketext("More documentation on error reporting"),link:"https://go.cpanel.net/php-ini-errorfunc"}]}get showLoadingMessage(){return this.loadingData&&!this.failureOccurred}get showContent(){return!this.loadingData&&!this.failureOccurred}get showFailureMessageOnLoad(){return!this.loadingData&&this.failureOccurred}get showDomainSettings(){return this.type===f.domain}get updateButtonDisabled(){return this.fpmSettingsUpdateButton.buttonState!==a.FP.loading&&(this.fpmSettingsUpdateButton.buttonState=this.manageFpmSettingsForm&&this.manageFpmSettingsForm.invalid?a.FP.disabled:a.FP.enabled),this.fpmSettingsUpdateButton.buttonState}get settingsTitle(){return this.type===f.domain?this.locale.maketext("[asis,PHP-FPM] Settings for: [output,class,_1,titleValue]",this._currentDomain):this.locale.maketext("System [asis,PHP-FPM] Settings")}get allowOverrideHelpTextForPhpValue(){return this.locale.maketext("Checking the box \u201cBlock domain from changing the setting\u201d would allow the configuration to use \u201c[_1]\u201d. It uses \u201c[_2]\u201d if unchecked.","php_admin_value","php_value")}get allowOverrideHelpTextForPhpFlag(){return this.locale.maketext("Checking the box \u201cBlock domain from changing the setting\u201d would allow the configuration to use \u201c[_1]\u201d. It uses \u201c[_2]\u201d if unchecked.","php_admin_flag","php_flag")}ngOnInit(){this._fpmSettingsParamSubscription=this._activeRoute.params.subscribe(e=>{this._currentDomain=e.domain,this.type=this._currentDomain&&""!==this._currentDomain?f.domain:f.system,this.loadPhpFpmSettings()})}loadPhpFpmSettings(){this.type===f.domain?this.domainPhpService.getPhpDataForDomain(this._currentDomain).subscribe(e=>{e.success&&(this.currentUserDomain=e.data,this.phpFpmService.getDomainPhpFpmSettings(this.currentUserDomain).subscribe(n=>{n.success?(this.fpmSettingsModel=n.data,this._createFpmSettingsCache(this.fpmSettingsModel),this._updateSelectedFunctionsToDisable(this.fpmSettingsModel.disableFunctions.value)):(this.phpHelper.error(n),this.failureOccurred=!0,this.failureMessage=this.locale.maketext("An error occurred while fetching [asis,PHP-FPM] settings.")),this.loadingData=!1}))}):this.phpFpmService.getSystemPhpFpmSettings().subscribe(e=>{e.success?(this.fpmSettingsModel=e.data,this._createFpmSettingsCache(this.fpmSettingsModel),this._updateSelectedFunctionsToDisable(this.fpmSettingsModel.disableFunctions.value)):(this.phpHelper.error(e),this.failureOccurred=!0,this.failureMessage=this.locale.maketext("An error occurred while fetching [asis,PHP-FPM] settings.")),this.loadingData=!1})}ngOnDestroy(){this._fpmSettingsParamSubscription&&this._fpmSettingsParamSubscription.unsubscribe()}toggleHelp(){this.showAllHelp=!this.showAllHelp,Object.keys(this.helpBlocksForIniFlags).forEach(e=>{this.helpBlocksForIniFlags[e]=this.showAllHelp})}toggleIniFlagInfoBlock(e){this.helpBlocksForIniFlags[e]=!this.helpBlocksForIniFlags[e]}goBackClicked(){this.phpHelper.routeTo(this.type===f.domain?"user":"system")}submitForm(){this.manageFpmSettingsForm.valid&&(this.fpmSettingsUpdateButton.buttonState=a.FP.loading,this.phpFpmService.updatePhpFpmSettings(this.fpmSettingsModel).subscribe(e=>{e.success?(this._createFpmSettingsCache(this.fpmSettingsModel),this.alertService.success(this.locale.maketext("[asis,PHP-FPM] configuration is updated with the new changes."))):this.phpHelper.error(e),this.fpmSettingsUpdateButton.buttonState=a.FP.enabled}))}addDisableFunction(e){return this.addingDisableFunction=!0,new Promise((n,o)=>{this.phpFpmService.validatePhpFpmSettings(this.fpmSettingsModel).subscribe(r=>{r.success?n(e):o(this.locale.maketext("The input must be a valid [asis,PHP] function.")),this.addingDisableFunction=!1})}).catch(n=>{this.manageFpmSettingsForm.controls.disableFunctions.setErrors({disableFuncAsync:{message:n}}),this.manageFpmSettingsForm.controls.disableFunctions.updateValueAndValidity()})}updateDisableFunctionsInFpmSettingsModel(){this.fpmSettingsModel.disableFunctions.value=this.selectedFunctionsToDisable}validateFpmSettings(){this.fpmSettingsValidateButton.buttonState=a.FP.loading,this.phpFpmService.validatePhpFpmSettings(this.fpmSettingsModel).subscribe(e=>{e.success?this.alertService.info(this.locale.maketext("The changed values are valid [asis,PHP-FPM] settings. Click \u201cUpdate\u201d to save the settings.")):this.phpHelper.error(e),this.fpmSettingsValidateButton.buttonState=a.FP.enabled})}resetSettings(){this.fpmSettingsModel=(0,g.cloneDeep)(this.fpmSettingsCache)}_updateSelectedFunctionsToDisable(e){this.selectedFunctionsToDisable=e}_createFpmSettingsCache(e){this.fpmSettingsCache=(0,g.cloneDeep)(e)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(w.gz),t.Y36(C.g),t.Y36(O),t.Y36(xe),t.Y36(a.c9),t.Y36(W))},i.\u0275cmp=t.Xpm({type:i,selectors:[["multiphp-mgr-php-fpm-settings"]],viewQuery:function(e,n){if(1&e&&t.Gf(ke,5),2&e){let o;t.iGM(o=t.CRH())&&(n._manageFpmSettingsForm=o.first)}},inputs:{type:"type"},decls:3,vars:3,consts:[["id","fpm-settings-not-found","class","row",4,"ngIf"],["id","manage-view-loading","class","row",4,"ngIf"],["id","php-fpm-settings-view",4,"ngIf"],["id","fpm-settings-not-found",1,"row"],[1,"col-xs-12"],["id","loadFailureMessage","calloutType","danger"],[1,"unlink-error-pre",3,"innerHTML"],["id","manage-view-loading",1,"row"],["loadingDataTemplate",""],["id","loadingDataLoader",3,"loadingTemplate"],[3,"innerHtml"],["id","php-fpm-settings-view"],[1,"row"],[1,"col-xs-12","col-md-9"],["settingsForm","ngForm"],[1,"panel","panel-default"],[1,"panel-heading"],[1,"widget-title","pull-left","flip",3,"innerHtml"],[1,"pull-right","flip"],["type","button","id","lnkShowHideHelp",1,"btn","btn-default","btn-xs",3,"click"],["aria-hidden","true",1,"far","fa-question-circle","form-info-sign"],[1,"clearfix"],[1,"panel-body"],[1,"create-user-heading"],["for","max-requests",3,"showAllHelp","label"],["form-field-label",""],["form-field-control","",1,"row"],[1,"col-xs-12","col-md-6","col-lg-3"],["id","txt-max-requests","name","maxRequests","type","number","multiphpMgrRangeValidator","","aria-label","max-requests","autocomplete","off",1,"form-control",3,"ngModel","multiphpMgrRequireValidator","rangeMin","rangeMax","placeholder","ngModelChange"],["id","default-max-requests",1,"help-block","defaultBlock",3,"innerHtml"],["form-field-validator",""],["id","max-requests-validation-container",3,"control"],["for","max-children",3,"showAllHelp","label"],["id","txt-max-children","name","maxChildren","type","number","multiphpMgrRangeValidator","","aria-label","max-children","autocomplete","off",1,"form-control",3,"ngModel","multiphpMgrRequireValidator","rangeMin","rangeMax","placeholder","ngModelChange"],["id","default-max-children",1,"help-block","defaultBlock",3,"innerHtml"],["id","max-children-validation-container",3,"control"],["for","process-idle-timeout",3,"showAllHelp","label"],["id","txt-process-idle-timeout","name","processIdleTimeout","type","number","multiphpMgrRangeValidator","","aria-label","process-idle-timeout","autocomplete","off",1,"form-control",3,"ngModel","multiphpMgrRequireValidator","rangeMin","rangeMax","placeholder","ngModelChange"],["id","default-process-idle-timeout",1,"help-block","defaultBlock",3,"innerHtml"],["id","process-idle-timeout-validation-container",3,"control"],[1,"section-body"],[1,"row","form-group"],[1,"col-xs-12","col-md-6","col-lg-7"],["for","chk-allow_url_fopen"],["id","chk-allow_url_fopen","type","checkbox","name","allowUrlFopen",3,"ngModel","ngModelChange"],[1,"checkbox-fpm-settings",3,"innerHtml"],["id","chk-allow_url_fopen-infoIcon","href","javascript:void(0)","aria-label","allow-url-fopen-info",1,"text-primary","form-info-sign",3,"click"],["aria-hidden","true",1,"far","fa-question-circle","text-primary"],[1,"sr-only",3,"innerHtml"],["id","chk-allow_url_fopen-infoBlock","class","info-block",4,"ngIf"],[1,"col-xs-12","col-md-6","col-lg-5"],["for","chk-allow_url_fopen-allow-override"],["id","chk-allow_url_fopen-allow-override","name","allowUrlFopenAllowOverride","type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"checkbox-fpm-settings","checkbox-allow-override",3,"innerHtml"],["for","chk-log_errors"],["id","chk-log_errors","name","logErrors","type","checkbox",3,"ngModel","ngModelChange"],["id","chk-log_errors-infoIcon","href","javascript:void(0)","aria-label","log-errors-info",1,"text-primary","form-info-sign",3,"click"],["id","chk-log_errors-infoBlock","class","info-block",4,"ngIf"],["for","chk-log_errors-allow-override"],["id","chk-log_errors-allow-override","name","logErrorsAllowOverride","type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],["for","chk-short_open_tag"],["id","chk-short_open_tag","name","shortOpenTag","type","checkbox",3,"ngModel","ngModelChange"],["id","chk-short_open-infoIcon","href","javascript:void(0)","aria-label","short-open-info",1,"text-primary","form-info-sign",3,"click"],["for","chk-short_open_tag-allow-override"],["id","chk-short_open_tag-allow-override","name","shortOpenTagAllowOverride","type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],[4,"ngIf"],["for","select-disable_functions",3,"showAllHelp","label"],["form-field-label","",1,"row"],["id","help-text-disable_functions",1,"help-block","defaultBlock",3,"innerHtml"],["id","allow-override-help-text-disable_functions",1,"help-block",3,"innerHtml"],["id","select-disable_functions","multiple","true","name","disableFunctions","aria-label","disable-functions",3,"items","ngModel","addTag","loading","loadingText","clearable","ngModelChange","add","remove"],["ng-tag-tmp",""],["for","chk-disable_functions-allow-override"],["id","chk-disable_functions-allow-override","name","disableFunctionsAllowOverride","type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],["id","disable_functions-validation-container",3,"control"],["for","error-reporting",3,"showAllHelp","label"],["id","help-text-error-reporting",1,"help-block","defaultBlock",3,"innerHtml"],["id","allow-override-help-text-error-reporting",1,"help-block",3,"innerHtml"],["id","txt-error-reporting","name","errorReporting","type","text","aria-label","error-reporting","multiphpMgrErrorReportingValidator","","autocomplete","off",1,"form-control",3,"ngModel","placeholder","ngModelChange"],["id","default-error-reporting",1,"help-block","defaultBlock",3,"innerHtml"],["for","chk-error_reporting-allow-override"],["id","chk-error_reporting-allow-override","name","errorReportingAllowOverride","type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],["id","error-reporting-validation-container",3,"control"],[1,"panel-footer"],["id","btn-update-fpm-settings",3,"buttonClass","buttonState","title","click"],["id","btn-validate-fpm-settings",3,"buttonClass","buttonState","title","click"],["id","btn-reset-fpm-settings","type","button",1,"btn","btn-sm","btn-default","button-bar",3,"title","click"],[1,"col-xs-12","col-md-3"],["id","go-back","type","button",1,"btn","btn-sm","btn-link","pull-right","flip",3,"title","click"],["aria-hidden","true",1,"fas",3,"ngClass"],[1,"widget","no-top-margin"],[1,"widget-title"],[4,"ngFor","ngForOf"],["id","chk-allow_url_fopen-infoBlock",1,"info-block"],["id","chk-log_errors-infoBlock",1,"info-block"],["for","txt-error_log",3,"showAllHelp","label"],["id","help-text-error_log",1,"help-block","defaultBlock",3,"innerHtml"],["id","allow-override-help-text-error_log",1,"help-block",3,"innerHtml"],["id","txt-error_log","name","errorLog","type","text","autocomplete","off",1,"form-control",3,"ngModel","placeholder","ngModelChange"],["id","default-error_log",1,"help-block","defaultBlock",3,"innerHtml"],["for","chk-error_log-allow-override"],["id","chk-error_log-allow-override","name","errorLogAllowOverride","type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],["id","error_log-validation-container",3,"control"],["target","_blank",3,"href","id"],["aria-hidden","true",1,"fas","fa-fw","fa-external-link-alt"]],template:function(e,n){1&e&&(t.YNc(0,Fe,4,1,"div",0),t.YNc(1,De,5,1,"div",1),t.YNc(2,Le,137,97,"section",2)),2&e&&(t.Q6J("ngIf",n.showFailureMessageOnLoad),t.xp6(1),t.Q6J("ngIf",n.showLoadingMessage),t.xp6(1),t.Q6J("ngIf",n.showContent))},directives:[h.O5,a.Oc,a.go,d._Y,d.JL,d.F,ve,d.wV,d.Fj,we,d.JJ,d.On,Oe,a.fm,d.Wl,z.w9,z.Jr,Se,a.xV,h.mk,h.sg],styles:[".defaultBlock[_ngcontent-%COMP%]{font-size:12px}.defaultValue[_ngcontent-%COMP%]{color:#333;font-style:italic}.checkbox-fpm-settings[_ngcontent-%COMP%]{padding:0 10px}.checkbox-allow-override[_ngcontent-%COMP%]{font-weight:400}.form-check-input[_ngcontent-%COMP%]{vertical-align:top}html[dir=ltr][_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%], [dir=ltr][_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%], [dir=ltr][_nghost-%COMP%]   .form-check-input[_ngcontent-%COMP%], html[dir=ltr][_nghost-%COMP%]   .form-check-input[_ngcontent-%COMP%], html[dir=ltr]   [_nghost-%COMP%]   .form-check-input[_ngcontent-%COMP%], [dir=ltr][_nghost-%COMP%]   .form-check-input[_ngcontent-%COMP%], [dir=ltr]   [_nghost-%COMP%]   .form-check-input[_ngcontent-%COMP%]{margin:3px 0 3px 15px}html[dir=rtl][_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%], [dir=rtl][_nghost-%COMP%]   .form-check-input[_ngcontent-%COMP%], html[dir=rtl][_nghost-%COMP%]   .form-check-input[_ngcontent-%COMP%], html[dir=rtl]   [_nghost-%COMP%]   .form-check-input[_ngcontent-%COMP%], [dir=rtl][_nghost-%COMP%]   .form-check-input[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .form-check-input[_ngcontent-%COMP%]{margin:3px 15px 3px 0}"]}),i})();function Ue(i,s){if(1&i&&t._UZ(0,"iframe",5),2&i){const e=t.oxw();t.Q6J("src",e.tailingUrl,t.uOi)}}const qe=[{path:"system",component:et,data:{id:"system",tab:"system"}},{path:"user",component:it,data:{id:"user",tab:"user"}},{path:"system/fpm-settings",component:G,data:{id:"system_fpm_settings",tab:"system"}},{path:"user/fpm-settings/:domain",component:G,data:{id:"user_fpm_settings",tab:"user"}},{path:"php-fpm-conversion/:build",component:(()=>{class i{constructor(e,n,o,r){this.locale=e,this._activeRoute=n,this._windowRef=o,this._sanitizer=r}ngOnInit(){this._routeParamSubscription=this._activeRoute.params.subscribe(e=>{this.buildId=e.build,this.startTailing()})}ngOnDestroy(){this._routeParamSubscription&&this._routeParamSubscription.unsubscribe()}startTailing(){this.tailingUrl=this._sanitizer.bypassSecurityTrustResourceUrl(`${this._windowRef.nativeWindow.PAGE.cp_security_token}/cgi/process_tail.cgi?process=ConvertToFPM&build_id=${this.buildId}`)}closeWindow(){this._windowRef.nativeWindow.close()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(C.g),t.Y36(w.gz),t.Y36(j),t.Y36(A.H7))},i.\u0275cmp=t.Xpm({type:i,selectors:[["multiphp-mgr-php-fpm-conversion"]],decls:8,vars:3,consts:[[1,"row"],[1,"col-xs-12"],[1,"section-header","pull-left","flip"],[1,"btn","btn-sm","btn-default","pull-right","flip",3,"click"],["class","log-frame","id","log-php-fpm-conversions",3,"src",4,"ngIf"],["id","log-php-fpm-conversions",1,"log-frame",3,"src"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),t._uU(3),t.qZA(),t.TgZ(4,"button",3),t.NdJ("click",function(){return n.closeWindow()}),t._uU(5),t.qZA()(),t.TgZ(6,"div",1),t.YNc(7,Ue,1,1,"iframe",4),t.qZA()()),2&e&&(t.xp6(3),t.hij(" ",n.locale.maketext("Convert All Accounts to [asis,PHP-FPM]")," "),t.xp6(2),t.hij(" ",n.locale.maketext("Close this window")," "),t.xp6(2),t.Q6J("ngIf",n.tailingUrl))},directives:[h.O5],styles:[".log-frame[_ngcontent-%COMP%]{width:100%;height:500px}.section-header[_ngcontent-%COMP%]{margin-top:10px}"]}),i})(),pathMatch:"full"},{path:"",redirectTo:"system",pathMatch:"full"},{path:"**",redirectTo:"system",pathMatch:"full"}];let Be=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[w.Bz.forRoot(qe,{relativeLinkResolution:"legacy"}),h.ez,v.mr.forRoot(),B.Fq.forRoot()],w.Bz]}),i})();const Qe=["phpTabSet"];function Ne(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"tabset",null,4)(2,"tab",5),t.NdJ("selectTab",function(){return t.CHM(e),t.oxw().routeTo("/system")}),t.qZA(),t.TgZ(3,"tab",6),t.NdJ("selectTab",function(){return t.CHM(e),t.oxw().routeTo("/user")}),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(2),t.s9C("heading",e.locale.maketext("System Settings")),t.xp6(1),t.s9C("heading",e.locale.maketext("User Domain Settings"))}}let Ye=(()=>{class i{constructor(e,n,o,r,p){this.router=e,this.route=n,this.locale=o,this.ngZone=r,this.phpVersionService=p,this.title="multiphp-manager",this.showTabSet=!0,e.events.subscribe(u=>{if(u instanceof w.m2){const T=(0,g.find)(this.phpTabSet.tabs,["id",n.root.firstChild.snapshot.data.tab]);T?(this.showTabSet=!0,T.active=!0):this.showTabSet=!1}})}ngOnInit(){this.phpVersionService.fetchInstalledPhpVersionList(),this.phpVersionService.fetchInstalledPhpFpmPackages()}routeTo(e){this.ngZone.run(()=>this.router.navigate([e]))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(w.F0),t.Y36(w.gz),t.Y36(C.g),t.Y36(t.R0b),t.Y36(b))},i.\u0275cmp=t.Xpm({type:i,selectors:[["multiphp-mgr-root"]],viewQuery:function(e,n){if(1&e&&t.Gf(Qe,5),2&e){let o;t.iGM(o=t.CRH())&&(n.phpTabSet=o.first)}},decls:7,vars:1,consts:[["position","top-right"],["id","content"],[4,"ngIf"],[1,"body"],["phpTabSet",""],["id","system",3,"heading","selectTab"],["id","user",3,"heading","selectTab"]],template:function(e,n){1&e&&(t._UZ(0,"cp-alert-list",0),t.TgZ(1,"div",1),t._UZ(2,"multiphp-mgr-cloudlinux-banner"),t.TgZ(3,"div"),t.YNc(4,Ne,4,2,"tabset",2),t.TgZ(5,"div",3),t._UZ(6,"router-outlet"),t.qZA()()()),2&e&&(t.xp6(4),t.Q6J("ngIf",n.showTabSet))},directives:[a.hF,tt,h.O5,N.AH,N.wW,w.lC],styles:[".body[_ngcontent-%COMP%]{margin-top:30px}"]}),i})();var F=m(348);let Q=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[],imports:[[h.ez,v.mr.forRoot(),F.m]]}),i})(),st=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[],imports:[[h.ez,F.m]]}),i})(),Ee=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i,bootstrap:[et]}),i.\u0275inj=t.cJS({providers:[a.c9],imports:[[F.m,h.ez,a.df,a.zf,a.nM,a.CQ,a.zr,a.Op,d.u5,Q,st]]}),i})();var Re=m(529);const je=["multiphp-mgr-user-domain",""];function We(i,s){1&i&&(t.TgZ(0,"div",24),t._UZ(1,"i",25),t.qZA())}function ze(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",21)(1,"multiphp-mgr-php-dropdown",22),t.NdJ("phpVersionChanged",function(o){t.CHM(e);const r=t.oxw();return r.changePhpVersion(o,r.rowData)}),t.qZA(),t.YNc(2,We,2,0,"div",23),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.MGl("id","",e.rowData.model.vhost,"-domain-php"),t.Q6J("selectedPhpVersion",e.rowData.model.phpVersion)("mode",e.dropdown)("disabled",e.disableRow()),t.xp6(1),t.Q6J("ngIf",e.rowData.phpVersionChangeInProcess)}}function Ge(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"span",26),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return o.openDetails(o.rowData)}),t.TgZ(1,"span",27),t._uU(2),t.qZA()()}if(2&i){const e=t.oxw();t.MGl("id","",e.rowData.model.vhost,"-deprecated-pill"),t.xp6(2),t.Oqu(e.locale.maketext("Deprecated"))}}function $e(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"cp-toggle-switch",28),t.NdJ("toggleStatus",function(){t.CHM(e);const o=t.oxw();return o.toggleFpm(o.rowData)}),t.qZA()}if(2&i){const e=t.oxw();t.MGl("id","",e.rowData.model.vhost,"-domain-FPM"),t.s9C("onText",e.locale.maketext("Enabled")),t.s9C("offText",e.locale.maketext("Disabled")),t.Q6J("toggleState",e.rowData.domainFpmToggle.toggleState)("labelPosition",e.rowData.domainFpmToggle.labelPosition)("isDisabled",e.rowData.domainFpmToggle.isDisabled)}}function Xe(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return o.openDetails(o.rowData)}),t._UZ(1,"span",30),t._uU(2),t.qZA()}if(2&i){const e=t.oxw();t.MGl("id","",e.rowData.model.vhost,"-unavailable"),t.Q6J("disabled",e.disableRow()),t.xp6(2),t.hij(" ",e.locale.maketext("Unavailable")," ")}}function Ke(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return o.goToFpmSettings(o.rowData.model.vhost)}),t._UZ(1,"span",20),t._uU(2),t.qZA()}if(2&i){const e=t.oxw();t.MGl("id","",e.rowData.model.vhost,"-settings"),t.xp6(2),t.hij(" ",e.locale.maketext("[asis,PHP-FPM] Settings")," ")}}let $=(()=>{class i{constructor(e,n,o,r,p,u){this.locale=e,this.domainService=n,this.phpHelper=o,this.alertService=r,this.phpService=p,this.phpVersionService=u,this.rowPhpVersionChanged=new t.vpe,this.rowSelectionChanged=new t.vpe,this.inheritStateChanged=new t.vpe,this.domainRowDisabled=!1}get isFpmEligible(){return!this.rowData.isInherit&&this.phpVersionService.isPhpFpmInstalled(`${this.rowData.model.phpVersion.version}-php-fpm`)}get showFpmSettingsButton(){return this.isFpmEligible&&this.rowData.model.fpmStatus===_.enabled}get displayDetailsCss(){return this.rowData.displayDetails?"fa-chevron-down":this.locale.isRtl?"fa-chevron-left":"fa-chevron-right"}get showDeprecatedPill(){return!(!this.rowData.model.phpVersion.isDeprecated||!this.rowData.isInherit)}toggleFpm(e){e.domainFpmToggle.toggleState=a.Yg.toggleUpdating,e.model.fpmStatus===_.disabled?this.domainService.applyFPMToDomain(e.domain,_.enabled).subscribe(n=>{n.hasErrors?this.phpHelper.error(n):(e.domainFpmToggle.toggleState=a.Yg.toggleOn,e.model.fpmStatus=_.enabled,this.alertService.success(this.locale.maketext("You enabled [asis,PHP-FPM] for \u201c[_1]\u201d.",e.domain)))}):this.domainService.applyFPMToDomain(e.domain,_.disabled).subscribe(n=>{n.hasErrors?this.phpHelper.error(n):(e.domainFpmToggle.toggleState=a.Yg.toggleOff,e.model.fpmStatus=_.disabled,this.alertService.success(this.locale.maketext("You disabled [asis,PHP-FPM] for \u201c[_1]\u201d.",e.domain)))})}goToFpmSettings(e){this.phpHelper.routeTo(`user/fpm-settings/${e}`)}openDetails(e){e.displayDetails=!e.displayDetails,e.domainFpmToggle.isDisabled=!e.domainFpmToggle.isDisabled}disableRow(){return this.domainRowDisabled=!(!this.rowData.inheritInProcess&&!this.rowData.displayDetails),this.domainRowDisabled}changePhpVersion(e,n){n.model.phpVersion=e,this.rowPhpVersionChanged.emit(n)}setupElementsBasedOnInheritStatus(){this.setInheritStatus(),this.setFpmStatus()}setFpmStatus(){this.rowData.model.fpmStatus===_.enabled&&(this.rowData.domainFpmToggle.toggleState=a.Yg.toggleOn)}setInheritStatus(){this.rowData.isInherit=this.rowData.wantToInherit=""!==this.rowData.model.phpVersionSource}selectionChanged(){this.rowSelectionChanged.emit(this.rowData)}onInheritCheckChanged(){this.rowData.inheritInProcess=!0,this.inheritStateChanged.emit(this.rowData)}showInheritLabel(e){let n="";return n=e.isInherit?this.locale.maketext("Inherit - [_1][comment,this is label]",e.model.phpVersion.formattedVersion):this.locale.maketext("Inherit"),n}ngOnInit(){this.setupElementsBasedOnInheritStatus()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(C.g),t.Y36(W),t.Y36(O),t.Y36(a.c9),t.Y36(E),t.Y36(b))},i.\u0275cmp=t.Xpm({type:i,selectors:[["","multiphp-mgr-user-domain",""]],inputs:{rowData:"rowData",phpVersions:"phpVersions"},outputs:{rowPhpVersionChanged:"rowPhpVersionChanged",rowSelectionChanged:"rowSelectionChanged",inheritStateChanged:"inheritStateChanged"},attrs:je,decls:26,vars:19,consts:[[1,"bulkActionColumn","hidden-xs"],["type","checkbox",3,"ngModel","ngModelChange","change"],[1,"domainColumn"],[1,"row-expand-container"],["title","View details.","aria-label","View details.",1,"btn","btn-link",3,"id","click"],["aria-hidden","true",1,"fas",3,"ngClass"],[1,"domain-name","collapse-text"],[1,"hidden-xs","accountColumn"],[1,"phpVersionColumn","hidden-xs"],[1,"phpVersionContainer"],["class","phpDropdown",4,"ngIf"],[1,"inheritCheckbox"],["type","checkbox",3,"id","ngModel","disabled","change","ngModelChange"],[1,"checkboxLabel",3,"id","innerHtml"],["class","deprecatedPillContainer",3,"id","click",4,"ngIf"],[1,"hidden-xs","fpmToggleColumn"],[3,"id","onText","offText","toggleState","labelPosition","isDisabled","toggleStatus",4,"ngIf","ngIfElse"],["unavailable",""],["class","btn btn-outline-primary btn-sm fpmSettings mobile-float","type","button",3,"id","click",4,"ngIf"],["type","button",1,"btn","btn-outline-primary","btn-sm","visible-xs","mobile-float",3,"id","click"],["aria-hidden","true",1,"fas","fa-wrench"],[1,"phpDropdown"],[3,"id","selectedPhpVersion","mode","disabled","phpVersionChanged"],["class","processing-spinner",4,"ngIf"],[1,"processing-spinner"],["aria-hidden","true",1,"fas","fa-spinner","fa-spin","spinner"],[1,"deprecatedPillContainer",3,"id","click"],[1,"label","label-warning","deprecatedPill"],[3,"id","onText","offText","toggleState","labelPosition","isDisabled","toggleStatus"],["type","button",1,"btn","btn-default","btn-sm",3,"id","disabled","click"],["aria-hidden","true",1,"fas","fa-ban"],["type","button",1,"btn","btn-outline-primary","btn-sm","fpmSettings","mobile-float",3,"id","click"]],template:function(e,n){if(1&e&&(t.TgZ(0,"td",0)(1,"input",1),t.NdJ("ngModelChange",function(r){return n.rowData.selected=r})("change",function(){return n.selectionChanged()}),t.qZA()(),t.TgZ(2,"td",2)(3,"div",3)(4,"button",4),t.NdJ("click",function(){return n.openDetails(n.rowData)}),t._UZ(5,"i",5),t.qZA()(),t.TgZ(6,"span",6),t._uU(7),t.qZA()(),t.TgZ(8,"td",7),t._uU(9),t.qZA(),t.TgZ(10,"td",8)(11,"div",9),t.YNc(12,ze,3,5,"div",10),t.TgZ(13,"label",11)(14,"input",12),t.NdJ("change",function(){return n.onInheritCheckChanged()})("ngModelChange",function(r){return n.rowData.wantToInherit=r}),t.qZA(),t._UZ(15,"span",13),t.qZA(),t.YNc(16,Ge,3,2,"span",14),t.qZA()(),t.TgZ(17,"td",15),t.YNc(18,$e,1,6,"cp-toggle-switch",16),t.YNc(19,Xe,3,3,"ng-template",null,17,t.W1O),t.qZA(),t.TgZ(21,"td"),t.YNc(22,Ke,3,2,"button",18),t.TgZ(23,"button",19),t.NdJ("click",function(){return n.openDetails(n.rowData)}),t._UZ(24,"span",20),t._uU(25),t.qZA()()),2&e){const o=t.MAs(20);t.xp6(1),t.Q6J("ngModel",n.rowData.selected),t.uIk("aria-label",n.locale.maketext("Select single row.")),t.xp6(3),t.MGl("id","",n.rowData.model.vhost,"-open-details"),t.xp6(1),t.Q6J("ngClass",n.displayDetailsCss),t.xp6(2),t.Oqu(n.rowData.model.vhost),t.xp6(2),t.hij(" ",n.rowData.model.account,"\n"),t.xp6(3),t.Q6J("ngIf",!n.rowData.isInherit),t.xp6(2),t.MGl("id","",n.rowData.model.vhost,"-inherit-checkbox"),t.Q6J("ngModel",n.rowData.wantToInherit)("disabled",n.disableRow()),t.uIk("aria-label",n.locale.maketext("Toggle [asis,PHP] version inherit.")),t.xp6(1),t.MGl("id","",n.rowData.model.vhost,"-inherit-label-text"),t.Q6J("innerHtml",n.showInheritLabel(n.rowData),t.oJD),t.xp6(1),t.Q6J("ngIf",n.showDeprecatedPill),t.xp6(2),t.Q6J("ngIf",n.isFpmEligible)("ngIfElse",o),t.xp6(4),t.Q6J("ngIf",n.showFpmSettingsButton),t.xp6(1),t.MGl("id","",n.rowData.model.vhost,"-manage"),t.xp6(2),t.hij(" ",n.locale.maketext("Manage")," ")}},directives:[d.Wl,d.JJ,d.On,h.mk,h.O5,J,a.MF],styles:[".phpVersionContainer[_ngcontent-%COMP%]{width:100%;display:inline-block}.inheritCheckbox[_ngcontent-%COMP%]{padding-top:4px;display:inline-block}.phpDropdown[_ngcontent-%COMP%]{display:inline-block}html[dir=ltr][_ngcontent-%COMP%]   .phpDropdown[_ngcontent-%COMP%], [dir=ltr][_ngcontent-%COMP%]   .phpDropdown[_ngcontent-%COMP%], [dir=ltr][_nghost-%COMP%]   .phpDropdown[_ngcontent-%COMP%], html[dir=ltr][_nghost-%COMP%]   .phpDropdown[_ngcontent-%COMP%], html[dir=ltr]   [_nghost-%COMP%]   .phpDropdown[_ngcontent-%COMP%], [dir=ltr][_nghost-%COMP%]   .phpDropdown[_ngcontent-%COMP%], [dir=ltr]   [_nghost-%COMP%]   .phpDropdown[_ngcontent-%COMP%]{padding-right:10px}html[dir=rtl][_ngcontent-%COMP%]   .phpDropdown[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .phpDropdown[_ngcontent-%COMP%], [dir=rtl][_nghost-%COMP%]   .phpDropdown[_ngcontent-%COMP%], html[dir=rtl][_nghost-%COMP%]   .phpDropdown[_ngcontent-%COMP%], html[dir=rtl]   [_nghost-%COMP%]   .phpDropdown[_ngcontent-%COMP%], [dir=rtl][_nghost-%COMP%]   .phpDropdown[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .phpDropdown[_ngcontent-%COMP%]{padding-left:10px}.checkboxLabel[_ngcontent-%COMP%]{font-weight:400!important}html[dir=ltr][_ngcontent-%COMP%]   .checkboxLabel[_ngcontent-%COMP%], [dir=ltr][_ngcontent-%COMP%]   .checkboxLabel[_ngcontent-%COMP%], [dir=ltr][_nghost-%COMP%]   .checkboxLabel[_ngcontent-%COMP%], html[dir=ltr][_nghost-%COMP%]   .checkboxLabel[_ngcontent-%COMP%], html[dir=ltr]   [_nghost-%COMP%]   .checkboxLabel[_ngcontent-%COMP%], [dir=ltr][_nghost-%COMP%]   .checkboxLabel[_ngcontent-%COMP%], [dir=ltr]   [_nghost-%COMP%]   .checkboxLabel[_ngcontent-%COMP%]{padding-left:4px}html[dir=rtl][_ngcontent-%COMP%]   .checkboxLabel[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .checkboxLabel[_ngcontent-%COMP%], [dir=rtl][_nghost-%COMP%]   .checkboxLabel[_ngcontent-%COMP%], html[dir=rtl][_nghost-%COMP%]   .checkboxLabel[_ngcontent-%COMP%], html[dir=rtl]   [_nghost-%COMP%]   .checkboxLabel[_ngcontent-%COMP%], [dir=rtl][_nghost-%COMP%]   .checkboxLabel[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .checkboxLabel[_ngcontent-%COMP%]{padding-right:4px}.openDetailsColumn[_ngcontent-%COMP%]{cursor:pointer;color:#2980b9}html[dir=ltr][_ngcontent-%COMP%]   .processing-spinner[_ngcontent-%COMP%], [dir=ltr][_ngcontent-%COMP%]   .processing-spinner[_ngcontent-%COMP%], [dir=ltr][_nghost-%COMP%]   .processing-spinner[_ngcontent-%COMP%], html[dir=ltr][_nghost-%COMP%]   .processing-spinner[_ngcontent-%COMP%], html[dir=ltr]   [_nghost-%COMP%]   .processing-spinner[_ngcontent-%COMP%], [dir=ltr][_nghost-%COMP%]   .processing-spinner[_ngcontent-%COMP%], [dir=ltr]   [_nghost-%COMP%]   .processing-spinner[_ngcontent-%COMP%]{padding-left:5px}html[dir=rtl][_ngcontent-%COMP%]   .processing-spinner[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .processing-spinner[_ngcontent-%COMP%], [dir=rtl][_nghost-%COMP%]   .processing-spinner[_ngcontent-%COMP%], html[dir=rtl][_nghost-%COMP%]   .processing-spinner[_ngcontent-%COMP%], html[dir=rtl]   [_nghost-%COMP%]   .processing-spinner[_ngcontent-%COMP%], [dir=rtl][_nghost-%COMP%]   .processing-spinner[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .processing-spinner[_ngcontent-%COMP%]{padding-right:5px}.domain-name[_ngcontent-%COMP%]{display:table-cell}"]}),i})();function tn(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"section")(1,"p"),t._uU(2),t.qZA(),t.TgZ(3,"multiphp-mgr-php-dropdown",8),t.NdJ("phpVersionChanged",function(o){t.CHM(e);const r=t.oxw();return r.domainList.updateNewPhpVersionInDomainRow(o,r.rowData)}),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(2),t.hij(" ",e.locale.maketext("Select a [asis,PHP] version and click \u201cApply\u201d to finish the process.")," "),t.xp6(1),t.MGl("id","",e.rowData.model.vhost,"-move-from-inherit-php"),t.Q6J("selectedPhpVersion",e.rowData.newPhpVersionToMoveFromInherit)("mode",e.dropdown)}}let rt=(()=>{class i{constructor(e,n){this.locale=e,this.domainList=n,this.confirmInheritStateChanged=new t.vpe,this.cancelInheritStateChange=new t.vpe}ngOnInit(){}handleApplyInheritState(){this.confirmInheritStateChanged.emit(this.rowData)}handleCancelInherit(){this.cancelInheritStateChange.emit(this.rowData)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(C.g),t.Y36(V))},i.\u0275cmp=t.Xpm({type:i,selectors:[["multiphp-mgr-inherit-warning"]],inputs:{rowData:"rowData",calloutCss:"calloutCss"},outputs:{confirmInheritStateChanged:"confirmInheritStateChanged",cancelInheritStateChange:"cancelInheritStateChange"},decls:11,vars:12,consts:[["calloutType","warning",3,"id","ngClass"],[1,"display-table"],[1,"display-table-cell"],[1,"box"],[1,"inherit-message","wordbreak",3,"innerHtml"],[4,"ngIf"],[3,"id","buttonClass","buttonState","title","click"],["type","button",1,"btn","btn-link","btn-sm",3,"id","click"],[3,"id","selectedPhpVersion","mode","phpVersionChanged"]],template:function(e,n){1&e&&(t.TgZ(0,"cp-callout",0)(1,"div",1)(2,"div",2)(3,"div",3),t._UZ(4,"p",4),t.YNc(5,tn,4,4,"section",5),t.qZA(),t.TgZ(6,"div",3)(7,"cp-action-button",6),t.NdJ("click",function(){return n.handleApplyInheritState()}),t._uU(8),t.qZA(),t.TgZ(9,"button",7),t.NdJ("click",function(){return n.handleCancelInherit()}),t._uU(10),t.qZA()()()()()),2&e&&(t.MGl("id","",n.rowData.model.vhost,"-domain-inherit-prompt-row"),t.Q6J("ngClass",n.calloutCss),t.xp6(4),t.Q6J("innerHtml",n.rowData.showInheritPromptMessage,t.oJD),t.xp6(1),t.Q6J("ngIf",n.rowData.showInheritPrompt&&!n.rowData.wantToInherit),t.xp6(2),t.MGl("id","",n.rowData.model.vhost,"-inherit-apply-button"),t.s9C("title",n.locale.maketext("Click here to apply the selected [asis,PHP] version.")),t.Q6J("buttonClass",n.rowData.applyInheritButton.buttonClass)("buttonState",n.rowData.applyInheritButton.buttonState),t.uIk("aria-label",n.locale.maketext("Apply inherit.")),t.xp6(1),t.hij(" ",n.locale.maketext("Apply")," "),t.xp6(1),t.MGl("id","",n.rowData.model.vhost,"-cancel-inherit"),t.xp6(1),t.hij(" ",n.locale.maketext("Cancel")," "))},directives:[a.Oc,h.mk,h.O5,J,a.xV],styles:[".rowCalloutCss[_ngcontent-%COMP%]     .callout{margin:-10px}"]}),i})();const en=["multiphp-mgr-user-domain-details",""];function nn(i,s){1&i&&(t.TgZ(0,"div",21),t._UZ(1,"i",22),t.qZA())}function on(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"span",18)(1,"multiphp-mgr-php-dropdown",19),t.NdJ("phpVersionChanged",function(o){t.CHM(e);const r=t.oxw();return r.detailsChangePhpVersion(o,r.rowData)}),t.qZA(),t.YNc(2,nn,2,0,"div",20),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.MGl("id","",e.rowData.model.vhost,"-domain-php-details"),t.Q6J("selectedPhpVersion",e.rowData.model.phpVersion)("mode",e.dropdown)("disabled",e.rowData.inheritInProcess),t.xp6(1),t.Q6J("ngIf",e.rowData.phpVersionChangeInProcess)}}function sn(i,s){if(1&i&&(t.TgZ(0,"span",23)(1,"span",24),t._uU(2),t.qZA()()),2&i){const e=t.oxw();t.MGl("id","",e.rowData.model.vhost,"-deprecated-pill-details"),t.xp6(2),t.Oqu(e.locale.maketext("Deprecated"))}}function rn(i,s){if(1&i&&(t.TgZ(0,"div",4)(1,"span",2),t._UZ(2,"i",25),t._uU(3),t.qZA()()),2&i){const e=t.oxw();t.xp6(3),t.hij(" ",e.locale.maketext("You are using a deprecated PHP Version. Update to a supported version.")," ")}}function an(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"multiphp-mgr-inherit-warning",26),t.NdJ("confirmInheritStateChanged",function(o){return t.CHM(e),t.oxw().handleApplyInheritState(o)})("cancelInheritStateChange",function(o){return t.CHM(e),t.oxw().handleCancelInherit(o)}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("rowData",e.rowData)}}function ln(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"cp-toggle-switch",27),t.NdJ("toggleStatus",function(){t.CHM(e);const o=t.oxw();return o.detailsToggleFpm(o.rowData)}),t.qZA()}if(2&i){const e=t.oxw();t.MGl("id","",e.rowData.model.vhost,"-domain-FPM-details"),t.s9C("onText",e.locale.maketext("Enabled")),t.s9C("offText",e.locale.maketext("Disabled")),t.Q6J("toggleState",e.rowData.domainFpmToggle.toggleState)("labelPosition",e.rowData.domainFpmToggle.labelPosition)}}function pn(i,s){if(1&i&&(t._UZ(0,"span",28),t._uU(1)),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.locale.maketext("Unavailable")," ")}}function cn(i,s){if(1&i&&(t.TgZ(0,"div",4)(1,"span",2),t._UZ(2,"i",29),t._uU(3),t.qZA()()),2&i){const e=t.oxw();t.xp6(3),t.hij(" ",e.locale.maketext("You cannot enable [asis,PHP FPM] on a domain that inherits a [asis,PHP] version.")," ")}}function hn(i,s){if(1&i&&(t.TgZ(0,"div",4)(1,"span",2),t._UZ(2,"i",29),t._uU(3),t.qZA()()),2&i){const e=t.oxw();t.xp6(3),t.hij(" ",e.locale.maketext("You must install the [asis,PHP-FPM] package in order to use [asis,PHP-FPM].")," ")}}let dn=(()=>{class i{constructor(e,n,o,r){this.locale=e,this.userDomain=n,this.domainList=o,this.phpVersionService=r,this.inheritStateChanged=new t.vpe,this.confirmInheritStateChanged=new t.vpe,this.cancelInheritStateChange=new t.vpe,this.rowPhpVersionChanged=new t.vpe,this.deprecatedWarning=!1}get deprecatedWarningCheck(){return!!this.rowData.model.phpVersion.isDeprecated}get isFpmEligible(){return!this.rowData.isInherit&&this.phpVersionService.isPhpFpmInstalled(`${this.rowData.model.phpVersion.version}-php-fpm`)}get showDeprecatedPill(){return!(!this.rowData.model.phpVersion.isDeprecated||!this.rowData.isInherit)}ngOnInit(){}closeDetails(e){e.displayDetails=!e.displayDetails,e.domainFpmToggle.isDisabled=!e.domainFpmToggle.isDisabled}showInheritLabel(e){return this.userDomain.showInheritLabel(e)}detailsInheritCheckChanged(){this.rowData.inheritInProcess=!0,this.inheritStateChanged.emit(this.rowData)}handleApplyInheritState(){this.confirmInheritStateChanged.emit(this.rowData)}handleCancelInherit(){this.cancelInheritStateChange.emit(this.rowData)}detailsToggleFpm(e){this.userDomain.toggleFpm(e)}detailsChangePhpVersion(e,n){n.model.phpVersion=e,this.rowPhpVersionChanged.emit(n)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(C.g),t.Y36($),t.Y36(V),t.Y36(b))},i.\u0275cmp=t.Xpm({type:i,selectors:[["","multiphp-mgr-user-domain-details",""]],inputs:{rowData:"rowData"},outputs:{inheritStateChanged:"inheritStateChanged",confirmInheritStateChanged:"confirmInheritStateChanged",cancelInheritStateChange:"cancelInheritStateChange",rowPhpVersionChanged:"rowPhpVersionChanged"},features:[t._Bn([$,V])],attrs:en,decls:39,vars:22,consts:[[1,"list-panel"],[1,"row"],[1,"col-xs-12"],["aria-hidden","true",1,"fas","fa-times","pull-right","flip",3,"click"],[1,"row","details-data-row"],[1,"col-xs-12","col-sm-2"],[1,"col-xs-12","col-sm-10"],[1,"phpVersionContainer","row"],["class","phpDropdown",4,"ngIf"],[1,"inheritCheckbox"],["type","checkbox",3,"id","ngModel","disabled","change","ngModelChange"],[1,"checkboxLabel",3,"id","innerHtml"],["class","deprecatedPillContainer",3,"id",4,"ngIf"],["class","row details-data-row",4,"ngIf"],[3,"rowData","confirmInheritStateChanged","cancelInheritStateChange",4,"ngIf"],[1,"phpFpmContainer","row"],[3,"id","onText","offText","toggleState","labelPosition","toggleStatus",4,"ngIf","ngIfElse"],["unavailable",""],[1,"phpDropdown"],[3,"id","selectedPhpVersion","mode","disabled","phpVersionChanged"],["class","processing-spinner",4,"ngIf"],[1,"processing-spinner"],["aria-hidden","true",1,"fas","fa-spinner","fa-spin","spinner"],[1,"deprecatedPillContainer",3,"id"],[1,"label","label-warning","deprecatedPill"],["aria-hidden","true",1,"fas","fa-exclamation-triangle","warning"],[3,"rowData","confirmInheritStateChanged","cancelInheritStateChange"],[3,"id","onText","offText","toggleState","labelPosition","toggleStatus"],["aria-hidden","true",1,"fas","fa-ban"],["aria-hidden","true",1,"fas","fa-info-circle","info"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"i",3),t.NdJ("click",function(){return n.closeDetails(n.rowData)}),t.qZA()()(),t.TgZ(4,"div",4)(5,"label",5),t._uU(6),t.qZA(),t.TgZ(7,"span",6),t._uU(8),t.qZA()(),t.TgZ(9,"div",4)(10,"label",5),t._uU(11),t.qZA(),t.TgZ(12,"span",6),t._uU(13),t.qZA()(),t.TgZ(14,"div",4)(15,"label",5),t._uU(16),t.qZA(),t.TgZ(17,"span",6),t._uU(18),t.qZA()(),t.TgZ(19,"div",7)(20,"label",5),t._uU(21),t.qZA(),t.TgZ(22,"div",6),t.YNc(23,on,3,5,"span",8),t.TgZ(24,"label",9)(25,"input",10),t.NdJ("change",function(){return n.detailsInheritCheckChanged()})("ngModelChange",function(r){return n.rowData.wantToInherit=r}),t.qZA(),t._UZ(26,"span",11),t.qZA(),t.YNc(27,sn,3,2,"span",12),t.qZA()(),t.YNc(28,rn,4,1,"div",13),t.YNc(29,an,1,1,"multiphp-mgr-inherit-warning",14),t.TgZ(30,"div",15)(31,"label",5),t._uU(32),t.qZA(),t.TgZ(33,"div",6),t.YNc(34,ln,1,5,"cp-toggle-switch",16),t.YNc(35,pn,2,1,"ng-template",null,17,t.W1O),t.qZA()(),t.YNc(37,cn,4,1,"div",13),t.YNc(38,hn,4,1,"div",13),t.qZA()),2&e){const o=t.MAs(36);t.xp6(6),t.Oqu(n.locale.maketext("Domain")),t.xp6(2),t.Oqu(n.rowData.model.vhost),t.xp6(3),t.Oqu(n.locale.maketext("Account")),t.xp6(2),t.Oqu(n.rowData.model.account),t.xp6(3),t.Oqu(n.locale.maketext("Account Owner")),t.xp6(2),t.Oqu(n.rowData.model.accountOwner),t.xp6(3),t.Oqu(n.locale.maketext("PHP Version")),t.xp6(2),t.Q6J("ngIf",!n.rowData.isInherit),t.xp6(2),t.MGl("id","",n.rowData.model.vhost,"-inherit-checkbox-details"),t.Q6J("ngModel",n.rowData.wantToInherit)("disabled",n.rowData.inheritInProcess),t.uIk("aria-label",n.locale.maketext("Toggle [asis,PHP] version inherit.")),t.xp6(1),t.MGl("id","",n.rowData.model.vhost,"-inherit-label-text-details"),t.Q6J("innerHtml",n.showInheritLabel(n.rowData),t.oJD),t.xp6(1),t.Q6J("ngIf",n.showDeprecatedPill),t.xp6(1),t.Q6J("ngIf",n.deprecatedWarningCheck),t.xp6(1),t.Q6J("ngIf",n.rowData.showInheritPrompt&&n.rowData.displayDetails),t.xp6(3),t.Oqu(n.locale.maketext("[asis,PHP-FPM]")),t.xp6(2),t.Q6J("ngIf",n.isFpmEligible)("ngIfElse",o),t.xp6(3),t.Q6J("ngIf",n.rowData.isInherit),t.xp6(1),t.Q6J("ngIf",!n.isFpmEligible&&!n.rowData.isInherit)}},directives:[h.O5,J,d.Wl,d.JJ,d.On,rt,a.MF],styles:[".checkboxLabel[_ngcontent-%COMP%]{font-weight:400!important}html[dir=ltr][_ngcontent-%COMP%]   .checkboxLabel[_ngcontent-%COMP%], [dir=ltr][_ngcontent-%COMP%]   .checkboxLabel[_ngcontent-%COMP%], [dir=ltr][_nghost-%COMP%]   .checkboxLabel[_ngcontent-%COMP%], html[dir=ltr][_nghost-%COMP%]   .checkboxLabel[_ngcontent-%COMP%], html[dir=ltr]   [_nghost-%COMP%]   .checkboxLabel[_ngcontent-%COMP%], [dir=ltr][_nghost-%COMP%]   .checkboxLabel[_ngcontent-%COMP%], [dir=ltr]   [_nghost-%COMP%]   .checkboxLabel[_ngcontent-%COMP%]{padding-left:4px}html[dir=rtl][_ngcontent-%COMP%]   .checkboxLabel[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .checkboxLabel[_ngcontent-%COMP%], [dir=rtl][_nghost-%COMP%]   .checkboxLabel[_ngcontent-%COMP%], html[dir=rtl][_nghost-%COMP%]   .checkboxLabel[_ngcontent-%COMP%], html[dir=rtl]   [_nghost-%COMP%]   .checkboxLabel[_ngcontent-%COMP%], [dir=rtl][_nghost-%COMP%]   .checkboxLabel[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .checkboxLabel[_ngcontent-%COMP%]{padding-right:4px}.phpVersionContainer[_ngcontent-%COMP%]{width:100%;display:inline-block}.inheritCheckbox[_ngcontent-%COMP%]{padding-top:4px}html[dir=ltr][_ngcontent-%COMP%]   .inheritCheckbox[_ngcontent-%COMP%], [dir=ltr][_ngcontent-%COMP%]   .inheritCheckbox[_ngcontent-%COMP%], [dir=ltr][_nghost-%COMP%]   .inheritCheckbox[_ngcontent-%COMP%], html[dir=ltr][_nghost-%COMP%]   .inheritCheckbox[_ngcontent-%COMP%], html[dir=ltr]   [_nghost-%COMP%]   .inheritCheckbox[_ngcontent-%COMP%], [dir=ltr][_nghost-%COMP%]   .inheritCheckbox[_ngcontent-%COMP%], [dir=ltr]   [_nghost-%COMP%]   .inheritCheckbox[_ngcontent-%COMP%]{padding-left:10px}html[dir=rtl][_ngcontent-%COMP%]   .inheritCheckbox[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .inheritCheckbox[_ngcontent-%COMP%], [dir=rtl][_nghost-%COMP%]   .inheritCheckbox[_ngcontent-%COMP%], html[dir=rtl][_nghost-%COMP%]   .inheritCheckbox[_ngcontent-%COMP%], html[dir=rtl]   [_nghost-%COMP%]   .inheritCheckbox[_ngcontent-%COMP%], [dir=rtl][_nghost-%COMP%]   .inheritCheckbox[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .inheritCheckbox[_ngcontent-%COMP%]{padding-right:10px}.list-panel[_ngcontent-%COMP%]{overflow:inherit}html[dir=ltr][_ngcontent-%COMP%]   .list-panel[_ngcontent-%COMP%], [dir=ltr][_ngcontent-%COMP%]   .list-panel[_ngcontent-%COMP%], [dir=ltr][_nghost-%COMP%]   .list-panel[_ngcontent-%COMP%], html[dir=ltr][_nghost-%COMP%]   .list-panel[_ngcontent-%COMP%], html[dir=ltr]   [_nghost-%COMP%]   .list-panel[_ngcontent-%COMP%], [dir=ltr][_nghost-%COMP%]   .list-panel[_ngcontent-%COMP%], [dir=ltr]   [_nghost-%COMP%]   .list-panel[_ngcontent-%COMP%]{padding-left:50px;padding-right:5px}html[dir=rtl][_ngcontent-%COMP%]   .list-panel[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .list-panel[_ngcontent-%COMP%], [dir=rtl][_nghost-%COMP%]   .list-panel[_ngcontent-%COMP%], html[dir=rtl][_nghost-%COMP%]   .list-panel[_ngcontent-%COMP%], html[dir=rtl]   [_nghost-%COMP%]   .list-panel[_ngcontent-%COMP%], [dir=rtl][_nghost-%COMP%]   .list-panel[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .list-panel[_ngcontent-%COMP%]{padding-right:50px;padding-left:5px}.details-data-row[_ngcontent-%COMP%]{padding-bottom:5px}.warning[_ngcontent-%COMP%]{color:#f6c342}.info[_ngcontent-%COMP%]{color:#179bd7}"]}),i})(),at=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[],imports:[[h.ez,v.mr.forRoot(),F.m,a.df,a.zr,Q]]}),i})();var lt=m(2521);let gn=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i,bootstrap:[it]}),i.\u0275inj=t.cJS({providers:[a.c9],imports:[[h.ez,v.mr.forRoot(),B.Fq.forRoot(),F.m,a.nM,a.df,a.CQ,a.Op,d.u5,Q,a.zr,at,a.t8,lt.u3.forRoot()]]}),i})();t.B6R(V,[h.O5,a.Oc,a.gS,lt.Qt,d.JJ,d.On,d.Wl,J,a.xV,v.TO,v.Mq,v.Hz,B.pj,h.sg,B.lz,h.mk,$,dn,rt],[]);let mn=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[],imports:[[h.ez,F.m,a.kM]]}),i})(),_n=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[h.ez]]}),i})(),un=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i,bootstrap:[G]}),i.\u0275inj=t.cJS({providers:[a.c9],imports:[[F.m,h.ez,a.df,a.zf,a.nM,a.CQ,a.zr,a.Op,d.u5,a.wL,mn,a.kM,_n,z.A0]]}),i})(),fn=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i,bootstrap:[Ye]}),i.\u0275inj=t.cJS({providers:[{provide:h.mr,useValue:window.PAGE.base}],imports:[[Ee,gn,un,Q,at,st,A.b2,h.ez,Re.JF,Be,F.m,a.CQ,N.P4.forRoot(),d.u5]]}),i})();(0,t.G48)(),A.q6().bootstrapModule(fn).catch(i=>console.error(i))}},H=>{H.O(0,[736],()=>H(H.s=2908)),H.O()}]);